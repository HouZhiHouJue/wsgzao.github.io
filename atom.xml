<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title><![CDATA[HelloDog]]></title>
  <subtitle><![CDATA[Keep Calm and Carry On]]></subtitle>
  <link href="/atom.xml" rel="self"/>
  <link href="http://wsgzao.github.io/"/>
  <updated>2015-08-14T09:42:26.020Z</updated>
  <id>http://wsgzao.github.io/</id>
  
  <author>
    <name><![CDATA[wsgzao]]></name>
    
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title><![CDATA[LTMP手动编译安装以及全自动化部署实践]]></title>
    <link href="http://wsgzao.github.io/post/ltmp/"/>
    <id>http://wsgzao.github.io/post/ltmp/</id>
    <published>2015-08-14T07:42:19.000Z</published>
    <updated>2015-08-14T09:42:26.020Z</updated>
    <content type="html"><![CDATA[<p><img src="//i.v2ex.co/Up79Hq7l.jpeg" alt=""></p>
<h2 id="前言">前言</h2><p>现在很多朋友都了解或者已经在使用LNMP架构，一般可以理解为Linux Shell为CentOS/RadHat/Fedora/Debian/Ubuntu/等平台安装LNMP(Nginx/MySQL/PHP)，LNMPA(Nginx/MySQL/PHP/Apache)，LAMP(Apache/MySQL/PHP)等类似的开发或生产环境。我自己是从SuSE/Oracle商业化环境走出来的，对于开源的部署方案也是在一点一点摸索，我相信其中也必然包含某些坑爹的配置。这篇文章较为详细的描述了基于LTMP架构的部署过程，之后会再考虑独立各个模块分享细节和技巧，如果大家有更合适的配置实践手册欢迎一起分享，文章中的错误和改进点也请帮忙指点下哈。</p>
<blockquote>
<p>LTMP(CentOS/Tengine/MySQL/PHP)</p>
</blockquote>
<hr>
<h2 id="更新历史">更新历史</h2><p>2015年08月14日 - 更新GitHub自动部署源码和安装包<br>2015年08月04日 - 初稿</p>
<p>阅读原文 - <a href="http://wsgzao.github.io/post/ltmp/" target="_blank" rel="external">http://wsgzao.github.io/post/ltmp/</a></p>
<p>扩展阅读</p>
<p>CentOS - <a href="http://www.centos.org/" target="_blank" rel="external">http://www.centos.org/</a><br>Tengine - <a href="http://tengine.taobao.org/" target="_blank" rel="external">http://tengine.taobao.org/</a><br>Nginx - <a href="http://nginx.org/en/docs/" target="_blank" rel="external">http://nginx.org/en/docs/</a><br>MySQL - <a href="http://www.mysql.com/" target="_blank" rel="external">http://www.mysql.com/</a><br>PHP - <a href="http://php.net/" target="_blank" rel="external">http://php.net/</a><br>LTMP索引 - <a href="http://wsgzao.github.io/index/#LTMP" target="_blank" rel="external">http://wsgzao.github.io/index/#LTMP</a></p>
<hr>
<h2 id="LTMP版本">LTMP版本</h2><ol>
<li>CentOS_6.5_64</li>
<li>Tengine-2.1.0</li>
<li>MySQL_5.6.25</li>
<li>PHP_5.5.27</li>
<li>Apache_2.2.31(酱油)</li>
</ol>
<h2 id="准备工作">准备工作</h2><blockquote>
<p>如果允许公网访问会方便很多</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#优化History历史记录</span></span><br><span class="line">vi /etc/bashrc</span><br><span class="line"></span><br><span class="line"><span class="comment">#设置保存历史命令的文件大小</span></span><br><span class="line"><span class="built_in">export</span> HISTFILESIZE=<span class="number">1000000000</span></span><br><span class="line"><span class="comment">#保存历史命令条数</span></span><br><span class="line"><span class="built_in">export</span> HISTSIZE=<span class="number">1000000</span></span><br><span class="line"><span class="comment">#实时记录历史命令，默认只有在用户退出之后才会统一记录，很容易造成多个用户间的相互覆盖。</span></span><br><span class="line"><span class="built_in">export</span> PROMPT_COMMAND=<span class="string">"history -a"</span></span><br><span class="line"><span class="comment">#记录每条历史命令的执行时间</span></span><br><span class="line"><span class="built_in">export</span> HISTTIMEFORMAT=<span class="string">"%Y-%m-%d_%H:%M:%S "</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#设置时区（可选）</span></span><br><span class="line">rm -rf /etc/localtime</span><br><span class="line">ln <span class="operator">-s</span> /usr/share/zoneinfo/Asia/Shanghai /etc/localtime</span><br><span class="line"></span><br><span class="line"><span class="comment">#禁用NetworkManager（可选）</span></span><br><span class="line">/etc/init.d/NetworkManager stop</span><br><span class="line">chkconfig NetworkManager off</span><br><span class="line">/etc/init.d/network restart</span><br><span class="line"></span><br><span class="line"><span class="comment">#关闭iptables（可选） </span></span><br><span class="line">/etc/init.d/iptables stop</span><br><span class="line">chkconfig iptables off</span><br><span class="line"></span><br><span class="line"><span class="comment">#设置dns（可选）</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">"nameserver 114.114.114.114"</span> &gt; /etc/resolv.conf </span><br><span class="line"></span><br><span class="line"><span class="comment">#关闭maildrop</span></span><br><span class="line"><span class="comment">#cd /var/spool/postfix/maildrop;ls | xargs rm -rf; </span></span><br><span class="line">sed <span class="string">'s/MAILTO=root/MAILTO=""/g'</span> /etc/crontab</span><br><span class="line">service crond restart</span><br><span class="line"></span><br><span class="line"><span class="comment">#关闭selinux</span></span><br><span class="line">setenforce <span class="number">0</span></span><br><span class="line">sed -i <span class="string">'s/SELINUX=enforcing/SELINUX=disabled/'</span> /etc/selinux/config  </span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#文件打开数量，</span></span><br><span class="line"><span class="built_in">echo</span> <span class="built_in">ulimit</span> -SHn <span class="number">65535</span> &gt;&gt; /etc/profile</span><br><span class="line"><span class="built_in">source</span> /etc/profile</span><br><span class="line"></span><br><span class="line"><span class="comment">#修改最大进程和最大文件打开数限制</span></span><br><span class="line">vi /etc/security/limits.conf</span><br><span class="line">* soft nproc <span class="number">11000</span></span><br><span class="line">* hard nproc <span class="number">11000</span></span><br><span class="line">* soft nofile <span class="number">655350</span></span><br><span class="line">* hard nofile <span class="number">655350</span></span><br><span class="line"></span><br><span class="line">sed -i <span class="operator">-e</span> <span class="string">'/# End of file/i\* soft  nofile 65535\n* hard nofile 65535'</span>  /etc/security/limits.conf</span><br><span class="line"></span><br><span class="line"><span class="comment">#优化TCP</span></span><br><span class="line">vi /etc/sysctl.conf</span><br><span class="line"></span><br><span class="line"><span class="comment">#禁用包过滤功能 </span></span><br><span class="line">net.ipv4.ip_forward = <span class="number">0</span>  </span><br><span class="line"><span class="comment">#启用源路由核查功能 </span></span><br><span class="line">net.ipv4.conf.default.rp_filter = <span class="number">1</span>  </span><br><span class="line"><span class="comment">#禁用所有IP源路由 </span></span><br><span class="line">net.ipv4.conf.default.accept_<span class="built_in">source</span>_route = <span class="number">0</span>  </span><br><span class="line"><span class="comment">#使用sysrq组合键是了解系统目前运行情况，为安全起见设为0关闭</span></span><br><span class="line">kernel.sysrq = <span class="number">0</span>  </span><br><span class="line"><span class="comment">#控制core文件的文件名是否添加pid作为扩展</span></span><br><span class="line">kernel.core_uses_pid = <span class="number">1</span>  </span><br><span class="line"><span class="comment">#开启SYN Cookies，当出现SYN等待队列溢出时，启用cookies来处理</span></span><br><span class="line">net.ipv4.tcp_syncookies = <span class="number">1</span>  </span><br><span class="line"><span class="comment">#每个消息队列的大小（单位：字节）限制</span></span><br><span class="line">kernel.msgmnb = <span class="number">65536</span>  </span><br><span class="line"><span class="comment">#整个系统最大消息队列数量限制</span></span><br><span class="line">kernel.msgmax = <span class="number">65536</span>  </span><br><span class="line"><span class="comment">#单个共享内存段的大小（单位：字节）限制，计算公式64G*1024*1024*1024(字节)</span></span><br><span class="line">kernel.shmmax = <span class="number">68719476736</span>  </span><br><span class="line"><span class="comment">#所有内存大小（单位：页，1页 = 4Kb），计算公式16G*1024*1024*1024/4KB(页)</span></span><br><span class="line">kernel.shmall = <span class="number">4294967296</span>  </span><br><span class="line"><span class="comment">#timewait的数量，默认是180000</span></span><br><span class="line">net.ipv4.tcp_max_tw_buckets = <span class="number">6000</span>  </span><br><span class="line"><span class="comment">#开启有选择的应答</span></span><br><span class="line">net.ipv4.tcp_sack = <span class="number">1</span>  </span><br><span class="line"><span class="comment">#支持更大的TCP窗口. 如果TCP窗口最大超过65535(64K), 必须设置该数值为1</span></span><br><span class="line">net.ipv4.tcp_window_scaling = <span class="number">1</span>  </span><br><span class="line"><span class="comment">#TCP读buffer</span></span><br><span class="line">net.ipv4.tcp_rmem = <span class="number">4096</span> <span class="number">131072</span> <span class="number">1048576</span></span><br><span class="line"><span class="comment">#TCP写buffer</span></span><br><span class="line">net.ipv4.tcp_wmem = <span class="number">4096</span> <span class="number">131072</span> <span class="number">1048576</span>   </span><br><span class="line"><span class="comment">#为TCP socket预留用于发送缓冲的内存默认值（单位：字节）</span></span><br><span class="line">net.core.wmem_default = <span class="number">8388608</span></span><br><span class="line"><span class="comment">#为TCP socket预留用于发送缓冲的内存最大值（单位：字节）</span></span><br><span class="line">net.core.wmem_max = <span class="number">16777216</span>  </span><br><span class="line"><span class="comment">#为TCP socket预留用于接收缓冲的内存默认值（单位：字节）  </span></span><br><span class="line">net.core.rmem_default = <span class="number">8388608</span></span><br><span class="line"><span class="comment">#为TCP socket预留用于接收缓冲的内存最大值（单位：字节）</span></span><br><span class="line">net.core.rmem_max = <span class="number">16777216</span></span><br><span class="line"><span class="comment">#每个网络接口接收数据包的速率比内核处理这些包的速率快时，允许送到队列的数据包的最大数目</span></span><br><span class="line">net.core.netdev_max_backlog = <span class="number">262144</span>  </span><br><span class="line"><span class="comment">#web应用中listen函数的backlog默认会给我们内核参数的net.core.somaxconn限制到128，而nginx定义的NGX_LISTEN_BACKLOG默认为511，所以有必要调整这个值</span></span><br><span class="line">net.core.somaxconn = <span class="number">262144</span>  </span><br><span class="line"><span class="comment">#系统中最多有多少个TCP套接字不被关联到任何一个用户文件句柄上。这个限制仅仅是为了防止简单的DoS攻击，不能过分依靠它或者人为地减小这个值，更应该增加这个值(如果增加了内存之后)</span></span><br><span class="line">net.ipv4.tcp_max_orphans = <span class="number">3276800</span>  </span><br><span class="line"><span class="comment">#记录的那些尚未收到客户端确认信息的连接请求的最大值。对于有128M内存的系统而言，缺省值是1024，小内存的系统则是128</span></span><br><span class="line">net.ipv4.tcp_max_syn_backlog = <span class="number">262144</span>  </span><br><span class="line"><span class="comment">#时间戳可以避免序列号的卷绕。一个1Gbps的链路肯定会遇到以前用过的序列号。时间戳能够让内核接受这种“异常”的数据包。这里需要将其关掉</span></span><br><span class="line">net.ipv4.tcp_timestamps = <span class="number">0</span>  </span><br><span class="line"><span class="comment">#为了打开对端的连接，内核需要发送一个SYN并附带一个回应前面一个SYN的ACK。也就是所谓三次握手中的第二次握手。这个设置决定了内核放弃连接之前发送SYN+ACK包的数量</span></span><br><span class="line">net.ipv4.tcp_synack_retries = <span class="number">1</span>  </span><br><span class="line"><span class="comment">#在内核放弃建立连接之前发送SYN包的数量</span></span><br><span class="line">net.ipv4.tcp_syn_retries = <span class="number">1</span>  </span><br><span class="line"><span class="comment">#开启TCP连接中time_wait sockets的快速回收</span></span><br><span class="line">net.ipv4.tcp_tw_recycle = <span class="number">1</span>  </span><br><span class="line"><span class="comment">#开启TCP连接复用功能，允许将time_wait sockets重新用于新的TCP连接（主要针对time_wait连接）</span></span><br><span class="line">net.ipv4.tcp_tw_reuse = <span class="number">1</span>  </span><br><span class="line"><span class="comment">#1st低于此值,TCP没有内存压力,2nd进入内存压力阶段,3rdTCP拒绝分配socket(单位：内存页)</span></span><br><span class="line">net.ipv4.tcp_mem = <span class="number">94500000</span> <span class="number">915000000</span> <span class="number">927000000</span>   </span><br><span class="line"><span class="comment">#如果套接字由本端要求关闭，这个参数决定了它保持在FIN-WAIT-2状态的时间。对端可以出错并永远不关闭连接，甚至意外当机。缺省值是60 秒。2.2 内核的通常值是180秒，你可以按这个设置，但要记住的是，即使你的机器是一个轻载的WEB服务器，也有因为大量的死套接字而内存溢出的风险，FIN- WAIT-2的危险性比FIN-WAIT-1要小，因为它最多只能吃掉1.5K内存，但是它们的生存期长些。</span></span><br><span class="line">net.ipv4.tcp_fin_timeout = <span class="number">15</span>  </span><br><span class="line"><span class="comment">#表示当keepalive起用的时候，TCP发送keepalive消息的频度（单位：秒）</span></span><br><span class="line">net.ipv4.tcp_keepalive_time = <span class="number">30</span>  </span><br><span class="line"><span class="comment">#对外连接端口范围</span></span><br><span class="line">net.ipv4.ip_<span class="built_in">local</span>_port_range = <span class="number">2048</span> <span class="number">65000</span></span><br><span class="line"><span class="comment">#表示文件句柄的最大数量</span></span><br><span class="line">fs.file-max = <span class="number">102400</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#云主机上的优化</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Kernel sysctl configuration file for Red Hat Linux</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># For binary values, 0 is disabled, 1 is enabled.  See sysctl(8) and</span></span><br><span class="line"><span class="comment"># sysctl.conf(5) for more details.</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Controls IP packet forwarding</span></span><br><span class="line">net.ipv4.ip_forward = <span class="number">0</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Controls source route verification</span></span><br><span class="line">net.ipv4.conf.default.rp_filter = <span class="number">1</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Do not accept source routing</span></span><br><span class="line">net.ipv4.conf.default.accept_<span class="built_in">source</span>_route = <span class="number">0</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Controls the System Request debugging functionality of the kernel</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Controls whether core dumps will append the PID to the core filename.</span></span><br><span class="line"><span class="comment"># Useful for debugging multi-threaded applications.</span></span><br><span class="line">kernel.core_uses_pid = <span class="number">1</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Controls the use of TCP syncookies</span></span><br><span class="line">net.ipv4.tcp_syncookies = <span class="number">1</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Disable netfilter on bridges.</span></span><br><span class="line">net.bridge.bridge-nf-call-ip6tables = <span class="number">0</span></span><br><span class="line">net.bridge.bridge-nf-call-iptables = <span class="number">0</span></span><br><span class="line">net.bridge.bridge-nf-call-arptables = <span class="number">0</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Controls the default maxmimum size of a mesage queue</span></span><br><span class="line">kernel.msgmnb = <span class="number">65536</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Controls the maximum size of a message, in bytes</span></span><br><span class="line">kernel.msgmax = <span class="number">65536</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Controls the maximum shared segment size, in bytes</span></span><br><span class="line">kernel.shmmax = <span class="number">68719476736</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Controls the maximum number of shared memory segments, in pages</span></span><br><span class="line">kernel.shmall = <span class="number">4294967296</span></span><br><span class="line">net.ipv4.conf.all.send_redirects = <span class="number">0</span></span><br><span class="line">net.ipv4.conf.default.send_redirects = <span class="number">0</span></span><br><span class="line">net.ipv4.conf.all.secure_redirects = <span class="number">0</span></span><br><span class="line">net.ipv4.conf.default.secure_redirects = <span class="number">0</span></span><br><span class="line">net.ipv4.conf.all.accept_redirects = <span class="number">0</span></span><br><span class="line">net.ipv4.conf.default.accept_redirects = <span class="number">0</span></span><br><span class="line">net.ipv4.conf.all.send_redirects = <span class="number">0</span></span><br><span class="line">net.ipv4.conf.default.send_redirects = <span class="number">0</span></span><br><span class="line">net.ipv4.conf.all.secure_redirects = <span class="number">0</span></span><br><span class="line">net.ipv4.conf.default.secure_redirects = <span class="number">0</span></span><br><span class="line">net.ipv4.conf.all.accept_redirects = <span class="number">0</span></span><br><span class="line">net.ipv4.conf.default.accept_redirects = <span class="number">0</span></span><br><span class="line">net.netfilter.nf_conntrack_max = <span class="number">1000000</span></span><br><span class="line">kernel.unknown_nmi_panic = <span class="number">0</span></span><br><span class="line">kernel.sysrq = <span class="number">0</span></span><br><span class="line">fs.file-max = <span class="number">1000000</span></span><br><span class="line">vm.swappiness = <span class="number">10</span></span><br><span class="line">fs.inotify.max_user_watches = <span class="number">10000000</span></span><br><span class="line">net.core.wmem_max = <span class="number">327679</span></span><br><span class="line">net.core.rmem_max = <span class="number">327679</span></span><br><span class="line">net.ipv4.conf.all.send_redirects = <span class="number">0</span></span><br><span class="line">net.ipv4.conf.default.send_redirects = <span class="number">0</span></span><br><span class="line">net.ipv4.conf.all.secure_redirects = <span class="number">0</span></span><br><span class="line">net.ipv4.conf.default.secure_redirects = <span class="number">0</span></span><br><span class="line">net.ipv4.conf.all.accept_redirects = <span class="number">0</span></span><br><span class="line">net.ipv4.conf.default.accept_redirects = <span class="number">0</span></span><br><span class="line"></span><br><span class="line">/sbin/sysctl -p</span><br><span class="line"></span><br><span class="line"><span class="comment">#自动选择最快的yum源</span></span><br><span class="line">yum -y install yum-fastestmirror</span><br><span class="line"></span><br><span class="line"><span class="comment">#移除系统自带的rpm包的http mysql php</span></span><br><span class="line"><span class="comment">#yum remove httpd* php*</span></span><br><span class="line">yum remove httpd mysql mysql-server php php-cli php-common php-devel php-gd  -y</span><br><span class="line"></span><br><span class="line"><span class="comment">#升级基础库</span></span><br><span class="line">yum install -y wget gcc gcc-c++ openssl* curl curl-devel libxml2 libxml2-devel glibc glibc-devel glib2 glib2-devel gd gd2 gd-devel gd2-devel libaio autoconf libjpeg libjpeg-devel libpng libpng-devel freetype freetype-devel </span><br><span class="line"></span><br><span class="line"><span class="comment">#yum安装基础必备环境包，可以先将yum源更换为阿里云的源</span></span><br><span class="line">阿里：http://mirrors.aliyun.com/ </span><br><span class="line">搜狐：http://mirrors.sohu.com/ </span><br><span class="line">网易：http://mirrors.<span class="number">163</span>.com/</span><br><span class="line"></span><br><span class="line"><span class="comment">#备份原先的yum源信息</span></span><br><span class="line">mv /etc/yum.repos.d/CentOS-Base.repo /etc/yum.repos.d/CentOS-Base.repo.backup</span><br><span class="line"></span><br><span class="line"><span class="comment">#从阿里云镜像站下载centos6的repo</span></span><br><span class="line">wget -O /etc/yum.repos.d/CentOS-Base.repo http://mirrors.aliyun.com/repo/Centos-<span class="number">6</span>.repo</span><br><span class="line"></span><br><span class="line"><span class="comment">#最后yum重新生成缓存</span></span><br><span class="line">yum makecache</span><br><span class="line"></span><br><span class="line"><span class="comment">#yum安装软件包（可选）</span></span><br><span class="line">yum -y install tar zip unzip openssl* gd gd-devel gcc gcc-c++ autoconf libjpeg libjpeg-devel libpng libpng-devel freetype freetype-devel libxml2 libxml2-devel zlib zlib-devel glibc glibc-devel glib2 glib2-devel bzip2 bzip2-devel ncurses ncurses-devel curl curl-devel e2fsprogs e2fsprogs-devel krb5 krb5-devel libidn libidn-devel openssl openssl-devel openldap openldap-devel openldap-clients openldap-servers make libmcrypt libmcrypt-devel fontconfig fontconfig-devel libXpm* libtool* libxml2 libxml2-devel t1lib t1lib-devel</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#定义目录结构，下载安装包</span></span><br><span class="line">mkdir -p /app/&#123;<span class="built_in">local</span>,data&#125;</span><br><span class="line"><span class="built_in">cd</span> /app/<span class="built_in">local</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#PCRE - Perl Compatible Regular Expressions</span></span><br><span class="line">wget <span class="string">"ftp://ftp.csx.cam.ac.uk/pub/software/programming/pcre/pcre-8.37.tar.gz"</span></span><br><span class="line"><span class="comment">#Tengine</span></span><br><span class="line">wget <span class="string">"http://tengine.taobao.org/download/tengine-2.1.0.tar.gz"</span></span><br><span class="line"><span class="comment">#MySQL</span></span><br><span class="line">wget <span class="string">"https://downloads.mariadb.com/archives/mysql-5.6/mysql-5.6.25-linux-glibc2.5-x86_64.tar.gz"</span></span><br><span class="line"><span class="comment">#PHP</span></span><br><span class="line">wget <span class="string">"http://cn2.php.net/distributions/php-5.6.11.tar.gz"</span></span><br><span class="line"><span class="comment">#Mhash</span></span><br><span class="line">wget <span class="string">"http://downloads.sourceforge.net/mhash/mhash-0.9.9.9.tar.gz"</span></span><br><span class="line"><span class="comment">#libmcrypt</span></span><br><span class="line">wget <span class="string">"http://downloads.sourceforge.net/mcrypt/libmcrypt-2.5.8.tar.gz"</span></span><br><span class="line"><span class="comment">#Mcrypt</span></span><br><span class="line">wget <span class="string">"http://downloads.sourceforge.net/mcrypt/mcrypt-2.6.8.tar.gz"</span></span><br></pre></td></tr></table></figure>
<h2 id="配置Tengine">配置Tengine</h2><h3 id="安装PCRE">安装PCRE</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">tar zxvf pcre-<span class="number">8.37</span>.tar.gz</span><br><span class="line"><span class="built_in">cd</span> pcre-<span class="number">8.37</span></span><br><span class="line">./configure</span><br><span class="line">make &amp;&amp; make install</span><br><span class="line"><span class="built_in">cd</span> ../</span><br></pre></td></tr></table></figure>
<h2 id="安装Tengine">安装Tengine</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#添加www用户和组</span></span><br><span class="line">groupadd www</span><br><span class="line">useradd -g www www</span><br><span class="line"><span class="comment">#安装Tengine</span></span><br><span class="line">tar zxvf tengine-<span class="number">2.1</span>.<span class="number">0</span>.tar.gz</span><br><span class="line"><span class="built_in">cd</span> tengine-<span class="number">2.1</span>.<span class="number">0</span></span><br><span class="line"></span><br><span class="line">./configure --user=www --group=www \</span><br><span class="line">--prefix=/app/<span class="built_in">local</span>/nginx \</span><br><span class="line">--with-http_stub_status_module \</span><br><span class="line">--with-http_ssl_module \</span><br><span class="line">--with-pcre=/app/<span class="built_in">local</span>/pcre-<span class="number">8.37</span></span><br><span class="line"></span><br><span class="line">make &amp;&amp; make install</span><br><span class="line"><span class="built_in">cd</span> ../</span><br></pre></td></tr></table></figure>
<h3 id="配置Nginx">配置Nginx</h3><blockquote>
<p>Nginx配置文件的优化很重要，理解每一步的意义</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#修改nginx.conf</span></span><br><span class="line">vi /app/<span class="built_in">local</span>/nginx/conf/nginx.conf</span><br><span class="line"></span><br><span class="line"><span class="comment">#用户和用户组</span></span><br><span class="line">user  www www;</span><br><span class="line"><span class="comment">#工作进程，一般可以按CPU核数设定</span></span><br><span class="line">worker_processes  auto;</span><br><span class="line">worker_cpu_affinity auto;</span><br><span class="line"><span class="comment">#全局错误日志级别</span></span><br><span class="line"><span class="comment"># [ debug | info | notice | warn | error | crit ]</span></span><br><span class="line">error_<span class="built_in">log</span>  logs/error.log  error;</span><br><span class="line"><span class="comment">#PID文件位置</span></span><br><span class="line">pid  logs/nginx.pid;</span><br><span class="line"><span class="comment">#更改worker进程的最大打开文件数限制，避免"too many open files"</span></span><br><span class="line">worker_rlimit_nofile <span class="number">65535</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">#events事件指令是设定Nginx的工作模式及连接数上限</span></span><br><span class="line">events&#123;</span><br><span class="line">     <span class="comment">#epoll是Linux首选的高效工作模式</span></span><br><span class="line">     use epoll;</span><br><span class="line">     <span class="comment">#告诉nginx收到一个新连接通知后接受尽可能多的连接</span></span><br><span class="line">     multi_accept on;</span><br><span class="line">     <span class="comment">#用于定义Nginx每个进程的最大连接数</span></span><br><span class="line">     worker_connections      <span class="number">65536</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">#HTTP模块控制着nginx http处理的所有核心特性</span></span><br><span class="line">http &#123;</span><br><span class="line">    include       mime.types;</span><br><span class="line">    <span class="comment">#设置文件使用的默认的MIME-type</span></span><br><span class="line">    default_<span class="built_in">type</span>  application/octet-stream;</span><br><span class="line">    </span><br><span class="line"></span><br><span class="line">    <span class="comment">#对日志格式的设定，main为日志格式别名</span></span><br><span class="line">    <span class="built_in">log</span>_format  main  <span class="string">'$remote_addr - $remote_user [$time_local] "$request" '</span></span><br><span class="line">                      <span class="string">'$status $body_bytes_sent "$http_referer" '</span></span><br><span class="line">                      <span class="string">'"$http_user_agent" "$http_x_forwarded_for"'</span>;</span><br><span class="line">    <span class="comment">#设置nginx是否将存储访问日志。关闭这个选项可以让读取磁盘IO操作更快</span></span><br><span class="line">    access_<span class="built_in">log</span> off;</span><br><span class="line">    <span class="comment"># access_log logs/access.log main buffer=16k;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">#开启gzip压缩，实时压缩输出数据流</span></span><br><span class="line">    gzip on;</span><br><span class="line">    <span class="comment">#设置IE6或者更低版本禁用gzip功能</span></span><br><span class="line">    gzip_<span class="built_in">disable</span> <span class="string">"MSIE [1-6]\."</span>;</span><br><span class="line">    <span class="comment">#前端的缓存服务器缓存经过gzip压缩的页面</span></span><br><span class="line">    gzip_vary on;</span><br><span class="line">    <span class="comment">#允许压缩基于请求和响应的响应流</span></span><br><span class="line">    gzip_proxied any;</span><br><span class="line">    <span class="comment">#设置数据的压缩等级</span></span><br><span class="line">    gzip_comp_level <span class="number">4</span>;</span><br><span class="line">    <span class="comment">#设置对数据启用压缩的最少字节数</span></span><br><span class="line">    gzip_min_length <span class="number">1</span>k;</span><br><span class="line">    <span class="comment">#表示申请16个单位为64K的内存作为压缩结果流缓存</span></span><br><span class="line">    gzip_buffers <span class="number">16</span> <span class="number">64</span>k;</span><br><span class="line">    <span class="comment">#用于设置识别HTTP协议版本</span></span><br><span class="line">    gzip_http_version <span class="number">1.1</span>;</span><br><span class="line">    <span class="comment">#用来指定压缩的类型</span></span><br><span class="line">    gzip_types text/plain text/css application/json application/x-javascript text/xml application/xml application/xml+rss text/javascript;</span><br><span class="line">     </span><br><span class="line"></span><br><span class="line">    <span class="comment">#打开缓存的同时也指定了缓存最大数目，以及缓存的时间</span></span><br><span class="line">    open_file_cache max=<span class="number">200000</span> inactive=<span class="number">20</span>s;</span><br><span class="line">    <span class="comment">#在open_file_cache中指定检测正确信息的间隔时间</span></span><br><span class="line">    open_file_cache_valid <span class="number">30</span>s;</span><br><span class="line">    <span class="comment">#定义了open_file_cache中指令参数不活动时间期间里最小的文件数</span></span><br><span class="line">    open_file_cache_min_uses <span class="number">2</span>;</span><br><span class="line">    <span class="comment">#指定了当搜索一个文件时是否缓存错误信息，也包括再次给配置中添加文件</span></span><br><span class="line">    open_file_cache_errors on; </span><br><span class="line"> </span><br><span class="line">    <span class="comment">#设置允许客户端请求的最大的单个文件字节数</span></span><br><span class="line">    client_max_body_size <span class="number">30</span>M;</span><br><span class="line">    <span class="comment">#设置客户端请求主体读取超时时间</span></span><br><span class="line">    client_body_timeout <span class="number">10</span>;</span><br><span class="line">    <span class="comment">#设置客户端请求头读取超时时间</span></span><br><span class="line">    client_header_timeout <span class="number">10</span>;</span><br><span class="line">    <span class="comment">#指定来自客户端请求头的headerbuffer大小</span></span><br><span class="line">    client_header_buffer_size <span class="number">32</span>k;</span><br><span class="line">    <span class="comment">#设置客户端连接保持活动的超时时间</span></span><br><span class="line">    keepalive_timeout <span class="number">60</span>;</span><br><span class="line">    <span class="comment">#关闭不响应的客户端连接</span></span><br><span class="line">    reset_timedout_connection on;</span><br><span class="line">    <span class="comment">#设置响应客户端的超时时间</span></span><br><span class="line">    send_timeout <span class="number">10</span>;</span><br><span class="line">    <span class="comment">#开启高效文件传输模式</span></span><br><span class="line">    sendfile on;</span><br><span class="line">    <span class="comment">#告诉nginx在一个数据包里发送所有头文件，而不一个接一个的发送</span></span><br><span class="line">    tcp_nopush on;</span><br><span class="line">    <span class="comment">#告诉nginx不要缓存数据，而是一段一段的发送</span></span><br><span class="line">    tcp_nodelay on;</span><br><span class="line">    <span class="comment">#设置用于保存各种key（比如当前连接数）的共享内存的参数</span></span><br><span class="line">    <span class="built_in">limit</span>_conn_zone <span class="variable">$binary_remote_addr</span> zone=addr:<span class="number">5</span>m; </span><br><span class="line">    <span class="comment">#给定的key设置最大连接数，允许每一个IP地址最多同时打开有100个连接</span></span><br><span class="line">    <span class="built_in">limit</span>_conn addr <span class="number">100</span>; </span><br><span class="line"> </span><br><span class="line">    <span class="comment">#FastCGI相关参数是为了改善网站的性能：减少资源占用，提高访问速度</span></span><br><span class="line">    fastcgi_buffers <span class="number">256</span> <span class="number">16</span>k;</span><br><span class="line">    fastcgi_buffer_size <span class="number">128</span>k;</span><br><span class="line">    fastcgi_connect_timeout <span class="number">3</span>s;</span><br><span class="line">    fastcgi_send_timeout <span class="number">120</span>s;</span><br><span class="line">    fastcgi_<span class="built_in">read</span>_timeout <span class="number">120</span>s;</span><br><span class="line">    server_names_<span class="built_in">hash</span>_bucket_size <span class="number">128</span>;</span><br><span class="line">    <span class="comment">#不在error_log中记录不存在的错误</span></span><br><span class="line">    <span class="built_in">log</span>_not_found off;</span><br><span class="line">    <span class="comment">#关闭在错误页面中的nginx版本数字，提高安全性</span></span><br><span class="line">    <span class="comment">#server_tag Apache;</span></span><br><span class="line">    server_tokens off;</span><br><span class="line">    <span class="comment">#tengine</span></span><br><span class="line">    server_tag off;</span><br><span class="line">    server_info off;</span><br><span class="line"></span><br><span class="line">    <span class="comment">#添加虚拟主机的配置文件</span></span><br><span class="line">    include vhosts/*.conf;</span><br><span class="line"></span><br><span class="line">    <span class="comment">#负载均衡配置（暂时略过）</span></span><br><span class="line">    <span class="comment">#upstream test.com</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">#设定虚拟主机配置</span></span><br><span class="line">    server &#123;</span><br><span class="line">        <span class="comment">#侦听80端口</span></span><br><span class="line">        listen       <span class="number">80</span>;</span><br><span class="line">        <span class="comment">#定义使用localhost访问</span></span><br><span class="line">        server_name  localhost;</span><br><span class="line">        <span class="comment">#定义首页索引文件的名称</span></span><br><span class="line">        index index.html index.htm index.php;</span><br><span class="line">        <span class="comment">#定义服务器的默认网站根目录位置</span></span><br><span class="line">        root    /app/data/localhost/;</span><br><span class="line"> </span><br><span class="line">        <span class="comment">#定义错误提示页面</span></span><br><span class="line">        error_page  <span class="number">404</span>              /<span class="number">404</span>.html;</span><br><span class="line">        error_page  <span class="number">500</span> <span class="number">502</span> <span class="number">503</span> <span class="number">504</span>  /<span class="number">50</span>x.html;</span><br><span class="line">        location = /<span class="number">50</span>x.html &#123;</span><br><span class="line">            root   html;</span><br><span class="line">        &#125;</span><br><span class="line"> </span><br><span class="line">        <span class="comment">#PHP 脚本请求全部转发到 FastCGI处理. 使用FastCGI默认配置.     </span></span><br><span class="line">        location ~ .*\.(php|php5)?$ &#123;</span><br><span class="line">            fastcgi_pass   <span class="number">127.0</span>.<span class="number">0.1</span>:<span class="number">9000</span>;</span><br><span class="line">            fastcgi_index  index.php;</span><br><span class="line">            include        fastcgi.conf;</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="comment">#静态文件</span></span><br><span class="line">        location ~ .*\.(gif|jpg|jpeg|png|bmp|swf|ico)$</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="comment">#过期30天，频繁更新可设置小一点</span></span><br><span class="line">            expires      <span class="number">30</span>d;</span><br><span class="line">        &#125;</span><br><span class="line"> </span><br><span class="line">        location ~ .*\.(js|css)?$</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="comment">#过期1小时，不更新可设置大一些</span></span><br><span class="line">            expires      <span class="number">1</span>h;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">#禁止访问</span></span><br><span class="line">        location ~ /\. &#123;</span><br><span class="line">            deny all;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>简化配置文件<br>vi /app/local/nginx/conf/nginx.conf</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">user  www www;</span><br><span class="line">worker_processes auto;</span><br><span class="line">worker_cpu_affinity auto;</span><br><span class="line"></span><br><span class="line">error_<span class="built_in">log</span>  logs/error.log  crit;</span><br><span class="line">pid        logs/nginx.pid;</span><br><span class="line"></span><br><span class="line">worker_rlimit_nofile <span class="number">51200</span>;</span><br><span class="line">events</span><br><span class="line">&#123;</span><br><span class="line">    use epoll;</span><br><span class="line">    multi_accept on;</span><br><span class="line">    worker_connections <span class="number">51200</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">http</span><br><span class="line">&#123;</span><br><span class="line">    include       mime.types;</span><br><span class="line">    default_<span class="built_in">type</span>  application/octet-stream;</span><br><span class="line"></span><br><span class="line">    <span class="built_in">log</span>_format  main  <span class="string">'$remote_addr - $remote_user [$time_local] "$request" '</span></span><br><span class="line">                      <span class="string">'$status $body_bytes_sent "$http_referer" '</span></span><br><span class="line">                      <span class="string">'"$http_user_agent" "$http_x_forwarded_for"'</span>;</span><br><span class="line"></span><br><span class="line">    access_<span class="built_in">log</span> off;</span><br><span class="line">    <span class="comment">#access_log logs/access.log main buffer=16k;</span></span><br><span class="line"></span><br><span class="line">    server_names_<span class="built_in">hash</span>_bucket_size <span class="number">128</span>;</span><br><span class="line">    client_header_buffer_size <span class="number">32</span>k;</span><br><span class="line">    large_client_header_buffers <span class="number">4</span> <span class="number">32</span>k;</span><br><span class="line">    client_max_body_size <span class="number">50</span>M; </span><br><span class="line"></span><br><span class="line">    sendfile on;</span><br><span class="line">    tcp_nopush on;</span><br><span class="line">    tcp_nodelay on;</span><br><span class="line">    keepalive_timeout <span class="number">60</span>; </span><br><span class="line">    server_tokens off;</span><br><span class="line">    server_tag off;</span><br><span class="line">    server_info off;</span><br><span class="line"></span><br><span class="line">    fastcgi_connect_timeout <span class="number">300</span>;</span><br><span class="line">    fastcgi_send_timeout <span class="number">300</span>;</span><br><span class="line">    fastcgi_<span class="built_in">read</span>_timeout <span class="number">300</span>;</span><br><span class="line">    fastcgi_buffer_size <span class="number">64</span>k;</span><br><span class="line">    fastcgi_buffers <span class="number">4</span> <span class="number">64</span>k;</span><br><span class="line">    fastcgi_busy_buffers_size <span class="number">128</span>k;</span><br><span class="line">    fastcgi_temp_file_write_size <span class="number">256</span>k;</span><br><span class="line"></span><br><span class="line">    <span class="comment">#gzip on;</span></span><br><span class="line">    <span class="comment">#gzip_min_length  1k;</span></span><br><span class="line">    <span class="comment">#gzip_buffers     4 16k;</span></span><br><span class="line">    <span class="comment">#gzip_http_version 1.1;</span></span><br><span class="line">    <span class="comment">#gzip_comp_level 5;</span></span><br><span class="line">    <span class="comment">#gzip_types       text/plain application/x-javascript text/css application/xml;</span></span><br><span class="line">    <span class="comment">#gzip_vary on;</span></span><br><span class="line"></span><br><span class="line">    include vhosts/*.conf;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>分离server写入vhosts<br>mkdir -p  /app/local/nginx/conf/vhosts/<br>vi /app/local/nginx/conf/vhosts/localhost.conf</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line">server &#123;</span><br><span class="line">    listen       <span class="number">80</span>;</span><br><span class="line">    server_name  localhost;</span><br><span class="line">    index index.php index.html index.htm;</span><br><span class="line">    access_<span class="built_in">log</span>  logs/localhost.log  main;</span><br><span class="line"></span><br><span class="line">    root    /app/data/localhost/;</span><br><span class="line"></span><br><span class="line">    location / &#123;</span><br><span class="line">        index  index.php index.html index.htm;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">#error_page  404              /404.html;</span></span><br><span class="line">    <span class="comment">#error_page  500 502 503 504  /50x.html;</span></span><br><span class="line"></span><br><span class="line">    location = /<span class="number">50</span>x.html &#123;</span><br><span class="line">        root   html;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    location ~ .*\.(php|php5)?$ &#123;</span><br><span class="line">        fastcgi_pass   <span class="number">127.0</span>.<span class="number">0.1</span>:<span class="number">9000</span>;</span><br><span class="line">        fastcgi_index  index.php;</span><br><span class="line">      <span class="comment">#fastcgi_param  SCRIPT_FILENAME $document_root$fastcgi_script_name;</span></span><br><span class="line">        include        fastcgi.conf;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    location ~ .*\.(gif|jpg|jpeg|png|bmp|swf|ico)$</span><br><span class="line">    &#123;</span><br><span class="line">        expires      <span class="number">30</span>d;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    location ~ .*\.(js|css)?$</span><br><span class="line">    &#123;</span><br><span class="line">        expires      <span class="number">1</span>h;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    location ~ /\. &#123;</span><br><span class="line">        deny all;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#检查语法</span></span><br><span class="line">/app/<span class="built_in">local</span>/nginx/sbin/nginx -t</span><br><span class="line"><span class="comment"># ./nginx -t</span></span><br><span class="line">the configuration file /app/<span class="built_in">local</span>/nginx/conf/nginx.conf syntax is ok</span><br><span class="line">configuration file /app/<span class="built_in">local</span>/nginx/conf/nginx.conf <span class="built_in">test</span> is successful</span><br><span class="line"></span><br><span class="line"><span class="comment">#测试用例</span></span><br><span class="line">mkdir -p /app/data/localhost</span><br><span class="line">chmod +w /app/data/localhost</span><br><span class="line"><span class="built_in">echo</span> <span class="string">"&lt;?php phpinfo();?&gt;"</span> &gt; /app/data/localhost/phpinfo.php</span><br><span class="line">chown -R www:www /app/data/localhost</span><br><span class="line"></span><br><span class="line"><span class="comment">#设置nginx系统变量</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">'export PATH=$PATH:/app/local/nginx/sbin'</span>&gt;&gt;/etc/profile &amp;&amp; <span class="built_in">source</span> /etc/profile</span><br><span class="line"></span><br><span class="line"><span class="comment">#测试访问</span></span><br><span class="line">curl -I http://localhost</span><br><span class="line"></span><br><span class="line">HTTP/<span class="number">1.1</span> <span class="number">200</span> OK</span><br><span class="line">Server: Tengine/<span class="number">2.1</span>.<span class="number">0</span></span><br><span class="line">Date: Mon, <span class="number">27</span> Jul <span class="number">2015</span> <span class="number">06</span>:<span class="number">42</span>:<span class="number">25</span> GMT</span><br><span class="line">Content-Type: text/html; charset=UTF-<span class="number">8</span></span><br><span class="line">Connection: keep-alive</span><br><span class="line">X-Powered-By: PHP/<span class="number">5.6</span>.<span class="number">11</span></span><br></pre></td></tr></table></figure>
<h3 id="添加Tengine到服务">添加Tengine到服务</h3><blockquote>
<p>配置服务后便于统一管理<br>vi /etc/rc.d/init.d/nginx</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br></pre></td><td class="code"><pre><span class="line"><span class="shebang">#!/bin/sh</span><br><span class="line"> </span></span><br><span class="line"><span class="comment"># Source function library.</span></span><br><span class="line">. /etc/rc.d/init.d/<span class="built_in">functions</span></span><br><span class="line"> </span><br><span class="line"><span class="comment"># Source networking configuration.</span></span><br><span class="line">. /etc/sysconfig/network</span><br><span class="line"> </span><br><span class="line"><span class="comment"># Check that networking is up.</span></span><br><span class="line">[ <span class="string">"<span class="variable">$NETWORKING</span>"</span> = <span class="string">"no"</span> ] &amp;&amp; <span class="built_in">exit</span> <span class="number">0</span></span><br><span class="line"> </span><br><span class="line">nginx=<span class="string">"/app/local/nginx/sbin/nginx"</span></span><br><span class="line">prog=$(basename <span class="variable">$nginx</span>)</span><br><span class="line"> </span><br><span class="line">NGINX_CONF_FILE=<span class="string">"/app/local/nginx/conf/nginx.conf"</span></span><br><span class="line"> </span><br><span class="line">[ <span class="operator">-f</span> /etc/sysconfig/nginx ] &amp;&amp; . /etc/sysconfig/nginx</span><br><span class="line"> </span><br><span class="line">lockfile=/var/lock/subsys/nginx</span><br><span class="line"> </span><br><span class="line"><span class="function"><span class="title">make_dirs</span></span>() &#123;</span><br><span class="line">   <span class="comment"># make required directories</span></span><br><span class="line">   user=`<span class="variable">$nginx</span> -V <span class="number">2</span>&gt;&amp;<span class="number">1</span> | grep <span class="string">"configure arguments:"</span> | sed <span class="string">'s/[^*]*--user=\([^ ]*\).*/\1/g'</span> -`</span><br><span class="line">   <span class="keyword">if</span> [ -z <span class="string">"`grep <span class="variable">$user</span> /etc/passwd`"</span> ]; <span class="keyword">then</span></span><br><span class="line">       useradd -M <span class="operator">-s</span> /bin/nologin <span class="variable">$user</span></span><br><span class="line">   <span class="keyword">fi</span></span><br><span class="line">   options=`<span class="variable">$nginx</span> -V <span class="number">2</span>&gt;&amp;<span class="number">1</span> | grep <span class="string">'configure arguments:'</span>`</span><br><span class="line">   <span class="keyword">for</span> opt <span class="keyword">in</span> <span class="variable">$options</span>; <span class="keyword">do</span></span><br><span class="line">       <span class="keyword">if</span> [ `<span class="built_in">echo</span> <span class="variable">$opt</span> | grep <span class="string">'.*-temp-path'</span>` ]; <span class="keyword">then</span></span><br><span class="line">           value=`<span class="built_in">echo</span> <span class="variable">$opt</span> | cut <span class="operator">-d</span> <span class="string">"="</span> <span class="operator">-f</span> <span class="number">2</span>`</span><br><span class="line">           <span class="keyword">if</span> [ ! <span class="operator">-d</span> <span class="string">"<span class="variable">$value</span>"</span> ]; <span class="keyword">then</span></span><br><span class="line">               <span class="comment"># echo "creating" $value</span></span><br><span class="line">               mkdir -p <span class="variable">$value</span> &amp;&amp; chown -R <span class="variable">$user</span> <span class="variable">$value</span></span><br><span class="line">           <span class="keyword">fi</span></span><br><span class="line">       <span class="keyword">fi</span></span><br><span class="line">   <span class="keyword">done</span></span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="function"><span class="title">start</span></span>() &#123;</span><br><span class="line">    [ -x <span class="variable">$nginx</span> ] || <span class="built_in">exit</span> <span class="number">5</span></span><br><span class="line">    [ <span class="operator">-f</span> <span class="variable">$NGINX_CONF_FILE</span> ] || <span class="built_in">exit</span> <span class="number">6</span></span><br><span class="line">    make_<span class="built_in">dirs</span></span><br><span class="line">    <span class="built_in">echo</span> -n $<span class="string">"Starting <span class="variable">$prog</span>: "</span></span><br><span class="line">    daemon <span class="variable">$nginx</span> -c <span class="variable">$NGINX_CONF_FILE</span></span><br><span class="line">    retval=$?</span><br><span class="line">    <span class="built_in">echo</span></span><br><span class="line">    [ <span class="variable">$retval</span> <span class="operator">-eq</span> <span class="number">0</span> ] &amp;&amp; touch <span class="variable">$lockfile</span></span><br><span class="line">    <span class="built_in">return</span> <span class="variable">$retval</span></span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="function"><span class="title">stop</span></span>() &#123;</span><br><span class="line">    <span class="built_in">echo</span> -n $<span class="string">"Stopping <span class="variable">$prog</span>: "</span></span><br><span class="line">    killproc <span class="variable">$prog</span> -QUIT</span><br><span class="line">    retval=$?</span><br><span class="line">    <span class="built_in">echo</span></span><br><span class="line">    [ <span class="variable">$retval</span> <span class="operator">-eq</span> <span class="number">0</span> ] &amp;&amp; rm <span class="operator">-f</span> <span class="variable">$lockfile</span></span><br><span class="line">    <span class="built_in">return</span> <span class="variable">$retval</span></span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="function"><span class="title">restart</span></span>() &#123;</span><br><span class="line">    configtest || <span class="built_in">return</span> $?</span><br><span class="line">    stop</span><br><span class="line">    sleep <span class="number">1</span></span><br><span class="line">    start</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="function"><span class="title">reload</span></span>() &#123;</span><br><span class="line">    configtest || <span class="built_in">return</span> $?</span><br><span class="line">    <span class="built_in">echo</span> -n $<span class="string">"Reloading <span class="variable">$prog</span>: "</span></span><br><span class="line">    killproc <span class="variable">$nginx</span> -HUP</span><br><span class="line">    RETVAL=$?</span><br><span class="line">    <span class="built_in">echo</span></span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="function"><span class="title">force_reload</span></span>() &#123;</span><br><span class="line">    restart</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="function"><span class="title">configtest</span></span>() &#123;</span><br><span class="line">  <span class="variable">$nginx</span> -t -c <span class="variable">$NGINX_CONF_FILE</span></span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="function"><span class="title">rh_status</span></span>() &#123;</span><br><span class="line">    status <span class="variable">$prog</span></span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="function"><span class="title">rh_status_q</span></span>() &#123;</span><br><span class="line">    rh_status &gt;/dev/null <span class="number">2</span>&gt;&amp;<span class="number">1</span></span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">case</span> <span class="string">"<span class="variable">$1</span>"</span> <span class="keyword">in</span></span><br><span class="line">    start)</span><br><span class="line">        rh_status_q &amp;&amp; <span class="built_in">exit</span> <span class="number">0</span></span><br><span class="line">        <span class="variable">$1</span></span><br><span class="line">        ;;</span><br><span class="line">    stop)</span><br><span class="line">        rh_status_q || <span class="built_in">exit</span> <span class="number">0</span></span><br><span class="line">        <span class="variable">$1</span></span><br><span class="line">        ;;</span><br><span class="line">    restart|configtest)</span><br><span class="line">        <span class="variable">$1</span></span><br><span class="line">        ;;</span><br><span class="line">    reload)</span><br><span class="line">        rh_status_q || <span class="built_in">exit</span> <span class="number">7</span></span><br><span class="line">        <span class="variable">$1</span></span><br><span class="line">        ;;</span><br><span class="line">    force-reload)</span><br><span class="line">        force_reload</span><br><span class="line">        ;;</span><br><span class="line">    status)</span><br><span class="line">        rh_status</span><br><span class="line">        ;;</span><br><span class="line">    condrestart|try-restart)</span><br><span class="line">        rh_status_q || <span class="built_in">exit</span> <span class="number">0</span></span><br><span class="line">            ;;</span><br><span class="line">    *)</span><br><span class="line">        <span class="built_in">echo</span> $<span class="string">"Usage: <span class="variable">$0</span> &#123;start|stop|status|restart|condrestart|try-restart|reload|force-reload|configtest&#125;"</span></span><br><span class="line">        <span class="built_in">exit</span> <span class="number">2</span></span><br><span class="line"><span class="keyword">esac</span></span><br></pre></td></tr></table></figure>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#修改执行权限</span></span><br><span class="line">chmod +x /etc/init.d/nginx</span><br><span class="line"><span class="built_in">ulimit</span> -SHn <span class="number">65535</span></span><br><span class="line">service nginx start</span><br></pre></td></tr></table></figure>
<h2 id="安装MySQL">安装MySQL</h2><blockquote>
<p>注意目录和字符集等配置文件，推荐使用InnoDB作为存储引擎</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#解压mysql</span></span><br><span class="line">mkdir -p /app/<span class="built_in">local</span>/mysql</span><br><span class="line">tar zxvf mysql-<span class="number">5.6</span>.<span class="number">25</span>-linux-glibc2.<span class="number">5</span>-x86_64.tar.gz</span><br><span class="line">mv mysql-<span class="number">5.6</span>.<span class="number">25</span>-linux-glibc2.<span class="number">5</span>-x86_64/* /app/<span class="built_in">local</span>/mysql</span><br><span class="line"><span class="comment">#增加mysql用户组</span></span><br><span class="line">groupadd mysql</span><br><span class="line">useradd -g mysql mysql</span><br><span class="line">mkdir -p /app/data/mysql/data/</span><br><span class="line">mkdir -p /app/data/mysql/binlog/</span><br><span class="line">mkdir -p /app/data/mysql/relaylog/</span><br><span class="line">chown -R mysql:mysql /app/data/mysql/</span><br><span class="line"> <span class="comment">#安装mysql</span></span><br><span class="line">/app/<span class="built_in">local</span>/mysql/scripts/mysql_install_db --basedir=/app/<span class="built_in">local</span>/mysql --datadir=/app/data/mysql/data --user=mysql</span><br><span class="line"><span class="comment">#修改mysqld_safe配置路径</span></span><br><span class="line">sed -i <span class="string">"s#/usr/local/mysql#/app/local/mysql#g"</span> /app/<span class="built_in">local</span>/mysql/bin/mysqld_safe</span><br></pre></td></tr></table></figure>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">#修改my.cnf配置文件</span></span><br><span class="line">vi /app/<span class="built_in">local</span>/mysql/my.cnf</span><br><span class="line"></span><br><span class="line"><span class="comment">#MySQL客户端</span></span><br><span class="line">[client]</span><br><span class="line">character-set-server = utf8</span><br><span class="line">port = <span class="number">3306</span></span><br><span class="line">socket = /tmp/mysql.sock</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">[mysql]</span><br><span class="line"><span class="comment">#prompt="(\u:HOSTNAME:)[\d]&gt; "</span></span><br><span class="line"><span class="comment">#mysql提示符中显示当前用户、数据库、时间等信息</span></span><br><span class="line">prompt=<span class="string">"\u@\h \R:\m:\s [\d]&gt; "</span></span><br><span class="line"><span class="comment">#取消自动补全</span></span><br><span class="line">no-auto-rehash</span><br><span class="line"></span><br><span class="line"><span class="comment">#MySQL服务端 </span></span><br><span class="line">[mysqld]</span><br><span class="line"><span class="comment">#唯一的服务标识号，主从同步会涉及</span></span><br><span class="line">server-id = <span class="number">1</span></span><br><span class="line">port = <span class="number">3306</span></span><br><span class="line">user = mysql</span><br><span class="line">basedir = /app/<span class="built_in">local</span>/mysql</span><br><span class="line">datadir = /app/data/mysql/data</span><br><span class="line">socket = /tmp/mysql.sock</span><br><span class="line"><span class="built_in">log</span>-error = /app/data/mysql/mysql_error.log</span><br><span class="line">pid-file = /app/data/mysql/mysql.pid</span><br><span class="line">sql_mode=NO_ENGINE_SUBSTITUTION,STRICT_TRANS_TABLES</span><br><span class="line"></span><br><span class="line"><span class="comment">#默认存储引擎</span></span><br><span class="line">default-storage-engine = InnoDB</span><br><span class="line"><span class="comment">#设置最大并发连接数，如果前端程序是PHP，可适当加大，但不可过大。如果前端程序采用连接池，可适当调小，避免连接数过大</span></span><br><span class="line">max_connections = <span class="number">512</span></span><br><span class="line"><span class="comment">#最大连接错误次数，可适当加大，防止频繁连接错误后，前端host被mysql拒绝掉</span></span><br><span class="line">max_connect_errors = <span class="number">100000</span></span><br><span class="line"><span class="comment">#所有线程所打开表的数量</span></span><br><span class="line">table_open_cache = <span class="number">512</span></span><br><span class="line"><span class="comment">#不允许外部文件级别的锁. 打开文件锁会对性能造成负面影响</span></span><br><span class="line">external-locking = FALSE</span><br><span class="line"><span class="comment">#服务所能处理的请求包的最大大小以及服务所能处理的最大的请求大小</span></span><br><span class="line">max_allowed_packet = <span class="number">32</span>M</span><br><span class="line"><span class="comment">#启用慢查询日志</span></span><br><span class="line">slow_query_<span class="built_in">log</span> = <span class="number">1</span></span><br><span class="line">slow_query_<span class="built_in">log</span>_file = /app/data/mysql/slow.log</span><br><span class="line"><span class="comment">#MySQL打开的文件描述符限制</span></span><br><span class="line">open_files_<span class="built_in">limit</span> = <span class="number">10240</span></span><br><span class="line"><span class="comment">#操作系统在监听队列中所能保持的连接数</span></span><br><span class="line">back_<span class="built_in">log</span> = <span class="number">600</span></span><br><span class="line"><span class="comment">#每个连接都会分配的一些排序、连接等缓冲</span></span><br><span class="line">sort_buffer_size = <span class="number">16</span>M</span><br><span class="line">join_buffer_size = <span class="number">16</span>M</span><br><span class="line"><span class="built_in">read</span>_buffer_size = <span class="number">16</span>M</span><br><span class="line"><span class="built_in">read</span>_rnd_buffer_size = <span class="number">16</span>M</span><br><span class="line"><span class="comment">#在cache中保留多少线程用于重用</span></span><br><span class="line">thread_cache_size = <span class="number">300</span></span><br><span class="line"><span class="comment">#查询缓冲     </span></span><br><span class="line">query_cache_size = <span class="number">128</span>M</span><br><span class="line"><span class="comment">#只有小于此设定值的结果才会被缓冲     </span></span><br><span class="line">query_cache_<span class="built_in">limit</span> = <span class="number">4</span>M</span><br><span class="line"><span class="comment">#设置查询缓存分配内存的最小单位</span></span><br><span class="line">query_cache_min_res_unit = <span class="number">2</span>k</span><br><span class="line"><span class="comment">#线程使用的堆大小</span></span><br><span class="line">thread_stack = <span class="number">512</span>K</span><br><span class="line"><span class="comment">#设置事务隔离级别为 READ-COMMITED，提高事务效率，通常都满足事务一致性要求</span></span><br><span class="line">transaction_isolation = READ-COMMITTED</span><br><span class="line"><span class="comment">#临时表的最大大小</span></span><br><span class="line">tmp_table_size = <span class="number">256</span>M</span><br><span class="line"><span class="comment">#独立的内存表所允许的最大容量</span></span><br><span class="line">max_heap_table_size = <span class="number">256</span>M</span><br><span class="line"><span class="comment">#设置慢查询阀值</span></span><br><span class="line">long_query_time = <span class="number">3</span></span><br><span class="line"><span class="comment">#表示slave将复制事件写进自己的二进制日志</span></span><br><span class="line"><span class="built_in">log</span>-slave-updates</span><br><span class="line"><span class="comment">#打开二进制日志功能</span></span><br><span class="line"><span class="built_in">log</span>-bin = /app/data/mysql/binlog/binlog</span><br><span class="line">sync_binlog = <span class="number">1</span></span><br><span class="line"><span class="comment">#在一个事务中binlog为了记录SQL状态所持有的cache大小  </span></span><br><span class="line">binlog_cache_size = <span class="number">4</span>M</span><br><span class="line"><span class="comment">#设置混合模式</span></span><br><span class="line">binlog_format = MIXED</span><br><span class="line"><span class="comment">#表示的是binlog能够使用的最大cache 内存大小</span></span><br><span class="line">max_binlog_cache_size = <span class="number">8</span>M</span><br><span class="line"><span class="comment">#binlog最大值</span></span><br><span class="line">max_binlog_size = <span class="number">1</span>G</span><br><span class="line"><span class="comment">#启用中继日志</span></span><br><span class="line">relay-log-index = /app/data/mysql/relaylog/relaylog</span><br><span class="line">relay-log-info-file = /app/data/mysql/relaylog/relaylog</span><br><span class="line">relay-log = /app/data/mysql/relaylog/relaylog</span><br><span class="line"><span class="comment">#设置了只保留7天binlog</span></span><br><span class="line">expire_logs_days = <span class="number">7</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#MyISAM 相关选项</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#关键词缓冲的大小, 一般用来缓冲MyISAM表的索引块</span></span><br><span class="line">key_buffer_size = <span class="number">128</span>M</span><br><span class="line"><span class="comment">#排序缓存</span></span><br><span class="line"><span class="built_in">read</span>_rnd_buffer_size = <span class="number">64</span>M</span><br><span class="line"><span class="comment">#限制每个进程中缓冲树的字节数</span></span><br><span class="line">bulk_insert_buffer_size = <span class="number">256</span>M</span><br><span class="line"><span class="comment">#MyISAM表发生变化时重新排序所需的缓冲</span></span><br><span class="line">myisam_sort_buffer_size = <span class="number">256</span>M</span><br><span class="line"><span class="comment">#MySQL重建索引时所允许的最大临时文件的大小</span></span><br><span class="line">myisam_max_sort_file_size = <span class="number">10</span>G</span><br><span class="line"><span class="comment">#如果一个表拥有超过一个索引, MyISAM 可以通过并行排序使用超过一个线程去修复他们</span></span><br><span class="line">myisam_repair_threads = <span class="number">1</span></span><br><span class="line"><span class="comment">#自动检查和修复没有适当关闭的 MyISAM 表</span></span><br><span class="line">myisam_recover</span><br><span class="line"></span><br><span class="line"><span class="comment">#InnoDB 相关选项</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#InnoDB存储数据字典、内部数据结构的缓冲池，16MB 已经足够大了     </span></span><br><span class="line">innodb_additional_mem_pool_size = <span class="number">16</span>M</span><br><span class="line"><span class="comment">#InnoDB用于缓存数据、索引、锁、插入缓冲、数据字典等</span></span><br><span class="line"><span class="comment">#如果是专用的DB服务器，且以InnoDB引擎为主的场景，通常可设置物理内存的50%</span></span><br><span class="line"><span class="comment">#如果是非专用DB服务器，可以先尝试设置成内存的1/4，如果有问题再调整</span></span><br><span class="line">innodb_buffer_pool_size = <span class="number">4</span>G</span><br><span class="line"><span class="comment">#InnoDB共享表空间初始化大小，默认是 10MB，也非常坑X，改成 1GB，并且自动扩展</span></span><br><span class="line">innodb_data_file_path = ibdata1:<span class="number">1</span>G:autoextend</span><br><span class="line"><span class="comment">#如果将此参数设置为1，将在每次提交事务后将日志写入磁盘，能较好保护数据可靠性。为提供性能可以设置为0或2，但要承担在发生故障时丢失数据的风险</span></span><br><span class="line">innodb_flush_<span class="built_in">log</span>_at_trx_commit = <span class="number">1</span></span><br><span class="line"><span class="comment">#InnoDB的log buffer，通常设置为 64MB 就足够了</span></span><br><span class="line">innodb_<span class="built_in">log</span>_buffer_size = <span class="number">64</span>M</span><br><span class="line"><span class="comment">#InnoDB redo log大小，通常设置256MB 就足够了</span></span><br><span class="line">innodb_<span class="built_in">log</span>_file_size = <span class="number">256</span>M</span><br><span class="line"><span class="comment">#InnoDB redo log文件组，通常设置为 2 就足够了</span></span><br><span class="line">innodb_<span class="built_in">log</span>_files_<span class="keyword">in</span>_group = <span class="number">2</span></span><br><span class="line"><span class="comment">#Buffer_Pool中Dirty_Page所占的数量，直接影响InnoDB的关闭时间</span></span><br><span class="line">innodb_max_dirty_pages_pct = <span class="number">90</span></span><br><span class="line"><span class="comment">#启用InnoDB的独立表空间模式，便于管理</span></span><br><span class="line">innodb_file_per_table = <span class="number">1</span></span><br><span class="line"><span class="comment">#控制innodb是否对gap加锁</span></span><br><span class="line">innodb_locks_unsafe_<span class="keyword">for</span>_binlog = <span class="number">0</span></span><br><span class="line"><span class="comment">#设置连接超时阀值，如果前端程序采用短连接，建议缩短这2个值</span></span><br><span class="line"><span class="comment">#如果前端程序采用长连接，可直接注释掉这两个选项，是用默认配置(8小时)</span></span><br><span class="line">interactive_timeout = <span class="number">120</span></span><br><span class="line"><span class="built_in">wait</span>_timeout = <span class="number">120</span></span><br><span class="line"><span class="comment">#不再进行反解析(ip不反解成域名)，这样可以加快数据库的反应时间</span></span><br><span class="line">skip-name-resolve</span><br><span class="line"><span class="comment">#主从复制跳过错误</span></span><br><span class="line">slave-skip-errors = <span class="number">1032</span>,<span class="number">1062</span>,<span class="number">126</span>,<span class="number">1114</span>,<span class="number">1146</span>,<span class="number">1048</span>,<span class="number">1396</span></span><br><span class="line"></span><br><span class="line">[mysqldump]</span><br><span class="line"><span class="comment">#不要在将内存中的整个结果写入磁盘之前缓存. 在导出非常巨大的表时需要此项</span></span><br><span class="line">quick</span><br><span class="line">max_allowed_packet = <span class="number">32</span>M</span><br></pre></td></tr></table></figure>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">#添加mysql到服务</span></span><br><span class="line">vi /etc/rc.d/init.d/mysqld</span><br><span class="line"></span><br><span class="line"><span class="shebang">#!/bin/sh</span></span><br><span class="line">basedir=/app/<span class="built_in">local</span>/mysql</span><br><span class="line">datadir=/app/data/mysql/data</span><br><span class="line">service_startup_timeout=<span class="number">900</span></span><br><span class="line">lockdir=<span class="string">'/var/lock/subsys'</span></span><br><span class="line">lock_file_path=<span class="string">"<span class="variable">$lockdir</span>/mysql"</span></span><br><span class="line">mysqld_pid_file_path=/app/data/mysql/mysql.pid</span><br><span class="line"><span class="keyword">if</span> <span class="built_in">test</span> -z <span class="string">"<span class="variable">$basedir</span>"</span></span><br><span class="line"><span class="keyword">then</span></span><br><span class="line">  basedir=/usr/<span class="built_in">local</span>/mysql</span><br><span class="line">  bindir=/usr/<span class="built_in">local</span>/mysql/bin</span><br><span class="line">  <span class="keyword">if</span> <span class="built_in">test</span> -z <span class="string">"<span class="variable">$datadir</span>"</span></span><br><span class="line">  <span class="keyword">then</span></span><br><span class="line">    datadir=/usr/<span class="built_in">local</span>/mysql/data</span><br><span class="line">  <span class="keyword">fi</span></span><br><span class="line">  sbindir=/usr/<span class="built_in">local</span>/mysql/bin</span><br><span class="line">  libexecdir=/usr/<span class="built_in">local</span>/mysql/bin</span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">  bindir=<span class="string">"<span class="variable">$basedir</span>/bin"</span></span><br><span class="line">  <span class="keyword">if</span> <span class="built_in">test</span> -z <span class="string">"<span class="variable">$datadir</span>"</span></span><br><span class="line">  <span class="keyword">then</span></span><br><span class="line">    datadir=<span class="string">"<span class="variable">$basedir</span>/data"</span></span><br><span class="line">  <span class="keyword">fi</span></span><br><span class="line">  sbindir=<span class="string">"<span class="variable">$basedir</span>/sbin"</span></span><br><span class="line">  libexecdir=<span class="string">"<span class="variable">$basedir</span>/libexec"</span></span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line">datadir_<span class="built_in">set</span>=</span><br><span class="line">lsb_<span class="built_in">functions</span>=<span class="string">"/lib/lsb/init-functions"</span></span><br><span class="line"><span class="keyword">if</span> <span class="built_in">test</span> <span class="operator">-f</span> <span class="variable">$lsb_functions</span> ; <span class="keyword">then</span></span><br><span class="line">  . <span class="variable">$lsb_functions</span></span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">  <span class="function"><span class="title">log_success_msg</span></span>()</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="built_in">echo</span> <span class="string">" SUCCESS! <span class="variable">$@</span>"</span></span><br><span class="line">  &#125;</span><br><span class="line">  <span class="function"><span class="title">log_failure_msg</span></span>()</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="built_in">echo</span> <span class="string">" ERROR! <span class="variable">$@</span>"</span></span><br><span class="line">  &#125;</span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line"> </span><br><span class="line">PATH=<span class="string">"/sbin:/usr/sbin:/bin:/usr/bin:<span class="variable">$basedir</span>/bin"</span></span><br><span class="line"><span class="built_in">export</span> PATH</span><br><span class="line"> </span><br><span class="line">mode=<span class="variable">$1</span>    <span class="comment"># start or stop</span></span><br><span class="line"> </span><br><span class="line">[ <span class="variable">$#</span> -ge <span class="number">1</span> ] &amp;&amp; <span class="built_in">shift</span></span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line">other_args=<span class="string">"$*"</span>   <span class="comment"># uncommon, but needed when called from an RPM upgrade action</span></span><br><span class="line">           <span class="comment"># Expected: "--skip-networking --skip-grant-tables"</span></span><br><span class="line">           <span class="comment"># They are not checked here, intentionally, as it is the resposibility</span></span><br><span class="line">           <span class="comment"># of the "spec" file author to give correct arguments only.</span></span><br><span class="line"> </span><br><span class="line"><span class="keyword">case</span> `<span class="built_in">echo</span> <span class="string">"testing\c"</span>`,`<span class="built_in">echo</span> -n testing` <span class="keyword">in</span></span><br><span class="line">    *c*,-n*) <span class="built_in">echo</span>_n=   <span class="built_in">echo</span>_c=     ;;</span><br><span class="line">    *c*,*)   <span class="built_in">echo</span>_n=-n <span class="built_in">echo</span>_c=     ;;</span><br><span class="line">    *)       <span class="built_in">echo</span>_n=   <span class="built_in">echo</span>_c=<span class="string">'\c'</span> ;;</span><br><span class="line"><span class="keyword">esac</span></span><br><span class="line"> </span><br><span class="line"><span class="function"><span class="title">parse_server_arguments</span></span>() &#123;</span><br><span class="line">  <span class="keyword">for</span> arg <span class="keyword">do</span></span><br><span class="line">    <span class="keyword">case</span> <span class="string">"<span class="variable">$arg</span>"</span> <span class="keyword">in</span></span><br><span class="line">      --basedir=*)  basedir=`<span class="built_in">echo</span> <span class="string">"<span class="variable">$arg</span>"</span> | sed <span class="operator">-e</span> <span class="string">'s/^[^=]*=//'</span>`</span><br><span class="line">                    bindir=<span class="string">"<span class="variable">$basedir</span>/bin"</span></span><br><span class="line">            <span class="keyword">if</span> <span class="built_in">test</span> -z <span class="string">"<span class="variable">$datadir_set</span>"</span>; <span class="keyword">then</span></span><br><span class="line">              datadir=<span class="string">"<span class="variable">$basedir</span>/data"</span></span><br><span class="line">            <span class="keyword">fi</span></span><br><span class="line">            sbindir=<span class="string">"<span class="variable">$basedir</span>/sbin"</span></span><br><span class="line">            libexecdir=<span class="string">"<span class="variable">$basedir</span>/libexec"</span></span><br><span class="line">        ;;</span><br><span class="line">      --datadir=*)  datadir=`<span class="built_in">echo</span> <span class="string">"<span class="variable">$arg</span>"</span> | sed <span class="operator">-e</span> <span class="string">'s/^[^=]*=//'</span>`</span><br><span class="line">            datadir_<span class="built_in">set</span>=<span class="number">1</span></span><br><span class="line">    ;;</span><br><span class="line">      --pid-file=*) mysqld_pid_file_path=`<span class="built_in">echo</span> <span class="string">"<span class="variable">$arg</span>"</span> | sed <span class="operator">-e</span> <span class="string">'s/^[^=]*=//'</span>` ;;</span><br><span class="line">      --service-startup-timeout=*) service_startup_timeout=`<span class="built_in">echo</span> <span class="string">"<span class="variable">$arg</span>"</span> | sed <span class="operator">-e</span> <span class="string">'s/^[^=]*=//'</span>` ;;</span><br><span class="line">    <span class="keyword">esac</span></span><br><span class="line">  <span class="keyword">done</span></span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="function"><span class="title">wait_for_pid</span></span> () &#123;</span><br><span class="line">  verb=<span class="string">"<span class="variable">$1</span>"</span>           <span class="comment"># created | removed</span></span><br><span class="line">  pid=<span class="string">"<span class="variable">$2</span>"</span>            <span class="comment"># process ID of the program operating on the pid-file</span></span><br><span class="line">  pid_file_path=<span class="string">"<span class="variable">$3</span>"</span> <span class="comment"># path to the PID file.</span></span><br><span class="line"> </span><br><span class="line">  i=<span class="number">0</span></span><br><span class="line">  avoid_race_condition=<span class="string">"by checking again"</span></span><br><span class="line"> </span><br><span class="line">  <span class="keyword">while</span> <span class="built_in">test</span> <span class="variable">$i</span> <span class="operator">-ne</span> <span class="variable">$service_startup_timeout</span> ; <span class="keyword">do</span></span><br><span class="line"> </span><br><span class="line">    <span class="keyword">case</span> <span class="string">"<span class="variable">$verb</span>"</span> <span class="keyword">in</span></span><br><span class="line">      <span class="string">'created'</span>)</span><br><span class="line">        <span class="comment"># wait for a PID-file to pop into existence.</span></span><br><span class="line">        <span class="built_in">test</span> <span class="operator">-s</span> <span class="string">"<span class="variable">$pid_file_path</span>"</span> &amp;&amp; i=<span class="string">''</span> &amp;&amp; <span class="built_in">break</span></span><br><span class="line">        ;;</span><br><span class="line">      <span class="string">'removed'</span>)</span><br><span class="line">        <span class="comment"># wait for this PID-file to disappear</span></span><br><span class="line">        <span class="built_in">test</span> ! <span class="operator">-s</span> <span class="string">"<span class="variable">$pid_file_path</span>"</span> &amp;&amp; i=<span class="string">''</span> &amp;&amp; <span class="built_in">break</span></span><br><span class="line">        ;;</span><br><span class="line">      *)</span><br><span class="line">        <span class="built_in">echo</span> <span class="string">"wait_for_pid () usage: wait_for_pid created|removed pid pid_file_path"</span></span><br><span class="line">        <span class="built_in">exit</span> <span class="number">1</span></span><br><span class="line">        ;;</span><br><span class="line">    <span class="keyword">esac</span></span><br><span class="line"> </span><br><span class="line">    <span class="comment"># if server isn't running, then pid-file will never be updated</span></span><br><span class="line">    <span class="keyword">if</span> <span class="built_in">test</span> -n <span class="string">"<span class="variable">$pid</span>"</span>; <span class="keyword">then</span></span><br><span class="line">      <span class="keyword">if</span> <span class="built_in">kill</span> -<span class="number">0</span> <span class="string">"<span class="variable">$pid</span>"</span> <span class="number">2</span>&gt;/dev/null; <span class="keyword">then</span></span><br><span class="line">        :  <span class="comment"># the server still runs</span></span><br><span class="line">      <span class="keyword">else</span></span><br><span class="line">        <span class="comment"># The server may have exited between the last pid-file check and now.  </span></span><br><span class="line">        <span class="keyword">if</span> <span class="built_in">test</span> -n <span class="string">"<span class="variable">$avoid_race_condition</span>"</span>; <span class="keyword">then</span></span><br><span class="line">          avoid_race_condition=<span class="string">""</span></span><br><span class="line">          <span class="built_in">continue</span>  <span class="comment"># Check again.</span></span><br><span class="line">        <span class="keyword">fi</span></span><br><span class="line"> </span><br><span class="line">        <span class="comment"># there's nothing that will affect the file.</span></span><br><span class="line">        <span class="built_in">log</span>_failure_msg <span class="string">"The server quit without updating PID file (<span class="variable">$pid_file_path</span>)."</span></span><br><span class="line">        <span class="built_in">return</span> <span class="number">1</span>  <span class="comment"># not waiting any more.</span></span><br><span class="line">      <span class="keyword">fi</span></span><br><span class="line">    <span class="keyword">fi</span></span><br><span class="line"> </span><br><span class="line">    <span class="built_in">echo</span> <span class="variable">$echo_n</span> <span class="string">".<span class="variable">$echo_c</span>"</span></span><br><span class="line">    i=`expr <span class="variable">$i</span> + <span class="number">1</span>`</span><br><span class="line">    sleep <span class="number">1</span></span><br><span class="line"> </span><br><span class="line">  <span class="keyword">done</span></span><br><span class="line"> </span><br><span class="line">  <span class="keyword">if</span> <span class="built_in">test</span> -z <span class="string">"<span class="variable">$i</span>"</span> ; <span class="keyword">then</span></span><br><span class="line">    <span class="built_in">log</span>_success_msg</span><br><span class="line">    <span class="built_in">return</span> <span class="number">0</span></span><br><span class="line">  <span class="keyword">else</span></span><br><span class="line">    <span class="built_in">log</span>_failure_msg</span><br><span class="line">    <span class="built_in">return</span> <span class="number">1</span></span><br><span class="line">  <span class="keyword">fi</span></span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="comment"># Get arguments from the my.cnf file,</span></span><br><span class="line"><span class="comment"># the only group, which is read from now on is [mysqld]</span></span><br><span class="line"><span class="keyword">if</span> <span class="built_in">test</span> -x ./bin/my_<span class="built_in">print</span>_defaults</span><br><span class="line"><span class="keyword">then</span></span><br><span class="line">  <span class="built_in">print</span>_defaults=<span class="string">"./bin/my_print_defaults"</span></span><br><span class="line"><span class="keyword">elif</span> <span class="built_in">test</span> -x <span class="variable">$bindir</span>/my_<span class="built_in">print</span>_defaults</span><br><span class="line"><span class="keyword">then</span></span><br><span class="line">  <span class="built_in">print</span>_defaults=<span class="string">"<span class="variable">$bindir</span>/my_print_defaults"</span></span><br><span class="line"><span class="keyword">elif</span> <span class="built_in">test</span> -x <span class="variable">$bindir</span>/mysql_<span class="built_in">print</span>_defaults</span><br><span class="line"><span class="keyword">then</span></span><br><span class="line">  <span class="built_in">print</span>_defaults=<span class="string">"<span class="variable">$bindir</span>/mysql_print_defaults"</span></span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">  <span class="comment"># Try to find basedir in /etc/my.cnf</span></span><br><span class="line">  conf=/etc/my.cnf</span><br><span class="line">  <span class="built_in">print</span>_defaults=</span><br><span class="line">  <span class="keyword">if</span> <span class="built_in">test</span> -r <span class="variable">$conf</span></span><br><span class="line">  <span class="keyword">then</span></span><br><span class="line">    subpat=<span class="string">'^[^=]*basedir[^=]*=\(.*\)$'</span></span><br><span class="line">    <span class="built_in">dirs</span>=`sed <span class="operator">-e</span> <span class="string">"/<span class="variable">$subpat</span>/!d"</span> <span class="operator">-e</span> <span class="string">'s//\1/'</span> <span class="variable">$conf</span>`</span><br><span class="line">    <span class="keyword">for</span> d <span class="keyword">in</span> <span class="variable">$dirs</span></span><br><span class="line">    <span class="keyword">do</span></span><br><span class="line">      d=`<span class="built_in">echo</span> <span class="variable">$d</span> | sed <span class="operator">-e</span> <span class="string">'s/[     ]//g'</span>`</span><br><span class="line">      <span class="keyword">if</span> <span class="built_in">test</span> -x <span class="string">"<span class="variable">$d</span>/bin/my_print_defaults"</span></span><br><span class="line">      <span class="keyword">then</span></span><br><span class="line">        <span class="built_in">print</span>_defaults=<span class="string">"<span class="variable">$d</span>/bin/my_print_defaults"</span></span><br><span class="line">        <span class="built_in">break</span></span><br><span class="line">      <span class="keyword">fi</span></span><br><span class="line">      <span class="keyword">if</span> <span class="built_in">test</span> -x <span class="string">"<span class="variable">$d</span>/bin/mysql_print_defaults"</span></span><br><span class="line">      <span class="keyword">then</span></span><br><span class="line">        <span class="built_in">print</span>_defaults=<span class="string">"<span class="variable">$d</span>/bin/mysql_print_defaults"</span></span><br><span class="line">        <span class="built_in">break</span></span><br><span class="line">      <span class="keyword">fi</span></span><br><span class="line">    <span class="keyword">done</span></span><br><span class="line">  <span class="keyword">fi</span></span><br><span class="line"> </span><br><span class="line">  <span class="comment"># Hope it's in the PATH ... but I doubt it</span></span><br><span class="line">  <span class="built_in">test</span> -z <span class="string">"<span class="variable">$print_defaults</span>"</span> &amp;&amp; <span class="built_in">print</span>_defaults=<span class="string">"my_print_defaults"</span></span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line"> </span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># Read defaults file from 'basedir'.   If there is no defaults file there</span></span><br><span class="line"><span class="comment"># check if it's in the old (depricated) place (datadir) and read it from there</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"> </span><br><span class="line">extra_args=<span class="string">""</span></span><br><span class="line"><span class="keyword">if</span> <span class="built_in">test</span> -r <span class="string">"<span class="variable">$basedir</span>/my.cnf"</span></span><br><span class="line"><span class="keyword">then</span></span><br><span class="line">  extra_args=<span class="string">"-e <span class="variable">$basedir</span>/my.cnf"</span></span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">  <span class="keyword">if</span> <span class="built_in">test</span> -r <span class="string">"<span class="variable">$datadir</span>/my.cnf"</span></span><br><span class="line">  <span class="keyword">then</span></span><br><span class="line">    extra_args=<span class="string">"-e <span class="variable">$datadir</span>/my.cnf"</span></span><br><span class="line">  <span class="keyword">fi</span></span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line"> </span><br><span class="line">parse_server_arguments `<span class="variable">$print_defaults</span> <span class="variable">$extra_args</span> mysqld server mysql_server mysql.server`</span><br><span class="line"> </span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># Set pid file if not given</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="keyword">if</span> <span class="built_in">test</span> -z <span class="string">"<span class="variable">$mysqld_pid_file_path</span>"</span></span><br><span class="line"><span class="keyword">then</span></span><br><span class="line">  mysqld_pid_file_path=<span class="variable">$datadir</span>/`hostname`.pid</span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">  <span class="keyword">case</span> <span class="string">"<span class="variable">$mysqld_pid_file_path</span>"</span> <span class="keyword">in</span></span><br><span class="line">    /* ) ;;</span><br><span class="line">    * )  mysqld_pid_file_path=<span class="string">"<span class="variable">$datadir</span>/<span class="variable">$mysqld_pid_file_path</span>"</span> ;;</span><br><span class="line">  <span class="keyword">esac</span></span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line"> </span><br><span class="line"><span class="keyword">case</span> <span class="string">"<span class="variable">$mode</span>"</span> <span class="keyword">in</span></span><br><span class="line">  <span class="string">'start'</span>)</span><br><span class="line">    <span class="comment"># Start daemon</span></span><br><span class="line"> </span><br><span class="line">    <span class="comment"># Safeguard (relative paths, core dumps..)</span></span><br><span class="line">    <span class="built_in">cd</span> <span class="variable">$basedir</span></span><br><span class="line"> </span><br><span class="line">    <span class="built_in">echo</span> <span class="variable">$echo_n</span> <span class="string">"Starting MySQL"</span></span><br><span class="line">    <span class="keyword">if</span> <span class="built_in">test</span> -x <span class="variable">$bindir</span>/mysqld_safe</span><br><span class="line">    <span class="keyword">then</span></span><br><span class="line">      <span class="comment"># Give extra arguments to mysqld with the my.cnf file. This script</span></span><br><span class="line">      <span class="comment"># may be overwritten at next upgrade.</span></span><br><span class="line">      <span class="variable">$bindir</span>/mysqld_safe --datadir=<span class="string">"<span class="variable">$datadir</span>"</span> --pid-file=<span class="string">"<span class="variable">$mysqld_pid_file_path</span>"</span> <span class="variable">$other_args</span> &gt;/dev/null <span class="number">2</span>&gt;&amp;<span class="number">1</span> &amp;</span><br><span class="line">      <span class="built_in">wait</span>_<span class="keyword">for</span>_pid created <span class="string">"$!"</span> <span class="string">"<span class="variable">$mysqld_pid_file_path</span>"</span>; <span class="built_in">return</span>_value=$?</span><br><span class="line"> </span><br><span class="line">      <span class="comment"># Make lock for RedHat / SuSE</span></span><br><span class="line">      <span class="keyword">if</span> <span class="built_in">test</span> -w <span class="string">"<span class="variable">$lockdir</span>"</span></span><br><span class="line">      <span class="keyword">then</span></span><br><span class="line">        touch <span class="string">"<span class="variable">$lock_file_path</span>"</span></span><br><span class="line">      <span class="keyword">fi</span></span><br><span class="line"> </span><br><span class="line">      <span class="built_in">exit</span> <span class="variable">$return_value</span></span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">      <span class="built_in">log</span>_failure_msg <span class="string">"Couldn't find MySQL server (<span class="variable">$bindir</span>/mysqld_safe)"</span></span><br><span class="line">    <span class="keyword">fi</span></span><br><span class="line">    ;;</span><br><span class="line"> </span><br><span class="line">  <span class="string">'stop'</span>)</span><br><span class="line">    <span class="comment"># Stop daemon. We use a signal here to avoid having to know the</span></span><br><span class="line">    <span class="comment"># root password.</span></span><br><span class="line"> </span><br><span class="line">    <span class="keyword">if</span> <span class="built_in">test</span> <span class="operator">-s</span> <span class="string">"<span class="variable">$mysqld_pid_file_path</span>"</span></span><br><span class="line">    <span class="keyword">then</span></span><br><span class="line">      mysqld_pid=`cat <span class="string">"<span class="variable">$mysqld_pid_file_path</span>"</span>`</span><br><span class="line"> </span><br><span class="line">      <span class="keyword">if</span> (<span class="built_in">kill</span> -<span class="number">0</span> <span class="variable">$mysqld_pid</span> <span class="number">2</span>&gt;/dev/null)</span><br><span class="line">      <span class="keyword">then</span></span><br><span class="line">        <span class="built_in">echo</span> <span class="variable">$echo_n</span> <span class="string">"Shutting down MySQL"</span></span><br><span class="line">        <span class="built_in">kill</span> <span class="variable">$mysqld_pid</span></span><br><span class="line">        <span class="comment"># mysqld should remove the pid file when it exits, so wait for it.</span></span><br><span class="line">        <span class="built_in">wait</span>_<span class="keyword">for</span>_pid removed <span class="string">"<span class="variable">$mysqld_pid</span>"</span> <span class="string">"<span class="variable">$mysqld_pid_file_path</span>"</span>; <span class="built_in">return</span>_value=$?</span><br><span class="line">      <span class="keyword">else</span></span><br><span class="line">        <span class="built_in">log</span>_failure_msg <span class="string">"MySQL server process #<span class="variable">$mysqld_pid</span> is not running!"</span></span><br><span class="line">        rm <span class="string">"<span class="variable">$mysqld_pid_file_path</span>"</span></span><br><span class="line">      <span class="keyword">fi</span></span><br><span class="line"> </span><br><span class="line">      <span class="comment"># Delete lock for RedHat / SuSE</span></span><br><span class="line">      <span class="keyword">if</span> <span class="built_in">test</span> <span class="operator">-f</span> <span class="string">"<span class="variable">$lock_file_path</span>"</span></span><br><span class="line">      <span class="keyword">then</span></span><br><span class="line">        rm <span class="operator">-f</span> <span class="string">"<span class="variable">$lock_file_path</span>"</span></span><br><span class="line">      <span class="keyword">fi</span></span><br><span class="line">      <span class="built_in">exit</span> <span class="variable">$return_value</span></span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">      <span class="built_in">log</span>_failure_msg <span class="string">"MySQL server PID file could not be found!"</span></span><br><span class="line">    <span class="keyword">fi</span></span><br><span class="line">    ;;</span><br><span class="line"> </span><br><span class="line">  <span class="string">'restart'</span>)</span><br><span class="line">    <span class="comment"># Stop the service and regardless of whether it was</span></span><br><span class="line">    <span class="comment"># running or not, start it again.</span></span><br><span class="line">    <span class="keyword">if</span> <span class="variable">$0</span> stop  <span class="variable">$other_args</span>; <span class="keyword">then</span></span><br><span class="line">      <span class="variable">$0</span> start <span class="variable">$other_args</span></span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">      <span class="built_in">log</span>_failure_msg <span class="string">"Failed to stop running server, so refusing to try to start."</span></span><br><span class="line">      <span class="built_in">exit</span> <span class="number">1</span></span><br><span class="line">    <span class="keyword">fi</span></span><br><span class="line">    ;;</span><br><span class="line"> </span><br><span class="line">  <span class="string">'reload'</span>|<span class="string">'force-reload'</span>)</span><br><span class="line">    <span class="keyword">if</span> <span class="built_in">test</span> <span class="operator">-s</span> <span class="string">"<span class="variable">$mysqld_pid_file_path</span>"</span> ; <span class="keyword">then</span></span><br><span class="line">      <span class="built_in">read</span> mysqld_pid &lt;  <span class="string">"<span class="variable">$mysqld_pid_file_path</span>"</span></span><br><span class="line">      <span class="built_in">kill</span> -HUP <span class="variable">$mysqld_pid</span> &amp;&amp; <span class="built_in">log</span>_success_msg <span class="string">"Reloading service MySQL"</span></span><br><span class="line">      touch <span class="string">"<span class="variable">$mysqld_pid_file_path</span>"</span></span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">      <span class="built_in">log</span>_failure_msg <span class="string">"MySQL PID file could not be found!"</span></span><br><span class="line">      <span class="built_in">exit</span> <span class="number">1</span></span><br><span class="line">    <span class="keyword">fi</span></span><br><span class="line">    ;;</span><br><span class="line">  <span class="string">'status'</span>)</span><br><span class="line">    <span class="comment"># First, check to see if pid file exists</span></span><br><span class="line">    <span class="keyword">if</span> <span class="built_in">test</span> <span class="operator">-s</span> <span class="string">"<span class="variable">$mysqld_pid_file_path</span>"</span> ; <span class="keyword">then</span> </span><br><span class="line">      <span class="built_in">read</span> mysqld_pid &lt; <span class="string">"<span class="variable">$mysqld_pid_file_path</span>"</span></span><br><span class="line">      <span class="keyword">if</span> <span class="built_in">kill</span> -<span class="number">0</span> <span class="variable">$mysqld_pid</span> <span class="number">2</span>&gt;/dev/null ; <span class="keyword">then</span> </span><br><span class="line">        <span class="built_in">log</span>_success_msg <span class="string">"MySQL running (<span class="variable">$mysqld_pid</span>)"</span></span><br><span class="line">        <span class="built_in">exit</span> <span class="number">0</span></span><br><span class="line">      <span class="keyword">else</span></span><br><span class="line">        <span class="built_in">log</span>_failure_msg <span class="string">"MySQL is not running, but PID file exists"</span></span><br><span class="line">        <span class="built_in">exit</span> <span class="number">1</span></span><br><span class="line">      <span class="keyword">fi</span></span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">      <span class="comment"># Try to find appropriate mysqld process</span></span><br><span class="line">      mysqld_pid=`pidof <span class="variable">$libexecdir</span>/mysqld`</span><br><span class="line"> </span><br><span class="line">      <span class="comment"># test if multiple pids exist</span></span><br><span class="line">      pid_count=`<span class="built_in">echo</span> <span class="variable">$mysqld_pid</span> | wc -w`</span><br><span class="line">      <span class="keyword">if</span> <span class="built_in">test</span> <span class="variable">$pid_count</span> <span class="operator">-gt</span> <span class="number">1</span> ; <span class="keyword">then</span></span><br><span class="line">        <span class="built_in">log</span>_failure_msg <span class="string">"Multiple MySQL running but PID file could not be found (<span class="variable">$mysqld_pid</span>)"</span></span><br><span class="line">        <span class="built_in">exit</span> <span class="number">5</span></span><br><span class="line">      <span class="keyword">elif</span> <span class="built_in">test</span> -z <span class="variable">$mysqld_pid</span> ; <span class="keyword">then</span> </span><br><span class="line">        <span class="keyword">if</span> <span class="built_in">test</span> <span class="operator">-f</span> <span class="string">"<span class="variable">$lock_file_path</span>"</span> ; <span class="keyword">then</span> </span><br><span class="line">          <span class="built_in">log</span>_failure_msg <span class="string">"MySQL is not running, but lock file (<span class="variable">$lock_file_path</span>) exists"</span></span><br><span class="line">          <span class="built_in">exit</span> <span class="number">2</span></span><br><span class="line">        <span class="keyword">fi</span> </span><br><span class="line">        <span class="built_in">log</span>_failure_msg <span class="string">"MySQL is not running"</span></span><br><span class="line">        <span class="built_in">exit</span> <span class="number">3</span></span><br><span class="line">      <span class="keyword">else</span></span><br><span class="line">        <span class="built_in">log</span>_failure_msg <span class="string">"MySQL is running but PID file could not be found"</span></span><br><span class="line">        <span class="built_in">exit</span> <span class="number">4</span></span><br><span class="line">      <span class="keyword">fi</span></span><br><span class="line">    <span class="keyword">fi</span></span><br><span class="line">    ;;</span><br><span class="line">    *)</span><br><span class="line">      <span class="comment"># usage</span></span><br><span class="line">      basename=`basename <span class="string">"<span class="variable">$0</span>"</span>`</span><br><span class="line">      <span class="built_in">echo</span> <span class="string">"Usage: <span class="variable">$basename</span>  &#123;start|stop|restart|reload|force-reload|status&#125;  [ MySQL server options ]"</span></span><br><span class="line">      <span class="built_in">exit</span> <span class="number">1</span></span><br><span class="line">    ;;</span><br><span class="line"><span class="keyword">esac</span></span><br><span class="line"> </span><br><span class="line"><span class="built_in">exit</span> <span class="number">0</span></span><br></pre></td></tr></table></figure>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#修改权限</span></span><br><span class="line">chmod +x /etc/init.d/mysqld</span><br><span class="line">service mysqld start</span><br><span class="line"></span><br><span class="line"><span class="comment">#增加MySQL系统环境变量</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">'export PATH=$PATH:/app/local/mysql/bin'</span>&gt;&gt;/etc/profile &amp;&amp; <span class="built_in">source</span> /etc/profile</span><br><span class="line"></span><br><span class="line"><span class="comment">#查看错误日志</span></span><br><span class="line">tail <span class="operator">-f</span> /var/<span class="built_in">log</span>/mysqld.log </span><br><span class="line"></span><br><span class="line"><span class="comment">#用root账户登录并作简单的安全设置</span></span><br><span class="line">/app/<span class="built_in">local</span>/mysql/bin/mysql -uroot -p</span><br><span class="line">直接回车空密码</span><br></pre></td></tr></table></figure>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">#进入数据库</span><br><span class="line"><span class="operator"><span class="keyword">use</span> mysql;</span></span><br><span class="line">#设置root密码</span><br><span class="line"><span class="operator"><span class="keyword">UPDATE</span> mysql.<span class="keyword">user</span> <span class="keyword">SET</span> <span class="keyword">Password</span>=<span class="keyword">password</span>(<span class="string">'root'</span>) <span class="keyword">WHERE</span> <span class="keyword">User</span>=<span class="string">'root'</span>;</span></span><br><span class="line">#清除root密码</span><br><span class="line"><span class="operator"><span class="keyword">update</span> <span class="keyword">user</span> <span class="keyword">set</span> <span class="keyword">password</span>=<span class="string">''</span> <span class="keyword">where</span> <span class="keyword">user</span>=<span class="string">'root'</span>;</span></span><br><span class="line">#删除无名用户</span><br><span class="line"><span class="operator"><span class="keyword">DELETE</span> <span class="keyword">FROM</span> mysql.<span class="keyword">user</span> <span class="keyword">WHERE</span> <span class="keyword">User</span>=<span class="string">''</span>;</span></span><br><span class="line">#删除root远程访问（可选）</span><br><span class="line">#<span class="operator"><span class="keyword">DELETE</span> <span class="keyword">FROM</span> mysql.<span class="keyword">user</span> <span class="keyword">WHERE</span> <span class="keyword">User</span>=<span class="string">'root'</span> <span class="keyword">AND</span> Host <span class="keyword">NOT</span> <span class="keyword">IN</span> (<span class="string">'localhost'</span>, <span class="string">'127.0.0.1'</span>, <span class="string">'::1'</span>);</span></span><br><span class="line">#删除“test”数据库</span><br><span class="line"><span class="operator"><span class="keyword">DROP</span> <span class="keyword">database</span> test;</span></span><br><span class="line">#允许远程访问</span><br><span class="line"><span class="operator"><span class="keyword">update</span> <span class="keyword">user</span> <span class="keyword">set</span> host=<span class="string">'%'</span> <span class="keyword">where</span> <span class="keyword">user</span>=<span class="string">'root'</span> <span class="keyword">AND</span> host=<span class="string">'localhost'</span>;</span></span><br><span class="line">#查看所有用户权限</span><br><span class="line"><span class="operator"><span class="keyword">SELECT</span> <span class="keyword">DISTINCT</span> <span class="keyword">CONCAT</span>(<span class="string">'User: '''</span>,<span class="keyword">user</span>,<span class="string">'''@'''</span>,host,<span class="string">''';'</span>) <span class="keyword">AS</span> <span class="keyword">query</span> <span class="keyword">FROM</span> mysql.<span class="keyword">user</span>;</span></span><br><span class="line">#立即生效并退出MYSQL命令窗体</span><br><span class="line"><span class="operator"><span class="keyword">FLUSH</span> <span class="keyword">PRIVILEGES</span>;</span>QUIT;</span><br><span class="line"></span><br><span class="line">#创建数据库</span><br><span class="line"><span class="operator"><span class="keyword">create</span> <span class="keyword">database</span> ooxx;</span></span><br><span class="line">#创建用户</span><br><span class="line"><span class="operator"><span class="keyword">create</span> <span class="keyword">user</span> ooxx@<span class="string">'%'</span> <span class="keyword">identified</span> <span class="keyword">by</span> <span class="string">'ooxx'</span>;</span></span><br><span class="line">#对用户授权</span><br><span class="line"><span class="operator"><span class="keyword">grant</span> <span class="keyword">all</span> <span class="keyword">privileges</span> <span class="keyword">on</span> ooxx.* <span class="keyword">to</span> ooxx;</span></span><br><span class="line">#刷新MySQL的系统权限相关表</span><br><span class="line"><span class="operator"><span class="keyword">flush</span> <span class="keyword">privileges</span>;</span></span><br><span class="line">#查看所有用户权限</span><br><span class="line"><span class="operator"><span class="keyword">SELECT</span> <span class="keyword">DISTINCT</span> <span class="keyword">CONCAT</span>(<span class="string">'User: '''</span>,<span class="keyword">user</span>,<span class="string">'''@'''</span>,host,<span class="string">''';'</span>) <span class="keyword">AS</span> <span class="keyword">query</span> <span class="keyword">FROM</span> mysql.<span class="keyword">user</span>;</span></span><br></pre></td></tr></table></figure>
<h2 id="安装Apache">安装Apache</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> /app/<span class="built_in">local</span></span><br><span class="line">tar zxvf httpd-<span class="number">2.2</span>.<span class="number">29</span>.tar.gz</span><br><span class="line"><span class="built_in">cd</span> httpd-<span class="number">2.2</span>.<span class="number">29</span></span><br><span class="line"></span><br><span class="line">./configure --prefix=/app/<span class="built_in">local</span>/apache \</span><br><span class="line">--enable-so \</span><br><span class="line">--enable-rewrite \</span><br><span class="line">--enable-modes-shared=most</span><br><span class="line"></span><br><span class="line">make &amp;&amp; make install </span><br><span class="line"></span><br><span class="line">vi /app/<span class="built_in">local</span>/apache/conf/httpd.conf</span><br><span class="line"></span><br><span class="line"><span class="comment">#修改主机名</span></span><br><span class="line">ServerName localhost:<span class="number">80</span></span><br><span class="line"><span class="comment">#查找AddType application/x-gzip .gz .tgz,在该行下面添加</span></span><br><span class="line">AddType application/x-httpd-php .php</span><br><span class="line"><span class="comment">#查找DirectoryIndex index.html 把该行修改成</span></span><br><span class="line">DirectoryIndex index.html index.htm index.php</span><br><span class="line"></span><br><span class="line">/app/<span class="built_in">local</span>/apache/bin/apachectl -t</span><br><span class="line">cp /app/<span class="built_in">local</span>/apache/bin/apachectl /etc/init.d/httpd</span><br></pre></td></tr></table></figure>
<h2 id="安装PHP">安装PHP</h2><h3 id="PHP基础环境">PHP基础环境</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#yum安装或者使用下面源包编译安装</span></span><br><span class="line">yum install libmcrypt libmcrypt-devel mcrypt mhash</span><br><span class="line"></span><br><span class="line"><span class="comment">#下载地址</span></span><br><span class="line">http://sourceforge.net/projects/mcrypt/files/Libmcrypt/</span><br><span class="line">http://sourceforge.net/projects/mcrypt/files/MCrypt/</span><br><span class="line">http://sourceforge.net/projects/mhash/files/mhash/</span><br><span class="line"></span><br><span class="line"><span class="comment">#安装Libmcrypt</span></span><br><span class="line">tar -zxvf libmcrypt-<span class="number">2.5</span>.<span class="number">8</span>.tar.gz</span><br><span class="line"><span class="built_in">cd</span> libmcrypt-<span class="number">2.5</span>.<span class="number">8</span></span><br><span class="line">./configure</span><br><span class="line">make &amp;&amp; make install</span><br><span class="line"><span class="built_in">cd</span> ../</span><br><span class="line"></span><br><span class="line"><span class="number">3</span>.安装mhash</span><br><span class="line"></span><br><span class="line">tar -zxvf mhash-<span class="number">0.9</span>.<span class="number">9.9</span>.tar.gz</span><br><span class="line"><span class="built_in">cd</span> mhash-<span class="number">0.9</span>.<span class="number">9.9</span></span><br><span class="line">./configure</span><br><span class="line">make &amp;&amp; make install</span><br><span class="line"><span class="built_in">cd</span> ../</span><br><span class="line"></span><br><span class="line"><span class="number">4</span>.安装mcrypt</span><br><span class="line"></span><br><span class="line">tar -zxvf mcrypt-<span class="number">2.6</span>.<span class="number">8</span>.tar.gz</span><br><span class="line"><span class="built_in">cd</span> mcrypt-<span class="number">2.6</span>.<span class="number">8</span></span><br><span class="line">LD_LIBRARY_PATH=/usr/<span class="built_in">local</span>/lib ./configure</span><br><span class="line">make &amp;&amp; make install</span><br><span class="line"><span class="built_in">cd</span> ../</span><br><span class="line"></span><br><span class="line"><span class="comment">### 安装PHP</span></span><br><span class="line"></span><br><span class="line">&gt;extension按需定制，支持phpize动态增加，新增的OPcache建议酌情开启</span><br><span class="line"></span><br><span class="line">``` bash</span><br><span class="line">tar zxvf php-<span class="number">5.5</span>.<span class="number">27</span>.tar.gz</span><br><span class="line"><span class="built_in">cd</span> php-<span class="number">5.5</span>.<span class="number">27</span></span><br><span class="line"></span><br><span class="line">./configure --prefix=/app/<span class="built_in">local</span>/php \</span><br><span class="line">--with-config-file-path=/app/<span class="built_in">local</span>/php/etc \</span><br><span class="line">--enable-fpm \</span><br><span class="line">--enable-mbstring \</span><br><span class="line">--with-mhash \</span><br><span class="line">--with-mcrypt \</span><br><span class="line">--with-curl \</span><br><span class="line">--with-openssl \</span><br><span class="line">--with-mysql=mysqlnd \</span><br><span class="line">--with-mysqli=mysqlnd \</span><br><span class="line">--with-pdo-mysql=mysqlnd \</span><br><span class="line">--with-apxs2=/app/<span class="built_in">local</span>/apache/bin/apxs </span><br><span class="line"><span class="comment">#--enable-opcache</span></span><br><span class="line"></span><br><span class="line">make &amp;&amp; make install</span><br><span class="line"></span><br><span class="line"><span class="comment">#配置php.ini</span></span><br><span class="line">cp php.ini-development /app/<span class="built_in">local</span>/php/etc/php.ini</span><br><span class="line"></span><br><span class="line"><span class="comment">#设置时区</span></span><br><span class="line">sed -i <span class="string">"s#;date.timezone =#date.timezone = Asia/Shanghai#g"</span> /app/<span class="built_in">local</span>/php/etc/php.ini</span><br><span class="line"><span class="comment">#防止nginx文件类型错误解析漏洞</span></span><br><span class="line">sed -i <span class="string">"s#;cgi.fix_pathinfo=1#cgi.fix_pathinfo=0#g"</span> /app/<span class="built_in">local</span>/php/etc/php.ini</span><br><span class="line"><span class="comment">#禁止显示php版本的信息</span></span><br><span class="line">sed -i <span class="string">"s#expose_php = On#expose_php = Off#g"</span> /app/<span class="built_in">local</span>/php/etc/php.ini</span><br><span class="line"><span class="comment">#禁用危险函数（可选）</span></span><br><span class="line"><span class="comment">#sed -i "s#disable_functions =#disable_functions = exec,passthru,shell_exec,system,proc_open,popen,curl_exec,curl_multi_exec,parse_ini_file,show_source#g" /app/local/php/etc/php.ini</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#enable-opcache后设置（可选）</span></span><br><span class="line">[OPcache]</span><br><span class="line">zend_extension = opcache.so</span><br><span class="line">opcache.enable=<span class="number">1</span></span><br><span class="line">opcache.memory_consumption=<span class="number">128</span></span><br><span class="line">opcache.interned_strings_buffer=<span class="number">8</span></span><br><span class="line">opcache.max_accelerated_files=<span class="number">4000</span></span><br><span class="line">opcache.revalidate_freq=<span class="number">1</span></span><br><span class="line">opcache.fast_shutdown=<span class="number">1</span></span><br><span class="line">opcache.enable_cli=<span class="number">1</span></span><br></pre></td></tr></table></figure>
<h3 id="配置php-fpm">配置php-fpm</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#编辑php-fpm</span></span><br><span class="line">cp /app/<span class="built_in">local</span>/php/etc/php-fpm.conf.default /app/<span class="built_in">local</span>/php/etc/php-fpm.conf</span><br><span class="line">vi /app/<span class="built_in">local</span>/php/etc/php-fpm.conf</span><br><span class="line"></span><br><span class="line">[global]</span><br><span class="line">;错误日志</span><br><span class="line">error_<span class="built_in">log</span> = <span class="built_in">log</span>/php-fpm.log</span><br><span class="line">;错误日志级别</span><br><span class="line"><span class="built_in">log</span>_level = notice</span><br><span class="line">[www]</span><br><span class="line">;php-fpm监听端口</span><br><span class="line">listen = <span class="number">127.0</span>.<span class="number">0.1</span>:<span class="number">9000</span></span><br><span class="line">;启动进程的帐户和组</span><br><span class="line">user = www</span><br><span class="line">group = www</span><br><span class="line">;如果选择static，则由pm.max_children指定固定的子进程数。如果选择dynamic，则由后面<span class="number">3</span>个参数动态决定</span><br><span class="line">pm = dynamic</span><br><span class="line">;子进程最大数</span><br><span class="line">pm.max_children = <span class="number">384</span></span><br><span class="line">;启动时的进程数</span><br><span class="line">pm.start_servers = <span class="number">20</span></span><br><span class="line">;保证空闲进程数最小值，如果空闲进程小于此值，则创建新的子进程</span><br><span class="line">pm.min_spare_servers = <span class="number">5</span></span><br><span class="line">;保证空闲进程数最大值，如果空闲进程大于此值，此进行清理</span><br><span class="line">pm.max_spare_servers = <span class="number">35</span></span><br><span class="line"></span><br><span class="line">;设置每个子进程重生之前服务的请求数。对于可能存在内存泄漏的第三方模块来说是非常有用的。如果设置为 <span class="string">'0'</span> 则一直接受请求。等同于 PHP_FCGI_MAX_REQUESTS 环境变量。默认值: <span class="number">0</span>。</span><br><span class="line">pm.max_requests = <span class="number">1000</span></span><br><span class="line">;每个子进程闲置多长时间就自杀</span><br><span class="line">pm.process_idle_timeout = <span class="number">10</span>s</span><br><span class="line">;设置单个请求的超时中止时间。该选项可能会对php.ini设置中的<span class="string">'max_execution_time'</span>因为某些特殊原因没有中止运行的脚本有用。设置为 <span class="string">'0'</span> 表示 <span class="string">'Off'</span>.当经常出现<span class="number">502</span>错误时可以尝试更改此选项。</span><br><span class="line">request_terminate_timeout = <span class="number">120</span></span><br><span class="line">;当一个请求该设置的超时时间后，就会将对应的PHP调用堆栈信息完整写入到慢日志中。设置为 <span class="string">'0'</span> 表示 <span class="string">'Off'</span></span><br><span class="line">request_slowlog_timeout = <span class="number">3</span>s</span><br><span class="line">;慢请求的记录日志,配合request_slowlog_timeout使用</span><br><span class="line">slowlog = /app/<span class="built_in">local</span>/php/var/<span class="built_in">log</span>/php-fpm.slow.log</span><br><span class="line">;设置文件打开描述符的rlimit限制。默认值: 系统定义值默认可打开句柄是<span class="number">1024</span>，可使用 <span class="built_in">ulimit</span> -n查看，<span class="built_in">ulimit</span> -n <span class="number">2048</span>修改。</span><br><span class="line">rlimit_files = <span class="number">65535</span></span><br></pre></td></tr></table></figure>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">#设置php环境变量</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">'export PATH=$PATH:/app/local/php/bin'</span>&gt;&gt;/etc/profile &amp;&amp; <span class="built_in">source</span> /etc/profile</span><br><span class="line">touch /app/<span class="built_in">local</span>/php/var/<span class="built_in">log</span>/php-fpm.slow.log</span><br><span class="line"></span><br><span class="line"><span class="comment">#添加php-fpm服务</span></span><br><span class="line">cp /app/<span class="built_in">local</span>/php-<span class="number">5.5</span>.<span class="number">27</span>/sapi/fpm/init.d.php-fpm /etc/rc.d/init.d/php-fpm</span><br><span class="line">chmod +x /etc/rc.d/init.d/php-fpm</span><br><span class="line">service php-fpm start</span><br><span class="line"></span><br><span class="line"><span class="comment">#设置开机自动启动服务</span></span><br><span class="line">vi /etc/rc.local</span><br><span class="line"></span><br><span class="line"><span class="built_in">ulimit</span> -SHn <span class="number">65535</span></span><br><span class="line">service php-fpm start</span><br><span class="line">service nginx start</span><br><span class="line">service mysqld start</span><br></pre></td></tr></table></figure>
<h3 id="配置memcache/mongo/redis">配置memcache/mongo/redis</h3><blockquote>
<p>其它extension扩展都可以动态添加，没事的</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#memcache</span></span><br><span class="line"><span class="built_in">cd</span> /app/<span class="built_in">local</span></span><br><span class="line">tar zxvf memcache-<span class="number">3.0</span>.<span class="number">8</span>.tgz</span><br><span class="line"><span class="built_in">cd</span> memcache-<span class="number">3.0</span>.<span class="number">8</span></span><br><span class="line">/app/<span class="built_in">local</span>/php/bin/phpize</span><br><span class="line">./configure --enable-memcache \</span><br><span class="line">--with-php-config=/app/<span class="built_in">local</span>/php/bin/php-config \</span><br><span class="line">--with-zlib-dir</span><br><span class="line">make &amp;&amp; make install</span><br><span class="line"></span><br><span class="line"><span class="comment">#mongo</span></span><br><span class="line"><span class="built_in">cd</span> /app/<span class="built_in">local</span></span><br><span class="line">tar zxvf mongo-<span class="number">1.6</span>.<span class="number">10</span>.tgz</span><br><span class="line"><span class="built_in">cd</span> mongo-<span class="number">1.6</span>.<span class="number">10</span></span><br><span class="line">/app/<span class="built_in">local</span>/php/bin/phpize</span><br><span class="line">./configure --with-php-config=/app/<span class="built_in">local</span>/php/bin/php-config</span><br><span class="line">make &amp;&amp; make install</span><br><span class="line"></span><br><span class="line"><span class="comment">#redis</span></span><br><span class="line"><span class="built_in">cd</span> /app/<span class="built_in">local</span></span><br><span class="line">tar zxvf redis-<span class="number">2.2</span>.<span class="number">7</span>.tgz</span><br><span class="line"><span class="built_in">cd</span> redis-<span class="number">2.2</span>.<span class="number">7</span></span><br><span class="line">/app/<span class="built_in">local</span>/php/bin/phpize</span><br><span class="line">./configure --with-php-config=/app/<span class="built_in">local</span>/php/bin/php-config</span><br><span class="line">make &amp;&amp; make install</span><br><span class="line"></span><br><span class="line"><span class="comment">#php.ini</span></span><br><span class="line">vi /app/<span class="built_in">local</span>/php/etc/php.ini  </span><br><span class="line"></span><br><span class="line">[memcached]  </span><br><span class="line">extension=memcached.so</span><br><span class="line">[mongodb]  </span><br><span class="line">extension=mongo.so </span><br><span class="line">[redis]  </span><br><span class="line">extension=redis.so </span><br><span class="line"></span><br><span class="line"><span class="comment">#重启生效</span></span><br><span class="line">service php-fpm restart</span><br><span class="line">php -i | grep php.ini</span><br><span class="line">php -m</span><br></pre></td></tr></table></figure>
<h2 id="自动化部署">自动化部署</h2><blockquote>
<p>服务器的上传目录可以自定义，安装目录默认统一修改为/app/{local,data}，执行脚本为web.sh</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">#web.sh</span></span><br><span class="line"></span><br><span class="line"><span class="shebang">#!/bin/bash</span><br><span class="line"></span></span><br><span class="line"><span class="comment">## alias</span></span><br><span class="line">ltmp_<span class="built_in">local</span>=$(<span class="built_in">cd</span> <span class="string">"<span class="variable">$(dirname "$0")</span>"</span>; <span class="built_in">pwd</span>)</span><br><span class="line">mkdir -p /app/&#123;<span class="built_in">local</span>,data&#125;</span><br><span class="line"><span class="built_in">unalias</span> cp</span><br><span class="line">ltmp_init=<span class="variable">$ltmp_local</span>/init/</span><br><span class="line">ltmp_src=<span class="variable">$ltmp_local</span>/src/</span><br><span class="line"></span><br><span class="line"><span class="comment">## system</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#history</span></span><br><span class="line">cp <span class="variable">$&#123;ltmp_init&#125;</span>bashrc /etc/</span><br><span class="line"><span class="comment">#time</span></span><br><span class="line">rm -rf /etc/localtime</span><br><span class="line">ln <span class="operator">-s</span> /usr/share/zoneinfo/Asia/Shanghai /etc/localtime</span><br><span class="line"><span class="comment">#maildrop</span></span><br><span class="line">sed <span class="string">'s/MAILTO=root/MAILTO=""/g'</span> /etc/crontab</span><br><span class="line">service crond restart</span><br><span class="line"><span class="comment">#selinux</span></span><br><span class="line">setenforce <span class="number">0</span></span><br><span class="line">sed -i <span class="string">'s/SELINUX=enforcing/SELINUX=disabled/'</span> /etc/selinux/config</span><br><span class="line"><span class="comment">#limits</span></span><br><span class="line"><span class="built_in">echo</span> <span class="built_in">ulimit</span> -SHn <span class="number">65535</span> &gt;&gt; /etc/profile</span><br><span class="line"><span class="built_in">source</span> /etc/profile</span><br><span class="line">cp <span class="variable">$&#123;ltmp_init&#125;</span>limits.conf /etc/security/</span><br><span class="line"><span class="comment">#tcp</span></span><br><span class="line">cp <span class="variable">$&#123;ltmp_init&#125;</span>sysctl.conf  /etc/</span><br><span class="line"><span class="comment">#yum</span></span><br><span class="line">yum -y install yum-fastestmirror</span><br><span class="line">yum remove httpd mysql mysql-server php php-cli php-common php-devel php-gd  -y</span><br><span class="line">yum install -y wget gcc gcc-c++ openssl* curl curl-devel libxml2 libxml2-devel glibc glibc-devel glib2 glib2-devel gd gd2 gd-devel gd2-devel libaio autoconf libjpeg libjpeg-devel libpng libpng-devel freetype freetype-devel</span><br><span class="line"><span class="comment">#download</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">cd</span> /app/<span class="built_in">local</span></span><br><span class="line"><span class="comment">##PCRE - Perl Compatible Regular Expressions</span></span><br><span class="line"><span class="comment">#wget "ftp://ftp.csx.cam.ac.uk/pub/software/programming/pcre/pcre-8.37.tar.gz"</span></span><br><span class="line"><span class="comment">##Tengine</span></span><br><span class="line"><span class="comment">#wget "http://tengine.taobao.org/download/tengine-2.1.0.tar.gz"</span></span><br><span class="line"><span class="comment">##MySQL</span></span><br><span class="line"><span class="comment">#wget "https://downloads.mariadb.com/archives/mysql-5.6/mysql-5.6.25-linux-glibc2.5-x86_64.tar.gz"</span></span><br><span class="line"><span class="comment">##PHP</span></span><br><span class="line"><span class="comment">#wget "http://cn2.php.net/distributions/php-5.6.11.tar.gz"</span></span><br><span class="line"><span class="comment">##Mhash</span></span><br><span class="line"><span class="comment">#wget "http://downloads.sourceforge.net/mhash/mhash-0.9.9.9.tar.gz"</span></span><br><span class="line"><span class="comment">##libmcrypt</span></span><br><span class="line"><span class="comment">#wget "http://downloads.sourceforge.net/mcrypt/libmcrypt-2.5.8.tar.gz"</span></span><br><span class="line"><span class="comment">##Mcrypt</span></span><br><span class="line"><span class="comment">#wget "http://downloads.sourceforge.net/mcrypt/mcrypt-2.6.8.tar.gz"</span></span><br><span class="line"></span><br><span class="line"><span class="comment">## soft</span></span><br><span class="line"><span class="built_in">cd</span> <span class="variable">$ltmp_local</span></span><br><span class="line"><span class="comment">#pcre</span></span><br><span class="line">tar zxvf pcre-<span class="number">8.37</span>.tar.gz <span class="number">1</span>&gt; /dev/null</span><br><span class="line"><span class="built_in">cd</span> pcre-<span class="number">8.37</span></span><br><span class="line">./configure</span><br><span class="line">make &amp;&amp; make install</span><br><span class="line"><span class="built_in">cd</span> ../</span><br><span class="line"><span class="comment">#tengine</span></span><br><span class="line">groupadd www</span><br><span class="line">useradd -g www www</span><br><span class="line"><span class="comment">#安装Tengine</span></span><br><span class="line"><span class="built_in">cd</span> <span class="variable">$ltmp_local</span></span><br><span class="line">tar zxvf tengine-<span class="number">2.1</span>.<span class="number">0</span>.tar.gz <span class="number">1</span>&gt; /dev/null</span><br><span class="line"><span class="built_in">cd</span> tengine-<span class="number">2.1</span>.<span class="number">0</span></span><br><span class="line">./configure --user=www --group=www \</span><br><span class="line">--prefix=/app/<span class="built_in">local</span>/nginx \</span><br><span class="line">--with-http_stub_status_module \</span><br><span class="line">--with-http_ssl_module \</span><br><span class="line">--with-pcre=<span class="variable">$&#123;ltmp_local&#125;</span>/pcre-<span class="number">8.37</span></span><br><span class="line">make &amp;&amp; make install</span><br><span class="line"><span class="built_in">cd</span> ../</span><br><span class="line"><span class="comment">#nginx config</span></span><br><span class="line"><span class="built_in">cd</span> <span class="variable">$ltmp_local</span></span><br><span class="line">cp <span class="variable">$&#123;ltmp_init&#125;</span>nginx.conf /app/<span class="built_in">local</span>/nginx/conf/</span><br><span class="line">cp -r <span class="variable">$&#123;ltmp_init&#125;</span>vhosts /app/<span class="built_in">local</span>/nginx/conf/</span><br><span class="line">mkdir -p /app/data/localhost</span><br><span class="line">chmod +w /app/data/localhost</span><br><span class="line"><span class="built_in">echo</span> <span class="string">"&lt;?php phpinfo();?&gt;"</span> &gt; /app/data/localhost/phpinfo.php</span><br><span class="line">chown -R www:www /app/data/localhost</span><br><span class="line"><span class="built_in">echo</span> <span class="string">'export PATH=$PATH:/app/local/nginx/sbin'</span>&gt;&gt;/etc/profile &amp;&amp; <span class="built_in">source</span> /etc/profile</span><br><span class="line">cp <span class="variable">$&#123;ltmp_init&#125;</span>nginx /etc/rc.d/init.d/</span><br><span class="line">chmod +x /etc/init.d/nginx</span><br><span class="line"><span class="built_in">ulimit</span> -SHn <span class="number">65535</span></span><br><span class="line">service nginx start</span><br><span class="line"><span class="comment">#libmcrypt</span></span><br><span class="line"><span class="built_in">cd</span> <span class="variable">$ltmp_src</span></span><br><span class="line">tar -zxvf libmcrypt-<span class="number">2.5</span>.<span class="number">8</span>.tar.gz <span class="number">1</span>&gt; /dev/null</span><br><span class="line"><span class="built_in">cd</span> libmcrypt-<span class="number">2.5</span>.<span class="number">8</span></span><br><span class="line">./configure</span><br><span class="line">make &amp;&amp; make install</span><br><span class="line"><span class="built_in">cd</span> ../</span><br><span class="line"><span class="comment">#mhash</span></span><br><span class="line"><span class="built_in">cd</span> <span class="variable">$ltmp_src</span></span><br><span class="line">tar -zxvf mhash-<span class="number">0.9</span>.<span class="number">9.9</span>.tar.gz <span class="number">1</span>&gt; /dev/null</span><br><span class="line"><span class="built_in">cd</span> mhash-<span class="number">0.9</span>.<span class="number">9.9</span></span><br><span class="line">./configure</span><br><span class="line">make &amp;&amp; make install</span><br><span class="line"><span class="built_in">cd</span> ../</span><br><span class="line"><span class="comment">#mcrypt</span></span><br><span class="line"><span class="built_in">cd</span> <span class="variable">$ltmp_src</span></span><br><span class="line">tar -zxvf mcrypt-<span class="number">2.6</span>.<span class="number">8</span>.tar.gz <span class="number">1</span>&gt; /dev/null</span><br><span class="line"><span class="built_in">cd</span> mcrypt-<span class="number">2.6</span>.<span class="number">8</span></span><br><span class="line">LD_LIBRARY_PATH=/usr/<span class="built_in">local</span>/lib ./configure</span><br><span class="line">make &amp;&amp; make install</span><br><span class="line"><span class="built_in">cd</span> ../</span><br><span class="line"><span class="comment">#php</span></span><br><span class="line"><span class="built_in">cd</span> <span class="variable">$ltmp_local</span></span><br><span class="line">tar zxvf php-<span class="number">5.5</span>.<span class="number">27</span>.tar.gz <span class="number">1</span>&gt; /dev/null</span><br><span class="line"><span class="built_in">cd</span> php-<span class="number">5.5</span>.<span class="number">27</span></span><br><span class="line">./configure --prefix=/app/<span class="built_in">local</span>/php \</span><br><span class="line">--with-config-file-path=/app/<span class="built_in">local</span>/php/etc \</span><br><span class="line">--enable-fpm \</span><br><span class="line">--enable-mbstring \</span><br><span class="line">--with-mhash \</span><br><span class="line">--with-mcrypt \</span><br><span class="line">--with-curl \</span><br><span class="line">--with-openssl \</span><br><span class="line">--with-mysql=mysqlnd \</span><br><span class="line">--with-mysqli=mysqlnd \</span><br><span class="line">--with-pdo-mysql=mysqlnd</span><br><span class="line">make &amp;&amp; make install</span><br><span class="line"><span class="comment">#memcache</span></span><br><span class="line"><span class="built_in">cd</span> <span class="variable">$ltmp_src</span></span><br><span class="line">tar zxvf memcache-<span class="number">3.0</span>.<span class="number">8</span>.tgz  <span class="number">1</span>&gt; /dev/null</span><br><span class="line"><span class="built_in">cd</span> memcache-<span class="number">3.0</span>.<span class="number">8</span></span><br><span class="line">/app/<span class="built_in">local</span>/php/bin/phpize</span><br><span class="line">./configure --enable-memcache \</span><br><span class="line">--with-php-config=/app/<span class="built_in">local</span>/php/bin/php-config \</span><br><span class="line">--with-zlib-dir</span><br><span class="line">make &amp;&amp; make install</span><br><span class="line"><span class="comment">#mongo</span></span><br><span class="line"><span class="built_in">cd</span> <span class="variable">$ltmp_src</span></span><br><span class="line">tar zxvf mongo-<span class="number">1.6</span>.<span class="number">10</span>.tgz  <span class="number">1</span>&gt; /dev/null</span><br><span class="line"><span class="built_in">cd</span> mongo-<span class="number">1.6</span>.<span class="number">10</span></span><br><span class="line">/app/<span class="built_in">local</span>/php/bin/phpize</span><br><span class="line">./configure --with-php-config=/app/<span class="built_in">local</span>/php/bin/php-config</span><br><span class="line">make &amp;&amp; make install</span><br><span class="line"><span class="comment">#redis</span></span><br><span class="line"><span class="built_in">cd</span> <span class="variable">$ltmp_src</span></span><br><span class="line"><span class="comment">#redis</span></span><br><span class="line">tar zxvf redis-<span class="number">2.2</span>.<span class="number">7</span>.tgz  <span class="number">1</span>&gt; /dev/null</span><br><span class="line"><span class="built_in">cd</span> redis-<span class="number">2.2</span>.<span class="number">7</span></span><br><span class="line">/app/<span class="built_in">local</span>/php/bin/phpize</span><br><span class="line">./configure --with-php-config=/app/<span class="built_in">local</span>/php/bin/php-config</span><br><span class="line">make &amp;&amp; make install</span><br><span class="line"><span class="comment">#php-fpm</span></span><br><span class="line">cp <span class="variable">$&#123;ltmp_init&#125;</span>php.ini /app/<span class="built_in">local</span>/php/etc/</span><br><span class="line">cp <span class="variable">$&#123;ltmp_init&#125;</span>php-fpm.conf /app/<span class="built_in">local</span>/php/etc/</span><br><span class="line"><span class="built_in">echo</span> <span class="string">'export PATH=$PATH:/app/local/php/bin'</span>&gt;&gt;/etc/profile &amp;&amp; <span class="built_in">source</span> /etc/profile</span><br><span class="line">touch /app/<span class="built_in">local</span>/php/var/<span class="built_in">log</span>/php-fpm.slow.log</span><br><span class="line">cp <span class="variable">$&#123;ltmp_local&#125;</span>/php-<span class="number">5.5</span>.<span class="number">27</span>/sapi/fpm/init.d.php-fpm /etc/rc.d/init.d/php-fpm</span><br><span class="line">chmod +x /etc/rc.d/init.d/php-fpm</span><br><span class="line">service php-fpm start</span><br></pre></td></tr></table></figure>
<h2 id="GitHub源码仓库">GitHub源码仓库</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">file://E:\QQDownload\LTMP     (<span class="number">2</span> folders, <span class="number">5</span> files, <span class="number">27.66</span> MB, <span class="number">30.76</span> MB <span class="keyword">in</span> total.)</span><br><span class="line">│  httpd-<span class="number">2.2</span>.<span class="number">29</span>.tar.gz     <span class="number">7.19</span> MB</span><br><span class="line">│  pcre-<span class="number">8.37</span>.tar.gz     <span class="number">1.95</span> MB</span><br><span class="line">│  php-<span class="number">5.5</span>.<span class="number">27</span>.tar.gz     <span class="number">16.95</span> MB</span><br><span class="line">│  tengine-<span class="number">2.1</span>.<span class="number">0</span>.tar.gz     <span class="number">1.58</span> MB</span><br><span class="line">│  web.sh     <span class="number">4.10</span> KB</span><br><span class="line">├─init     (<span class="number">1</span> folders, <span class="number">12</span> files, <span class="number">91.42</span> KB, <span class="number">92.23</span> KB <span class="keyword">in</span> total.)</span><br><span class="line">│  │  allow.conf     <span class="number">35</span> bytes</span><br><span class="line">│  │  bashrc     <span class="number">2.99</span> KB</span><br><span class="line">│  │  deny.conf     <span class="number">35</span> bytes</span><br><span class="line">│  │  limits.conf     <span class="number">1.86</span> KB</span><br><span class="line">│  │  my.cnf     <span class="number">1.99</span> KB</span><br><span class="line">│  │  mysqld     <span class="number">8.39</span> KB</span><br><span class="line">│  │  nginx     <span class="number">2.22</span> KB</span><br><span class="line">│  │  nginx.conf     <span class="number">1.34</span> KB</span><br><span class="line">│  │  php-fpm     <span class="number">2.30</span> KB</span><br><span class="line">│  │  php-fpm.conf     <span class="number">416</span> bytes</span><br><span class="line">│  │  php.ini     <span class="number">67.83</span> KB</span><br><span class="line">│  │  sysctl.conf     <span class="number">2.03</span> KB</span><br><span class="line">│  └─vhosts     (<span class="number">0</span> folders, <span class="number">1</span> files, <span class="number">826</span> bytes, <span class="number">826</span> bytes <span class="keyword">in</span> total.)</span><br><span class="line">│          localhost.conf     <span class="number">826</span> bytes</span><br><span class="line">└─src     (<span class="number">0</span> folders, <span class="number">6</span> files, <span class="number">3.01</span> MB, <span class="number">3.01</span> MB <span class="keyword">in</span> total.)</span><br><span class="line">        libmcrypt-<span class="number">2.5</span>.<span class="number">8</span>.tar.gz     <span class="number">1.27</span> MB</span><br><span class="line">        mcrypt-<span class="number">2.6</span>.<span class="number">8</span>.tar.gz     <span class="number">460.85</span> KB</span><br><span class="line">        memcache-<span class="number">3.0</span>.<span class="number">8</span>.tgz     <span class="number">68.87</span> KB</span><br><span class="line">        mhash-<span class="number">0.9</span>.<span class="number">9.9</span>.tar.gz     <span class="number">909.61</span> KB</span><br><span class="line">        mongo-<span class="number">1.6</span>.<span class="number">10</span>.tgz     <span class="number">204.19</span> KB</span><br><span class="line">        redis-<span class="number">2.2</span>.<span class="number">7</span>.tgz     <span class="number">131.19</span> KB</span><br></pre></td></tr></table></figure>
<p>LTMP - <a href="https://github.com/wsgzao/LTMP" target="_blank" rel="external">https://github.com/wsgzao/LTMP</a></p>
]]></content>
    <summary type="html">
    <![CDATA[LTMP(CentOS/Tengine/MySQL/PHP)]]>
    
    </summary>
    
      <category term="学习 | Study" scheme="http://wsgzao.github.io/categories/%E5%AD%A6%E4%B9%A0-Study/"/>
    
  </entry>
  
  <entry>
    <title><![CDATA[sersync基于rsync+inotify实现数据实时同步]]></title>
    <link href="http://wsgzao.github.io/post/sersync/"/>
    <id>http://wsgzao.github.io/post/sersync/</id>
    <published>2015-08-14T05:18:44.000Z</published>
    <updated>2015-08-14T04:46:30.108Z</updated>
    <content type="html"><![CDATA[<p><img src="//i.v2ex.co/27qp456L.png" alt=""></p>
<h2 id="前言">前言</h2><p>提到数据同步就必然会谈到<code>rsync</code>，一般简单的服务器数据传输会使用<code>ftp/sftp</code>等方式，但是这样的方式效率不高，不支持差异化增量同步也不支持实时传输。针对数据实时同步需求大多数人会选择<code>rsync+inotify-tools</code>的解决方案，但是这样的方案也存在一些缺陷（文章中会具体指出），<code>sersync</code>是国人基于前两者开发的工具，不仅保留了优点同时还强化了实时监控，文件过滤，简化配置等功能，帮助用户提高运行效率，节省时间和网络资源。</p>
<blockquote>
<p>可靠高效的数据实时同步方式</p>
</blockquote>
<hr>
<h2 id="更新历史">更新历史</h2><p>2015年08月14日 - 更新GitHub源码安装包<br>2015年08月13日 - 初稿</p>
<p>阅读原文 - <a href="http://wsgzao.github.io/post/sersync/" target="_blank" rel="external">http://wsgzao.github.io/post/sersync/</a></p>
<p>扩展阅读</p>
<p>基于rsync+sersync的服务器文件同步实战 - <a href="http://www.markdream.com/technologies/server/syncfile-by-rsync.shtml" target="_blank" rel="external">http://www.markdream.com/technologies/server/syncfile-by-rsync.shtml</a><br>通过 rsync sersync 实现高效的数据实时同步架构 - <a href="https://www.cnhzz.com/rsync_sersync/" target="_blank" rel="external">https://www.cnhzz.com/rsync_sersync/</a><br>rsync - <a href="https://rsync.samba.org/" target="_blank" rel="external">https://rsync.samba.org/</a><br>inotify-tools - <a href="https://github.com/rvoicilas/inotify-tools" target="_blank" rel="external">https://github.com/rvoicilas/inotify-tools</a><br>sersync - <a href="http://code.google.com/p/sersync/" target="_blank" rel="external">http://code.google.com/p/sersync/</a></p>
<hr>
<h2 id="原理">原理</h2><blockquote>
<p>Synchronize files and folders between servers -using inotiy and rsync with c++ 服务器实时同步文件，服务器镜像解决方案</p>
</blockquote>
<p><code>sersync</code>主要用于服务器同步，web镜像等功能。基于boost1.43.0,inotify api,rsync command.开发。目前使用的比较多的同步解决方案是<code>inotify-tools+rsync</code> ，另外一个是google开源项目<code>Openduckbill</code>（依赖于inotify- tools），这两个都是基于脚本语言编写的。相比较上面两个项目，本项目优点是：</p>
<ol>
<li>sersync是使用c++编写，而且对linux系统文件系统产生的临时文件和重复的文件操作进行过滤（详细见附录，这个过滤脚本程序没有实现），所以在结合rsync同步的时候，节省了运行时耗和网络资源。因此更快。</li>
<li>相比较上面两个项目，sersync配置起来很简单，其中bin目录下已经有基本上静态编译的2进制文件，配合bin目录下的xml配置文件直接使用即可。</li>
<li>另外本项目相比较其他脚本开源项目，使用多线程进行同步，尤其在同步较大文件时，能够保证多个服务器实时保持同步状态。</li>
<li>本项目有出错处理机制，通过失败队列对出错的文件重新同步，如果仍旧失败，则按设定时长对同步失败的文件重新同步。</li>
<li>本项目自带crontab功能，只需在xml配置文件中开启，即可按您的要求，隔一段时间整体同步一次。无需再额外配置crontab功能。</li>
<li>本项目socket与http插件扩展，满足您二次开发的需要。</li>
</ol>
<blockquote>
<p>针对上图的设计架构，这里做几点说明，来帮助大家阅读和理解该图</p>
</blockquote>
<p>1 ) <code>线程组线程</code>是等待线程队列的守护线程，当事件队列中有事件产生的时候，线程组守护线程就会逐个唤醒同步线程。当队列中 Inotify 事件较多的时候，同步线程就会被全部唤醒一起工作。这样设计的目的是为了能够同时处理多个 Inotify 事件，从而提升服务器的并发同步能力。同步线程的最佳数量=核数 x 2 + 2。<br>2 ) 那么之所以称之为<code>线程组线程</code>，是因为每个线程在工作的时候，会根据服务器上新写入文件的数量去建立子线程，子线程可以保证所有的文件与各个服务器同时同步。当要同步的文件较大的时候，这样的设计可以保证每个远程服务器都可以同时获得需要同步的文件。<br>3 ) 服务线程的作用有三个：</p>
<ul>
<li>处理同步失败的文件，将这些文件再次同步，对于再次同步失败的文件会生成 rsync_fail_log.sh 脚本，记录失败的事件。</li>
<li>每隔10个小时执行 rsync_fail_log.sh 脚本一次，同时清空脚本。</li>
<li>crontab功能，可以每隔一定时间，将所有路径整体同步一次。</li>
</ul>
<p>4 ) <code>过滤队列</code>的建立是为了过滤短时间内产生的重复的inotify信息，例如在删除文件夹的时候，inotify就会同时产生删除文件夹里的文件与删除文件夹的事件，通过过滤队列，当删除文件夹事件产生的时候，会将之前加入队列的删除文件的事件全部过滤掉，这样只产生一条删除文件夹的事件，从而减轻了同步的负担。同时对于修改文件的操作的时候，会产生临时文件的重复操作。</p>
<h2 id="角色">角色</h2><blockquote>
<p>注意主从配置的区别，记得调整SELinux和防火墙</p>
</blockquote>
<p>iptables配置实践 - <a href="http://wsgzao.github.io/post/iptables/" target="_blank" rel="external">http://wsgzao.github.io/post/iptables/</a><br>LTMP手动编译安装以及全自动化部署实践 - <a href="http://wsgzao.github.io/post/ltmp/" target="_blank" rel="external">http://wsgzao.github.io/post/ltmp/</a></p>
<ol>
<li>服务器A（主服务器）</li>
<li>服务器B（从服务器/备份服务器）</li>
<li>rsync默认TCP端口为873</li>
</ol>
<h3 id="服务器B">服务器B</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#在服务器B上安装rsync</span></span><br><span class="line"><span class="built_in">cd</span> /app/<span class="built_in">local</span></span><br><span class="line">wget  http://rsync.samba.org/ftp/rsync/src/rsync-<span class="number">3.1</span>.<span class="number">1</span>.tar.gz</span><br><span class="line">tar zxf rsync-<span class="number">3.1</span>.<span class="number">1</span>.tar.gz</span><br><span class="line"><span class="built_in">cd</span> rsync-<span class="number">3.1</span>.<span class="number">1</span></span><br><span class="line">./configure</span><br><span class="line">make &amp;&amp; make install</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#设置rsync的配置文件</span></span><br><span class="line">vi /etc/rsyncd.conf</span><br><span class="line"></span><br><span class="line"><span class="comment">#服务器B上的rsyncd.conf文件内容</span></span><br><span class="line">uid=root</span><br><span class="line">gid=root</span><br><span class="line"><span class="comment">#最大连接数</span></span><br><span class="line">max connections=<span class="number">36000</span></span><br><span class="line"><span class="comment">#默认为true，修改为no，增加对目录文件软连接的备份 </span></span><br><span class="line">use chroot=no</span><br><span class="line"><span class="comment">#定义日志存放位置</span></span><br><span class="line"><span class="built_in">log</span> file=/var/<span class="built_in">log</span>/rsyncd.log</span><br><span class="line"><span class="comment">#忽略无关错误</span></span><br><span class="line">ignore errors = yes</span><br><span class="line"><span class="comment">#设置rsync服务端文件为读写权限</span></span><br><span class="line"><span class="built_in">read</span> only = no </span><br><span class="line"><span class="comment">#认证的用户名与系统帐户无关在认证文件做配置，如果没有这行则表明是匿名</span></span><br><span class="line">auth users = rsync</span><br><span class="line"><span class="comment">#密码认证文件，格式(虚拟用户名:密码）</span></span><br><span class="line">secrets file = /etc/rsync.pass</span><br><span class="line"><span class="comment">#这里是认证的模块名，在client端需要指定，可以设置多个模块和路径</span></span><br><span class="line">[rsync]</span><br><span class="line"><span class="comment">#自定义注释</span></span><br><span class="line">comment  = rsync</span><br><span class="line"><span class="comment">#同步到B服务器的文件存放的路径</span></span><br><span class="line">path=/app/data/site/</span><br><span class="line">[img]</span><br><span class="line">comment  = img</span><br><span class="line">path=/app/data/site/img</span><br><span class="line"></span><br><span class="line"><span class="comment">#创建rsync认证文件  可以设置多个，每行一个用户名:密码，注意中间以“:”分割</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">"rsync:rsync"</span> &gt; /etc/rsync.pass</span><br><span class="line"></span><br><span class="line"><span class="comment">#设置文件所有者读取、写入权限</span></span><br><span class="line">chmod <span class="number">600</span> /etc/rsyncd.conf  </span><br><span class="line">chmod <span class="number">600</span> /etc/rsync.pass  </span><br><span class="line"></span><br><span class="line"><span class="comment">#启动服务器B上的rsync服务</span></span><br><span class="line"><span class="comment">#rsync --daemon -v</span></span><br><span class="line">rsync --daemon</span><br><span class="line"></span><br><span class="line"><span class="comment">#监听端口873</span></span><br><span class="line">netstat -an | grep <span class="number">873</span></span><br><span class="line">lsof -i tcp:<span class="number">873</span></span><br><span class="line"></span><br><span class="line">COMMAND   PID USER   FD   TYPE DEVICE SIZE/OFF NODE NAME</span><br><span class="line">rsync   <span class="number">31445</span> root    <span class="number">4</span>u  IPv4 <span class="number">443872</span>      <span class="number">0</span>t0  TCP *:rsync (LISTEN)</span><br><span class="line">rsync   <span class="number">31445</span> root    <span class="number">5</span>u  IPv6 <span class="number">443873</span>      <span class="number">0</span>t0  TCP *:rsync (LISTEN)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#设置rsync为服务启动项（可选）</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">"/usr/local/bin/rsync --daemon"</span> &gt;&gt; /etc/rc.local</span><br><span class="line"></span><br><span class="line"><span class="comment">#要 Kill rsync 进程，不要用 kill -HUP &#123;PID&#125; 的方式重启进程，以下3种方式任选</span></span><br><span class="line"><span class="comment">#ps -ef|grep rsync|grep -v grep|awk '&#123;print $2&#125;'|xargs kill -9</span></span><br><span class="line"><span class="comment">#cat /var/run/rsyncd.pid | xargs kill -9</span></span><br><span class="line">pkill rsync</span><br><span class="line"><span class="comment">#再次启动</span></span><br><span class="line">/usr/<span class="built_in">local</span>/bin/rsync --daemon</span><br></pre></td></tr></table></figure>
<h3 id="服务器A">服务器A</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#安装rsync</span></span><br><span class="line"><span class="built_in">cd</span> /app/<span class="built_in">local</span></span><br><span class="line">wget  http://rsync.samba.org/ftp/rsync/src/rsync-<span class="number">3.1</span>.<span class="number">1</span>.tar.gz</span><br><span class="line">tar zxf rsync-<span class="number">3.1</span>.<span class="number">1</span>.tar.gz</span><br><span class="line"><span class="built_in">cd</span> rsync-<span class="number">3.1</span>.<span class="number">1</span></span><br><span class="line">./configure</span><br><span class="line">make &amp;&amp; make install</span><br><span class="line"></span><br><span class="line"><span class="comment">#安装inotify-tools</span></span><br><span class="line"><span class="built_in">cd</span> /app/<span class="built_in">local</span></span><br><span class="line">wget http://github.com/downloads/rvoicilas/inotify-tools/inotify-tools-<span class="number">3.14</span>.tar.gz</span><br><span class="line">tar zxf inotify-tools-<span class="number">3.14</span>.tar.gz</span><br><span class="line"><span class="built_in">cd</span> inotify-tools-<span class="number">3.14</span></span><br><span class="line">./configure --prefix=/app/<span class="built_in">local</span>/inotify </span><br><span class="line">make &amp;&amp; make install</span><br><span class="line"></span><br><span class="line"><span class="comment">#安装sersync</span></span><br><span class="line"><span class="built_in">cd</span> /app/<span class="built_in">local</span></span><br><span class="line">wget https://sersync.googlecode.com/files/sersync2.<span class="number">5.4</span>_64bit_binary_stable_final.tar.gz</span><br><span class="line">tar zxf sersync2.<span class="number">5.4</span>_64bit_binary_stable_final.tar.gz</span><br><span class="line">mv /app/<span class="built_in">local</span>/GNU-Linux-x86/ /app/<span class="built_in">local</span>/sersync</span><br><span class="line"><span class="built_in">cd</span> /app/<span class="built_in">local</span>/sersync</span><br><span class="line"><span class="comment">#配置下密码文件，因为这个密码是要访问服务器B需要的密码和上面服务器B的密码必须一致</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">"rsync"</span> &gt; /app/<span class="built_in">local</span>/sersync/user.pass</span><br><span class="line"><span class="comment">#修改权限</span></span><br><span class="line">chmod <span class="number">600</span> /app/<span class="built_in">local</span>/sersync/user.pass</span><br><span class="line"><span class="comment">#修改confxml.conf</span></span><br><span class="line">vi /app/<span class="built_in">local</span>/sersync/confxml.xml</span><br></pre></td></tr></table></figure>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="pi">&lt;?xml version="1.0" encoding="ISO-8859-1"?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="title">head</span> <span class="attribute">version</span>=<span class="value">"2.5"</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="title">host</span> <span class="attribute">hostip</span>=<span class="value">"localhost"</span> <span class="attribute">port</span>=<span class="value">"8008"</span>&gt;</span><span class="tag">&lt;/<span class="title">host</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="title">debug</span> <span class="attribute">start</span>=<span class="value">"true"</span>/&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="title">fileSystem</span> <span class="attribute">xfs</span>=<span class="value">"false"</span>/&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="title">filter</span> <span class="attribute">start</span>=<span class="value">"false"</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="title">exclude</span> <span class="attribute">expression</span>=<span class="value">"(.*)\.php"</span>&gt;</span><span class="tag">&lt;/<span class="title">exclude</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="title">exclude</span> <span class="attribute">expression</span>=<span class="value">"^data/*"</span>&gt;</span><span class="tag">&lt;/<span class="title">exclude</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;/<span class="title">filter</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="title">inotify</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="title">delete</span> <span class="attribute">start</span>=<span class="value">"true"</span>/&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="title">createFolder</span> <span class="attribute">start</span>=<span class="value">"true"</span>/&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="title">createFile</span> <span class="attribute">start</span>=<span class="value">"false"</span>/&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="title">closeWrite</span> <span class="attribute">start</span>=<span class="value">"true"</span>/&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="title">moveFrom</span> <span class="attribute">start</span>=<span class="value">"true"</span>/&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="title">moveTo</span> <span class="attribute">start</span>=<span class="value">"true"</span>/&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="title">attrib</span> <span class="attribute">start</span>=<span class="value">"false"</span>/&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="title">modify</span> <span class="attribute">start</span>=<span class="value">"false"</span>/&gt;</span></span><br><span class="line"> <span class="tag">&lt;/<span class="title">inotify</span>&gt;</span></span><br><span class="line"> </span><br><span class="line"> <span class="tag">&lt;<span class="title">sersync</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="title">localpath</span> <span class="attribute">watch</span>=<span class="value">"/home/"</span>&gt;</span> <span class="comment">&lt;!-- 这里填写服务器A要同步的文件夹路径--&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="title">remote</span> <span class="attribute">ip</span>=<span class="value">"8.8.8.8"</span> <span class="attribute">name</span>=<span class="value">"rsync"</span>/&gt;</span> <span class="comment">&lt;!-- 这里填写服务器B的IP地址和模块名--&gt;</span></span><br><span class="line"> <span class="comment">&lt;!--&lt;remote ip="192.168.28.39" name="tongbu"/&gt;--&gt;</span></span><br><span class="line"> <span class="comment">&lt;!--&lt;remote ip="192.168.28.40" name="tongbu"/&gt;--&gt;</span></span><br><span class="line"> <span class="tag">&lt;/<span class="title">localpath</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="title">rsync</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="title">commonParams</span> <span class="attribute">params</span>=<span class="value">"-artuz"</span>/&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="title">auth</span> <span class="attribute">start</span>=<span class="value">"true"</span> <span class="attribute">users</span>=<span class="value">"rsync"</span> <span class="attribute">passwordfile</span>=<span class="value">"/app/local/sersync/user.pass"</span>/&gt;</span> <span class="comment">&lt;!-- rsync+密码文件 这里填写服务器B的认证信息--&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="title">userDefinedPort</span> <span class="attribute">start</span>=<span class="value">"false"</span> <span class="attribute">port</span>=<span class="value">"874"</span>/&gt;</span><span class="comment">&lt;!-- port=874 --&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="title">timeout</span> <span class="attribute">start</span>=<span class="value">"false"</span> <span class="attribute">time</span>=<span class="value">"100"</span>/&gt;</span><span class="comment">&lt;!-- timeout=100 --&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="title">ssh</span> <span class="attribute">start</span>=<span class="value">"false"</span>/&gt;</span></span><br><span class="line"> <span class="tag">&lt;/<span class="title">rsync</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="title">failLog</span> <span class="attribute">path</span>=<span class="value">"/tmp/rsync_fail_log.sh"</span> <span class="attribute">timeToExecute</span>=<span class="value">"60"</span>/&gt;</span><span class="comment">&lt;!--default every 60mins execute once--&gt;</span><span class="comment">&lt;!-- 修改失败日志记录（可选）--&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="title">crontab</span> <span class="attribute">start</span>=<span class="value">"false"</span> <span class="attribute">schedule</span>=<span class="value">"600"</span>&gt;</span><span class="comment">&lt;!--600mins--&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="title">crontabfilter</span> <span class="attribute">start</span>=<span class="value">"false"</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="title">exclude</span> <span class="attribute">expression</span>=<span class="value">"*.php"</span>&gt;</span><span class="tag">&lt;/<span class="title">exclude</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="title">exclude</span> <span class="attribute">expression</span>=<span class="value">"info/*"</span>&gt;</span><span class="tag">&lt;/<span class="title">exclude</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;/<span class="title">crontabfilter</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;/<span class="title">crontab</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="title">plugin</span> <span class="attribute">start</span>=<span class="value">"false"</span> <span class="attribute">name</span>=<span class="value">"command"</span>/&gt;</span></span><br><span class="line"> <span class="tag">&lt;/<span class="title">sersync</span>&gt;</span></span><br><span class="line"> </span><br><span class="line"> <span class="comment">&lt;!-- 下面这些有关于插件你可以忽略了 --&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="title">plugin</span> <span class="attribute">name</span>=<span class="value">"command"</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="title">param</span> <span class="attribute">prefix</span>=<span class="value">"/bin/sh"</span> <span class="attribute">suffix</span>=<span class="value">""</span> <span class="attribute">ignoreError</span>=<span class="value">"true"</span>/&gt;</span> <span class="comment">&lt;!--prefix /opt/tongbu/mmm.sh suffix--&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="title">filter</span> <span class="attribute">start</span>=<span class="value">"false"</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="title">include</span> <span class="attribute">expression</span>=<span class="value">"(.*)\.php"</span>/&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="title">include</span> <span class="attribute">expression</span>=<span class="value">"(.*)\.sh"</span>/&gt;</span></span><br><span class="line"> <span class="tag">&lt;/<span class="title">filter</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;/<span class="title">plugin</span>&gt;</span></span><br><span class="line"> </span><br><span class="line"> <span class="tag">&lt;<span class="title">plugin</span> <span class="attribute">name</span>=<span class="value">"socket"</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="title">localpath</span> <span class="attribute">watch</span>=<span class="value">"/home/demo"</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="title">deshost</span> <span class="attribute">ip</span>=<span class="value">"210.36.158.xxx"</span> <span class="attribute">port</span>=<span class="value">"8009"</span>/&gt;</span></span><br><span class="line"> <span class="tag">&lt;/<span class="title">localpath</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;/<span class="title">plugin</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="title">plugin</span> <span class="attribute">name</span>=<span class="value">"refreshCDN"</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="title">localpath</span> <span class="attribute">watch</span>=<span class="value">"/data0/htdocs/cdn.markdream.com/site/"</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="title">cdninfo</span> <span class="attribute">domainname</span>=<span class="value">"cdn.chinacache.com"</span> <span class="attribute">port</span>=<span class="value">"80"</span> <span class="attribute">username</span>=<span class="value">"xxxx"</span> <span class="attribute">passwd</span>=<span class="value">"xxxx"</span>/&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="title">sendurl</span> <span class="attribute">base</span>=<span class="value">"http://cdn.markdream.com/cms"</span>/&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="title">regexurl</span> <span class="attribute">regex</span>=<span class="value">"false"</span> <span class="attribute">match</span>=<span class="value">"cdn.markdream.com/site([/a-zA-Z0-9]*).cdn.markdream.com/images"</span>/&gt;</span></span><br><span class="line"> <span class="tag">&lt;/<span class="title">localpath</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;/<span class="title">plugin</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="title">head</span>&gt;</span></span><br></pre></td></tr></table></figure>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#运行sersync</span></span><br><span class="line">nohup /app/<span class="built_in">local</span>/sersync/sersync2 -r <span class="operator">-d</span> -o /app/<span class="built_in">local</span>/sersync/confxml.xml &gt;/app/<span class="built_in">local</span>/sersync/rsync.log <span class="number">2</span>&gt;&amp;<span class="number">1</span> &amp;</span><br><span class="line">nohup /app/<span class="built_in">local</span>/sersync/sersync2 -r <span class="operator">-d</span> -o /app/<span class="built_in">local</span>/sersync/img.xml &gt;/app/<span class="built_in">local</span>/sersync/img.log <span class="number">2</span>&gt;&amp;<span class="number">1</span> &amp;</span><br><span class="line"></span><br><span class="line"><span class="operator">-d</span>:启用守护进程模式</span><br><span class="line">-r:在监控前，将监控目录与远程主机用rsync命令推送一遍</span><br><span class="line">-n: 指定开启守护线程的数量，默认为<span class="number">10</span>个</span><br><span class="line">-o:指定配置文件，默认使用confxml.xml文件</span><br></pre></td></tr></table></figure>
<h2 id="GitHub源码仓库">GitHub源码仓库</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">file://E:\sersync   (<span class="number">0</span> folders, <span class="number">3</span> files, <span class="number">1.88</span> MB, <span class="number">1.88</span> MB <span class="keyword">in</span> total.)</span><br><span class="line">    inotify-tools-<span class="number">3.14</span>.tar.gz <span class="number">350.36</span> KB</span><br><span class="line">    rsync-<span class="number">3.1</span>.<span class="number">1</span>.tar.gz    <span class="number">869.26</span> KB</span><br><span class="line">    sersync2.<span class="number">5.4</span>_64bit_binary_stable_final.tar.gz <span class="number">710.24</span> KB</span><br></pre></td></tr></table></figure>
<p>sersync - <a href="https://github.com/wsgzao/sersync" target="_blank" rel="external">https://github.com/wsgzao/sersync</a></p>
]]></content>
    <summary type="html">
    <![CDATA[可靠高效的数据实时同步方式]]>
    
    </summary>
    
      <category term="学习 | Study" scheme="http://wsgzao.github.io/categories/%E5%AD%A6%E4%B9%A0-Study/"/>
    
  </entry>
  
  <entry>
    <title><![CDATA[SSH使用密钥登录并禁止口令登录实践]]></title>
    <link href="http://wsgzao.github.io/post/ssh/"/>
    <id>http://wsgzao.github.io/post/ssh/</id>
    <published>2015-08-13T04:18:44.000Z</published>
    <updated>2015-08-13T02:23:12.024Z</updated>
    <content type="html"><![CDATA[<p><img src="http://i.v2ex.co/zv9SM4PO.png" alt=""></p>
<h2 id="前言">前言</h2><p>无论是个人的VPS还是企业允许公网访问的服务器，如果开放22端口的SSH密码登录验证方式，被众多黑客暴力猜解捅破菊花也可能是经常发生的惨剧。企业可以通过防火墙来做限制，普通用户也可能借助修改22端口和强化弱口令等方式防护，但目前相对安全和简单的方案则是让SSH使用密钥登录并禁止口令登录。</p>
<blockquote>
<p>这是最相对安全的登录管理方式</p>
</blockquote>
<hr>
<h2 id="更新历史">更新历史</h2><p>2015年08月13日 - 增加Bash Shell自动修改脚本<br>2015年07月07日 - 初稿</p>
<p>阅读原文 - <a href="http://wsgzao.github.io/post/ssh/" target="_blank" rel="external">http://wsgzao.github.io/post/ssh/</a></p>
<p>扩展阅读</p>
<ul>
<li>SSH原理与运用 -  <a href="http://www.ruanyifeng.com/blog/2011/12/ssh_remote_login.html" target="_blank" rel="external">http://www.ruanyifeng.com/blog/2011/12/ssh_remote_login.html</a></li>
<li>Linode - <a href="https://www.linode.com/docs/networking/ssh/use-public-key-authentication-with-ssh" target="_blank" rel="external">https://www.linode.com/docs/networking/ssh/use-public-key-authentication-with-ssh</a></li>
</ul>
<hr>
<h2 id="生成PublicKey">生成PublicKey</h2><blockquote>
<p>建议设置并牢记passphrase密码短语，以Linux生成为例</p>
</blockquote>
<p>Linux：ssh-keygen -t rsa<br>[私钥 (id_rsa) 与公钥 (id_rsa.pub)]<br>Windows：SecurCRT/Xshell/PuTTY<br>[SSH-2 RSA 2048]</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">#生成SSH密钥对</span></span><br><span class="line">ssh-keygen -t rsa</span><br><span class="line"></span><br><span class="line">Generating public/private rsa key pair.</span><br><span class="line"><span class="comment">#建议直接回车使用默认路径</span></span><br><span class="line">Enter file <span class="keyword">in</span> <span class="built_in">which</span> to save the key (/root/.ssh/id_rsa): </span><br><span class="line"><span class="comment">#输入密码短语（留空则直接回车）</span></span><br><span class="line">Enter passphrase (empty <span class="keyword">for</span> no passphrase): </span><br><span class="line"><span class="comment">#重复密码短语</span></span><br><span class="line">Enter same passphrase again: </span><br><span class="line">Your identification has been saved <span class="keyword">in</span> /root/.ssh/id_rsa.</span><br><span class="line">Your public key has been saved <span class="keyword">in</span> /root/.ssh/id_rsa.pub.</span><br><span class="line">The key fingerprint is:</span><br><span class="line">aa:<span class="number">8</span>b:<span class="number">61</span>:<span class="number">13</span>:<span class="number">38</span>:ad:b5:<span class="number">49</span>:ca:<span class="number">51</span>:<span class="number">45</span>:b9:<span class="number">77</span>:e1:<span class="number">97</span>:e1 root@localhost.localdomain</span><br><span class="line">The key<span class="string">'s randomart image is:</span><br><span class="line">+--[ RSA 2048]----+</span><br><span class="line">|    .o.          |</span><br><span class="line">|    ..   . .     |</span><br><span class="line">|   .  . . o o    |</span><br><span class="line">| o.  . . o E     |</span><br><span class="line">|o.=   . S .      |</span><br><span class="line">|.*.+   .         |</span><br><span class="line">|o.*   .          |</span><br><span class="line">| . + .           |</span><br><span class="line">|  . o.           |</span><br><span class="line">+-----------------+</span></span><br></pre></td></tr></table></figure>
<h2 id="复制密钥对">复制密钥对</h2><blockquote>
<p>也可以手动在客户端建立目录和authorized_keys，注意修改权限</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">#复制公钥到无密码登录的服务器上,22端口改变可以使用下面的命令</span></span><br><span class="line"><span class="comment">#ssh-copy-id -i ~/.ssh/id_rsa.pub "-p 10022 user@server"</span></span><br><span class="line">ssh-copy-id -i ~/.ssh/id_rsa.pub root@<span class="number">192.168</span>.<span class="number">15.241</span></span><br></pre></td></tr></table></figure>
<h2 id="修改SSH配置文件">修改SSH配置文件</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#编辑sshd_config文件</span></span><br><span class="line">vi /etc/ssh/sshd_config</span><br><span class="line"></span><br><span class="line"><span class="comment">#禁用密码验证</span></span><br><span class="line">PasswordAuthentication no</span><br><span class="line"><span class="comment">#启用密钥验证</span></span><br><span class="line">RSAAuthentication yes</span><br><span class="line">PubkeyAuthentication yes</span><br><span class="line"><span class="comment">#指定公钥数据库文件</span></span><br><span class="line">AuthorsizedKeysFile .ssh/authorized_keys</span><br><span class="line"></span><br><span class="line">sed -i <span class="string">"s/^PasswordAuthentication.*/PasswordAuthentication no/g"</span> /etc/ssh/sshd_config</span><br><span class="line">sed -i <span class="string">"s/^#RSAAuthentication.*/RSAAuthentication yes/g"</span> /etc/ssh/sshd_config</span><br><span class="line">sed -i <span class="string">"s/^#PubkeyAuthentication.*/PubkeyAuthentication yes/g"</span> /etc/ssh/sshd_config</span><br><span class="line">sed -i <span class="string">"s/^#AuthorizedKeysFile.*/AuthorizedKeysFile .ssh\/authorized_keys/g"</span> /etc/ssh/sshd_config</span><br></pre></td></tr></table></figure>
<blockquote>
<p>重启SSH服务前建议多保留一个会话以防不测</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#RHEL/CentOS系统</span></span><br><span class="line">service sshd restart</span><br><span class="line"><span class="comment">#ubuntu系统</span></span><br><span class="line">service ssh restart</span><br><span class="line"><span class="comment">#debian系统</span></span><br><span class="line">/etc/init.d/ssh restart</span><br></pre></td></tr></table></figure>
<h2 id="手动增加管理用户">手动增加管理用户</h2><blockquote>
<p>可以在== 后加入用户注释标识方便管理</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">echo</span> <span class="string">'ssh-rsa XXXX'</span> &gt;&gt;/root/.ssh/authorized_keys</span><br><span class="line"></span><br><span class="line"><span class="comment"># 复查</span></span><br><span class="line">cat /root/.ssh/authorized_keys</span><br></pre></td></tr></table></figure>
]]></content>
    <summary type="html">
    <![CDATA[这是最相对安全的登录管理方式]]>
    
    </summary>
    
      <category term="学习 | Study" scheme="http://wsgzao.github.io/categories/%E5%AD%A6%E4%B9%A0-Study/"/>
    
  </entry>
  
  <entry>
    <title><![CDATA[GFW翻墙小结]]></title>
    <link href="http://wsgzao.github.io/post/fq/"/>
    <id>http://wsgzao.github.io/post/fq/</id>
    <published>2015-08-11T15:22:32.000Z</published>
    <updated>2015-08-11T07:18:26.383Z</updated>
    <content type="html"><![CDATA[<p><img src="http://i.v2ex.co/Ur503skA.jpeg" alt=""></p>
<h2 id="前言">前言</h2><p>政府无限的权力，都是大部分人自己放弃的。假货坑爹，让政府审核。孩子管不好，让政府关网吧。有人在微博骂我，让政府去删。房价太高，让政府去限购。我们的文化实在太独特，创造出了家长式威权政府，GFW 正是在这种背景下产生的，一个社会矛盾的终极调和器，最终生活不能自理的你每天做的每一件事情都要给政府审查一遍，以免伤害到其他同样生活不能自理的人。这是一个零和游戏，越和这样的用户打交道，越对未来持悲观态度，觉得 GFW 可能永远也不会消失，而墙内的这个局域网看起来还似乎生机勃勃的自成一体，真是让人绝望。</p>
<p>Via <a href="https://twitter.com/clowwindy" target="_blank" rel="external">@clowwindy</a> - <a href="https://www.v2ex.com/t/166417#reply121" target="_blank" rel="external">https://www.v2ex.com/t/166417#reply121</a></p>
<hr>
<h2 id="更新记录">更新记录</h2><p>2015年08月11日 - 移除GoAgentX，感谢@ohdarling<br>2015年08月06日 - 移除曲径，感谢两位前盛大创新院朋友做出的贡献，尊重你们的决定<br>2015年05月22日 - 移除所有Goagent项目，增加赛风/红杏/Shadowsocks免费账号<br>2015年03月08日 - fqrouter复活，新增免费方案百度浏览器<br>2015年02月07日 - 修改细节描述，避免误导大家<br>2015年02月03日 - 更换网址为f(翻)q(墙)，感谢fqrouter作者做出的贡献<br>2014年11月30日 - 完善内容，标注自用首选免费和付费翻墙方案<br>2014年08月24日 - 新增免费方案GoAgent+，付费方案商业版Shadowsocks<br>2014年06月15日 - 新增Buckyball浏览器，父亲节快乐<br>2014年06月13日 - 补充Mac/iOS方案<br>2014年06月12日 - 撰写初稿</p>
<p>阅读原文 - <a href="http://wsgzao.github.io/post/fq/" target="_blank" rel="external">http://wsgzao.github.io/post/fq/</a></p>
<p>扩展阅读</p>
<ul>
<li>Contributors - <a href="http://shadowsocks.org/en/about/contributors.html" target="_blank" rel="external">http://shadowsocks.org/en/about/contributors.html</a></li>
<li>科学上网利器 Shadowsocks 使用方法 - <a href="http://ttt.tt/150/" target="_blank" rel="external">http://ttt.tt/150/</a></li>
</ul>
<hr>
<h2 id="简单验证是否被墙">简单验证是否被墙</h2><blockquote>
<p>如果你不能访问以下网址，那恭喜你生活在墙的有效保护区内，关键字智能屏蔽效果如下</p>
</blockquote>
<p><a href="http://wsgzao.github.io/post/gfw-break/" target="_blank" rel="external">http://wsgzao.github.io/post/gfw-break/</a></p>
<hr>
<h2 id="免费方案">免费方案</h2><blockquote>
<p>各个平台的解决方案都不唯一，请认真阅读原文中的说明部分</p>
</blockquote>
<h3 id="百度浏览器">百度浏览器</h3><blockquote>
<p>你这么大摇大摆提供翻墙插件，真不用担心360菊(jǔ)爆(bào)吗？</p>
</blockquote>
<ul>
<li>【首选】看到百度浏览器团队介绍的最后一句话我才明白QQ浏览器为何扶不起</li>
<li>UC浏览器翻墙效果不佳还要背负面临政策风险，所以就不直接推荐了</li>
</ul>
<p><a href="http://liulanqi.baidu.com/about.html" target="_blank" rel="external">http://liulanqi.baidu.com/about.html</a></p>
<h3 id="Shadowsocks">Shadowsocks</h3><blockquote>
<p>A fast tunnel proxy that help you get through firewalls</p>
</blockquote>
<p><a href="https://github.com/clowwindy/shadowsocks-csharp" target="_blank" rel="external">https://github.com/clowwindy/shadowsocks-csharp</a></p>
<h3 id="Shadowsocks_免费账号">Shadowsocks 免费账号</h3><blockquote>
<p>感谢ishadowsocks团队分享</p>
</blockquote>
<p><a href="http://www.ishadowsocks.com/" target="_blank" rel="external">http://www.ishadowsocks.com/</a></p>
<h3 id="fqrouter">fqrouter</h3><blockquote>
<p>fqrouter重获新生啦，在设置中勾选测试版即可自动升级</p>
</blockquote>
<ul>
<li>【首选】Android翻墙方案，建议使用shadowsocks备用</li>
</ul>
<p><a href="http://www.zdfans.com/4565.html" target="_blank" rel="external">http://www.zdfans.com/4565.html</a></p>
<h3 id="赛风">赛风</h3><blockquote>
<p>作为免费翻墙的一种备用方案吧</p>
</blockquote>
<p><a href="http://www.zdfans.com/4114.html" target="_blank" rel="external">http://www.zdfans.com/4114.html</a></p>
<h3 id="OS_X">OS X</h3><blockquote>
<p>Shadowsocks GUI designed for OS X 10.8+, automatically configuring system proxy settings, with a GFWList PAC.</p>
</blockquote>
<ul>
<li>【首选】OS X翻墙方案</li>
</ul>
<p><a href="https://github.com/shadowsocks/shadowsocks-iOS/releases" target="_blank" rel="external">https://github.com/shadowsocks/shadowsocks-iOS/releases</a></p>
<h3 id="iOS">iOS</h3><blockquote>
<p>shadowsocks client for OSX and non-jailbroken iOS</p>
</blockquote>
<ul>
<li>【首选】iOS翻墙方案</li>
</ul>
<p><a href="https://github.com/shadowsocks/shadowsocks-iOS" target="_blank" rel="external">https://github.com/shadowsocks/shadowsocks-iOS</a></p>
<h3 id="Windows_Phone">Windows Phone</h3><ul>
<li>暂无直接方案，建议使用类似Shadowsocks的<code>Share over LAN</code>功能设置局域网代理</li>
</ul>
<hr>
<h2 id="付费方案">付费方案</h2><blockquote>
<p>请根据自身实际需求，睁大眼睛认真阅读各类网站说明后做出合理的选择</p>
</blockquote>
<h3 id="Shadowsocks商业版">Shadowsocks商业版</h3><blockquote>
<p>轻量级科学上网姿势，改变您的生活体验</p>
</blockquote>
<ul>
<li>【首选】由<a href="http://ttt.tt/about/" target="_blank" rel="external">@Showfom</a>运营</li>
<li>我已经在第一时间入坑高级版至2018年</li>
<li>信任.Trust，以下是我唯一的推荐链接</li>
</ul>
<p><a href="https://portal.shadowsocks.com/aff.php?aff=043" target="_blank" rel="external">https://portal.shadowsocks.com/aff.php?aff=043</a></p>
<h3 id="VPNso">VPNso</h3><blockquote>
<p>稳定靠谱，良好的口碑</p>
</blockquote>
<p><a href="http://www.vpnso.com/" target="_blank" rel="external">http://www.vpnso.com/</a></p>
<h3 id="红杏">红杏</h3><blockquote>
<p>虽然需要依赖Chrome，但毕竟价格便宜，使用起来简单粗暴</p>
</blockquote>
<p><a href="http://blog.honx.in/" target="_blank" rel="external">http://blog.honx.in/</a></p>
]]></content>
    <summary type="html">
    <![CDATA[介绍简单可依赖的翻墙方案]]>
    
    </summary>
    
      <category term="软件 | Soft" scheme="http://wsgzao.github.io/categories/%E8%BD%AF%E4%BB%B6-Soft/"/>
    
  </entry>
  
  <entry>
    <title><![CDATA[sysctl.conf学习和调优]]></title>
    <link href="http://wsgzao.github.io/post/sysctl/"/>
    <id>http://wsgzao.github.io/post/sysctl/</id>
    <published>2015-08-11T07:42:19.000Z</published>
    <updated>2015-08-11T07:51:47.297Z</updated>
    <content type="html"><![CDATA[<p><img src="//i.v2ex.co/jS8VtmPl.jpeg" alt=""></p>
<h2 id="前言">前言</h2><p>记得第一次接触<code>/etc/security/limits.conf</code>和<code>/etc/sysctl.conf</code>时是因为部署Oracle时要按需修改内核参数。limits.conf文件实际是Linux PAM（插入式认证模块，Pluggable Authentication Modules）中 pam_limits.so 的配置文件，突破系统的默认限制，对系统访问资源有一定保护作用。 limits.conf 和sysctl.conf区别在于limits.conf是针对用户，而sysctl.conf是针对整个系统参数配置。 </p>
<blockquote>
<p>调整limits.conf和sysctl.conf参数是有必要的</p>
</blockquote>
<hr>
<h2 id="更新历史">更新历史</h2><p>2015年08月10日 - 初稿</p>
<p>阅读原文 - <a href="http://wsgzao.github.io/post/sysctl/" target="_blank" rel="external">http://wsgzao.github.io/post/sysctl/</a></p>
<p>扩展阅读</p>
<p>设置Sysctl.conf用以提高Linux的性能(最完整的sysctl.conf优化方案) - <a href="http://blog.csdn.net/21aspnet/article/details/6584792" target="_blank" rel="external">http://blog.csdn.net/21aspnet/article/details/6584792</a><br>limits.conf工作原理 - <a href="http://my.oschina.net/987openlab/blog/94634" target="_blank" rel="external">http://my.oschina.net/987openlab/blog/94634</a><br>ulimit命令 - <a href="http://man.linuxde.net/ulimit" target="_blank" rel="external">http://man.linuxde.net/ulimit</a><br>Sysctl学习 - <a href="http://pengyao.org/sysctl-1.html" target="_blank" rel="external">http://pengyao.org/sysctl-1.html</a><br>Kernel sysctl configuration file for Linux - <a href="https://klaver.it/linux/sysctl.conf" target="_blank" rel="external">https://klaver.it/linux/sysctl.conf</a><br>LTMP索引 - <a href="http://wsgzao.github.io/index/#LTMP" target="_blank" rel="external">http://wsgzao.github.io/index/#LTMP</a></p>
<hr>
<h2 id="原理">原理</h2><h3 id="limits-conf工作原理">limits.conf工作原理</h3><p>limits.conf是<code>pam_limits.so</code>的配置文件，然后<code>/etc/pam.d/</code>下的应用程序调用<code>pam_***.so</code>模块。譬如说，当用户访问服务器，服务程序将请求发送到PAM模块，PAM模块根据服务名称在<code>/etc/pam.d</code>目录下选择一个对应的服务文件，然后根据服务文件的内容选择具体的PAM模块进行处理。</p>
<h3 id="limits-conf文件格式">limits.conf文件格式</h3><pre><code>username|@groupname   <span class="built_in">type</span>  resource  <span class="built_in">limit</span> 
</code></pre><p>1）username|@groupname<br>设置需要被限制的用户名，组名前面加@和用户名区别。也可用通配符*来做所有用户的限制 </p>
<p>2）type<br>类型有soft，hard 和 -，其中 soft 指的是当前系统生效的设置值。hard 表明系统中所能设定的最大值。soft 的限制不能比 hard 限制高。用 - 就表明同时设置了 soft 和 hard 的值 </p>
<p>3）resource： 表示要限制的资源</p>
<ol>
<li>nofile - 打开文件的最大数目 </li>
<li>noproc - 进程的最大数目 </li>
</ol>
<h3 id="ulimit命令">ulimit命令</h3><blockquote>
<p>ulimit命令用来限制系统用户对shell资源的访问，常用参数解释如下</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">ulimit</span>(选项)</span><br><span class="line"></span><br><span class="line"><span class="operator">-a</span>：显示目前资源限制的设定；</span><br><span class="line">-c &lt;core文件上限&gt;：设定core文件的最大值，单位为区块；</span><br><span class="line"><span class="operator">-d</span> &lt;数据节区大小&gt;：程序数据节区的最大值，单位为KB；</span><br><span class="line"><span class="operator">-f</span> &lt;文件大小&gt;：shell所能建立的最大文件，单位为区块；</span><br><span class="line">-H：设定资源的硬性限制，也就是管理员所设下的限制；</span><br><span class="line">-m &lt;内存大小&gt;：指定可使用内存的上限，单位为KB；</span><br><span class="line">-n &lt;文件数目&gt;：指定同一时间最多可开启的文件数；</span><br><span class="line">-p &lt;缓冲区大小&gt;：指定管道缓冲区的大小，单位<span class="number">512</span>字节；</span><br><span class="line"><span class="operator">-s</span> &lt;堆叠大小&gt;：指定堆叠的上限，单位为KB；</span><br><span class="line">-S：设定资源的弹性限制；</span><br><span class="line">-t &lt;CPU时间&gt;：指定CPU使用时间的上限，单位为秒；</span><br><span class="line">-u &lt;程序数目&gt;：用户最多可开启的程序数目；</span><br><span class="line">-v &lt;虚拟内存大小&gt;：指定可使用的虚拟内存上限，单位为KB。</span><br></pre></td></tr></table></figure>
<h3 id="sysctl-conf工作原理">sysctl.conf工作原理</h3><p>sysctl命令被用于在内核运行时动态地修改内核的运行参数，可用的内核参数在目录<code>/proc/sys</code>中。它包含一些TCP/IP堆栈和虚拟内存系统的高级选项， 这可以让有经验的管理员提高引人注目的系统性能。用sysctl可以读取设置超过五百个系统变量。</p>
<h2 id="配置">配置</h2><h3 id="limits-conf设置">limits.conf设置</h3><p>1）暂时生效，适用于通过 <code>ulimit</code> 命令登录 shell 会话期间</p>
<pre><code><span class="built_in">ulimit</span> -SHn <span class="number">65535</span>
</code></pre><p>2）永久生效，通过将一个相应的 ulimit 语句添加到由登录 shell 读取的文件之一（例如 ~/.profile），即特定于 shell 的用户资源文件；或者通过编辑<code>/etc/security/limits.conf</code></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#比如添加到/etc/profile</span></span><br><span class="line"><span class="built_in">echo</span> <span class="built_in">ulimit</span> -SHn <span class="number">65535</span> &gt;&gt; /etc/profile</span><br><span class="line"><span class="built_in">source</span> /etc/profile</span><br><span class="line"></span><br><span class="line"><span class="comment">#修改最大进程和最大文件打开数限制</span></span><br><span class="line">vi /etc/security/limits.conf</span><br><span class="line">* soft nproc <span class="number">11000</span></span><br><span class="line">* hard nproc <span class="number">11000</span></span><br><span class="line">* soft nofile <span class="number">655350</span></span><br><span class="line">* hard nofile <span class="number">655350</span></span><br></pre></td></tr></table></figure>
<h3 id="sysctl-conf设置">sysctl.conf设置</h3><blockquote>
<p>这是一个在网络上流传依旧的sysctl.conf优化配置</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#优化TCP</span></span><br><span class="line">vi /etc/sysctl.conf</span><br><span class="line"><span class="comment">#禁用包过滤功能 </span></span><br><span class="line">net.ipv4.ip_forward = <span class="number">0</span>  </span><br><span class="line"><span class="comment">#启用源路由核查功能 </span></span><br><span class="line">net.ipv4.conf.default.rp_filter = <span class="number">1</span>  </span><br><span class="line"><span class="comment">#禁用所有IP源路由 </span></span><br><span class="line">net.ipv4.conf.default.accept_<span class="built_in">source</span>_route = <span class="number">0</span>  </span><br><span class="line"><span class="comment">#使用sysrq组合键是了解系统目前运行情况，为安全起见设为0关闭</span></span><br><span class="line">kernel.sysrq = <span class="number">0</span>  </span><br><span class="line"><span class="comment">#控制core文件的文件名是否添加pid作为扩展</span></span><br><span class="line">kernel.core_uses_pid = <span class="number">1</span>  </span><br><span class="line"><span class="comment">#开启SYN Cookies，当出现SYN等待队列溢出时，启用cookies来处理</span></span><br><span class="line">net.ipv4.tcp_syncookies = <span class="number">1</span>  </span><br><span class="line"><span class="comment">#每个消息队列的大小（单位：字节）限制</span></span><br><span class="line">kernel.msgmnb = <span class="number">65536</span>  </span><br><span class="line"><span class="comment">#整个系统最大消息队列数量限制</span></span><br><span class="line">kernel.msgmax = <span class="number">65536</span>  </span><br><span class="line"><span class="comment">#单个共享内存段的大小（单位：字节）限制，计算公式64G*1024*1024*1024(字节)</span></span><br><span class="line">kernel.shmmax = <span class="number">68719476736</span>  </span><br><span class="line"><span class="comment">#所有内存大小（单位：页，1页 = 4Kb），计算公式16G*1024*1024*1024/4KB(页)</span></span><br><span class="line">kernel.shmall = <span class="number">4294967296</span>  </span><br><span class="line"><span class="comment">#timewait的数量，默认是180000</span></span><br><span class="line">net.ipv4.tcp_max_tw_buckets = <span class="number">6000</span>  </span><br><span class="line"><span class="comment">#开启有选择的应答</span></span><br><span class="line">net.ipv4.tcp_sack = <span class="number">1</span>  </span><br><span class="line"><span class="comment">#支持更大的TCP窗口. 如果TCP窗口最大超过65535(64K), 必须设置该数值为1</span></span><br><span class="line">net.ipv4.tcp_window_scaling = <span class="number">1</span>  </span><br><span class="line"><span class="comment">#TCP读buffer</span></span><br><span class="line">net.ipv4.tcp_rmem = <span class="number">4096</span> <span class="number">131072</span> <span class="number">1048576</span></span><br><span class="line"><span class="comment">#TCP写buffer</span></span><br><span class="line">net.ipv4.tcp_wmem = <span class="number">4096</span> <span class="number">131072</span> <span class="number">1048576</span>   </span><br><span class="line"><span class="comment">#为TCP socket预留用于发送缓冲的内存默认值（单位：字节）</span></span><br><span class="line">net.core.wmem_default = <span class="number">8388608</span></span><br><span class="line"><span class="comment">#为TCP socket预留用于发送缓冲的内存最大值（单位：字节）</span></span><br><span class="line">net.core.wmem_max = <span class="number">16777216</span>  </span><br><span class="line"><span class="comment">#为TCP socket预留用于接收缓冲的内存默认值（单位：字节）  </span></span><br><span class="line">net.core.rmem_default = <span class="number">8388608</span></span><br><span class="line"><span class="comment">#为TCP socket预留用于接收缓冲的内存最大值（单位：字节）</span></span><br><span class="line">net.core.rmem_max = <span class="number">16777216</span></span><br><span class="line"><span class="comment">#每个网络接口接收数据包的速率比内核处理这些包的速率快时，允许送到队列的数据包的最大数目</span></span><br><span class="line">net.core.netdev_max_backlog = <span class="number">262144</span>  </span><br><span class="line"><span class="comment">#web应用中listen函数的backlog默认会给我们内核参数的net.core.somaxconn限制到128，而nginx定义的NGX_LISTEN_BACKLOG默认为511，所以有必要调整这个值</span></span><br><span class="line">net.core.somaxconn = <span class="number">262144</span>  </span><br><span class="line"><span class="comment">#系统中最多有多少个TCP套接字不被关联到任何一个用户文件句柄上。这个限制仅仅是为了防止简单的DoS攻击，不能过分依靠它或者人为地减小这个值，更应该增加这个值(如果增加了内存之后)</span></span><br><span class="line">net.ipv4.tcp_max_orphans = <span class="number">3276800</span>  </span><br><span class="line"><span class="comment">#记录的那些尚未收到客户端确认信息的连接请求的最大值。对于有128M内存的系统而言，缺省值是1024，小内存的系统则是128</span></span><br><span class="line">net.ipv4.tcp_max_syn_backlog = <span class="number">262144</span>  </span><br><span class="line"><span class="comment">#时间戳可以避免序列号的卷绕。一个1Gbps的链路肯定会遇到以前用过的序列号。时间戳能够让内核接受这种“异常”的数据包。这里需要将其关掉</span></span><br><span class="line">net.ipv4.tcp_timestamps = <span class="number">0</span>  </span><br><span class="line"><span class="comment">#为了打开对端的连接，内核需要发送一个SYN并附带一个回应前面一个SYN的ACK。也就是所谓三次握手中的第二次握手。这个设置决定了内核放弃连接之前发送SYN+ACK包的数量</span></span><br><span class="line">net.ipv4.tcp_synack_retries = <span class="number">1</span>  </span><br><span class="line"><span class="comment">#在内核放弃建立连接之前发送SYN包的数量</span></span><br><span class="line">net.ipv4.tcp_syn_retries = <span class="number">1</span>  </span><br><span class="line"><span class="comment">#开启TCP连接中time_wait sockets的快速回收</span></span><br><span class="line">net.ipv4.tcp_tw_recycle = <span class="number">1</span>  </span><br><span class="line"><span class="comment">#开启TCP连接复用功能，允许将time_wait sockets重新用于新的TCP连接（主要针对time_wait连接）</span></span><br><span class="line">net.ipv4.tcp_tw_reuse = <span class="number">1</span>  </span><br><span class="line"><span class="comment">#1st低于此值,TCP没有内存压力,2nd进入内存压力阶段,3rdTCP拒绝分配socket(单位：内存页)</span></span><br><span class="line">net.ipv4.tcp_mem = <span class="number">94500000</span> <span class="number">915000000</span> <span class="number">927000000</span>   </span><br><span class="line"><span class="comment">#如果套接字由本端要求关闭，这个参数决定了它保持在FIN-WAIT-2状态的时间。对端可以出错并永远不关闭连接，甚至意外当机。缺省值是60 秒。2.2 内核的通常值是180秒，你可以按这个设置，但要记住的是，即使你的机器是一个轻载的WEB服务器，也有因为大量的死套接字而内存溢出的风险，FIN- WAIT-2的危险性比FIN-WAIT-1要小，因为它最多只能吃掉1.5K内存，但是它们的生存期长些。</span></span><br><span class="line">net.ipv4.tcp_fin_timeout = <span class="number">15</span>  </span><br><span class="line"><span class="comment">#表示当keepalive起用的时候，TCP发送keepalive消息的频度（单位：秒）</span></span><br><span class="line">net.ipv4.tcp_keepalive_time = <span class="number">30</span>  </span><br><span class="line"><span class="comment">#对外连接端口范围</span></span><br><span class="line">net.ipv4.ip_<span class="built_in">local</span>_port_range = <span class="number">2048</span> <span class="number">65000</span></span><br><span class="line"><span class="comment">#表示文件句柄的最大数量</span></span><br><span class="line">fs.file-max = <span class="number">102400</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p>这是我在实际生产系统自动化部署中用的配置</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Kernel sysctl configuration file for Red Hat Linux</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># For binary values, 0 is disabled, 1 is enabled.  See sysctl(8) and</span></span><br><span class="line"><span class="comment"># sysctl.conf(5) for more details.</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Controls IP packet forwarding</span></span><br><span class="line">net.ipv4.ip_forward = <span class="number">0</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Controls source route verification</span></span><br><span class="line">net.ipv4.conf.default.rp_filter = <span class="number">1</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Do not accept source routing</span></span><br><span class="line">net.ipv4.conf.default.accept_<span class="built_in">source</span>_route = <span class="number">0</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Controls the System Request debugging functionality of the kernel</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Controls whether core dumps will append the PID to the core filename.</span></span><br><span class="line"><span class="comment"># Useful for debugging multi-threaded applications.</span></span><br><span class="line">kernel.core_uses_pid = <span class="number">1</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Controls the use of TCP syncookies</span></span><br><span class="line">net.ipv4.tcp_syncookies = <span class="number">1</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Disable netfilter on bridges.</span></span><br><span class="line">net.bridge.bridge-nf-call-ip6tables = <span class="number">0</span></span><br><span class="line">net.bridge.bridge-nf-call-iptables = <span class="number">0</span></span><br><span class="line">net.bridge.bridge-nf-call-arptables = <span class="number">0</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Controls the default maxmimum size of a mesage queue</span></span><br><span class="line">kernel.msgmnb = <span class="number">65536</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Controls the maximum size of a message, in bytes</span></span><br><span class="line">kernel.msgmax = <span class="number">65536</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Controls the maximum shared segment size, in bytes</span></span><br><span class="line">kernel.shmmax = <span class="number">68719476736</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Controls the maximum number of shared memory segments, in pages</span></span><br><span class="line">kernel.shmall = <span class="number">4294967296</span></span><br><span class="line">net.ipv4.conf.all.send_redirects = <span class="number">0</span></span><br><span class="line">net.ipv4.conf.default.send_redirects = <span class="number">0</span></span><br><span class="line">net.ipv4.conf.all.secure_redirects = <span class="number">0</span></span><br><span class="line">net.ipv4.conf.default.secure_redirects = <span class="number">0</span></span><br><span class="line">net.ipv4.conf.all.accept_redirects = <span class="number">0</span></span><br><span class="line">net.ipv4.conf.default.accept_redirects = <span class="number">0</span></span><br><span class="line">net.ipv4.conf.all.send_redirects = <span class="number">0</span></span><br><span class="line">net.ipv4.conf.default.send_redirects = <span class="number">0</span></span><br><span class="line">net.ipv4.conf.all.secure_redirects = <span class="number">0</span></span><br><span class="line">net.ipv4.conf.default.secure_redirects = <span class="number">0</span></span><br><span class="line">net.ipv4.conf.all.accept_redirects = <span class="number">0</span></span><br><span class="line">net.ipv4.conf.default.accept_redirects = <span class="number">0</span></span><br><span class="line">net.netfilter.nf_conntrack_max = <span class="number">1000000</span></span><br><span class="line">kernel.unknown_nmi_panic = <span class="number">0</span></span><br><span class="line">kernel.sysrq = <span class="number">0</span></span><br><span class="line">fs.file-max = <span class="number">1000000</span></span><br><span class="line">vm.swappiness = <span class="number">10</span></span><br><span class="line">fs.inotify.max_user_watches = <span class="number">10000000</span></span><br><span class="line">net.core.wmem_max = <span class="number">327679</span></span><br><span class="line">net.core.rmem_max = <span class="number">327679</span></span><br><span class="line">net.ipv4.conf.all.send_redirects = <span class="number">0</span></span><br><span class="line">net.ipv4.conf.default.send_redirects = <span class="number">0</span></span><br><span class="line">net.ipv4.conf.all.secure_redirects = <span class="number">0</span></span><br><span class="line">net.ipv4.conf.default.secure_redirects = <span class="number">0</span></span><br><span class="line">net.ipv4.conf.all.accept_redirects = <span class="number">0</span></span><br><span class="line">net.ipv4.conf.default.accept_redirects = <span class="number">0</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p>最后记得刷新立即生效，关于LTMP的搭建可以参考 - <a href="http://wsgzao.github.io/post/ltmp/" target="_blank" rel="external">http://wsgzao.github.io/post/ltmp/</a></p>
</blockquote>
<pre><code><span class="regexp">/sbin/</span>sysctl -p
</code></pre>]]></content>
    <summary type="html">
    <![CDATA[调整limits.conf和sysctl.conf参数是有必要的]]>
    
    </summary>
    
      <category term="学习 | Study" scheme="http://wsgzao.github.io/categories/%E5%AD%A6%E4%B9%A0-Study/"/>
    
  </entry>
  
  <entry>
    <title><![CDATA[XtraBackup不停机不锁表搭建MySQL主从同步实践]]></title>
    <link href="http://wsgzao.github.io/post/xtrabackup/"/>
    <id>http://wsgzao.github.io/post/xtrabackup/</id>
    <published>2015-08-07T07:42:19.000Z</published>
    <updated>2015-08-07T07:49:38.449Z</updated>
    <content type="html"><![CDATA[<p><img src="//i.v2ex.co/02ftb7pa.jpeg" alt=""></p>
<h2 id="前言">前言</h2><p>Percona XtraBackup可以说是一个相对完美的免费开源数据备份工具，支持在线无锁表同步复制和可并行高效率的安全备份恢复机制相比<code>mysqldump</code>来说确实让人眼前一亮，与<code>MySQL Enterprise Backup(InnoDB Hot Backup)</code>的功能对比可以参考扩展阅读。当然我们在实际运维过程中都应针对不同的业务需求分析和选择合适的备份恢复方案，这篇文章就是针对MySQL多实例且一个实例对应多个database的情况，实现MySQL在线不停机不锁表的主从同步，日后再继续更新分享基于<code>XtraBackup</code>的其它实用技能。</p>
<blockquote>
<p>XtraBackup是目前首选的备份方案之一</p>
</blockquote>
<hr>
<h2 id="更新历史">更新历史</h2><p>2015年08月07日 - 初稿</p>
<p>阅读原文 - <a href="http://wsgzao.github.io/post/xtrabackup/" target="_blank" rel="external">http://wsgzao.github.io/post/xtrabackup/</a></p>
<p>扩展阅读</p>
<p>Percona XtraBackup - <a href="https://www.percona.com/software/mysql-database/percona-xtrabackup" target="_blank" rel="external">https://www.percona.com/software/mysql-database/percona-xtrabackup</a><br>MySQL 5.6 Reference Manual :: 17 Replication - <a href="http://dev.mysql.com/doc/refman/5.6/en/replication.html" target="_blank" rel="external">http://dev.mysql.com/doc/refman/5.6/en/replication.html</a><br>基于Xtrabackup的物理备份解决方案预研 - <a href="http://tencentdba.com/blog/pre-research-on-physical-backup-using-xtrabakcup/" target="_blank" rel="external">http://tencentdba.com/blog/pre-research-on-physical-backup-using-xtrabakcup/</a><br>xtrabackup 详解 - <a href="http://www.cnblogs.com/gomysql/p/3650645.html" target="_blank" rel="external">http://www.cnblogs.com/gomysql/p/3650645.html</a><br>LTMP索引 - <a href="http://wsgzao.github.io/index/#LTMP" target="_blank" rel="external">http://wsgzao.github.io/index/#LTMP</a></p>
<hr>
<h2 id="原理">原理</h2><h3 id="MySQL主从同步原理">MySQL主从同步原理</h3><p>MySQL主从同步是在MySQL主从复制(Master-Slave Replication)基础上实现的，通过设置在Master MySQL上的binlog(使其处于打开状态)，Slave MySQL上通过一个I/O线程从Master MySQL上读取binlog，然后传输到Slave MySQL的中继日志中，然后Slave MySQL的SQL线程从中继日志中读取中继日志，然后应用到Slave MySQL的数据库中。这样实现了主从数据同步功能。</p>
<h3 id="XtraBackup备份原理">XtraBackup备份原理</h3><p>innobackupex在后台线程不断追踪InnoDB的日志文件，然后复制InnoDB的数据文件。数据文件复制完成之后，日志的复制线程也会结束。这样就得到了不在同一时间点的数据副本和开始备份以后的事务日志。完成上面的步骤之后，就可以使用InnoDB崩溃恢复代码执行事务日志（redo log），以达到数据的一致性。<br>备份分为两个过程：</p>
<ol>
<li>backup，备份阶段，追踪事务日志和复制数据文件（物理备份）。</li>
<li>preparing，重放事务日志，使所有的数据处于同一个时间点，达到一致性状态。</li>
</ol>
<h3 id="XtraBackup的优点">XtraBackup的优点</h3><ol>
<li>可以快速可靠的完成数据备份（复制数据文件和追踪事务日志）</li>
<li>数据备份过程中不会中断事务的处理（热备份）</li>
<li>节约磁盘空间和网络带宽</li>
<li>自动完成备份鉴定</li>
<li>因更快的恢复时间而提高在线时间</li>
</ol>
<h2 id="配置">配置</h2><h3 id="准备工作">准备工作</h3><blockquote>
<p>MySQL步骤和my.cnf配置参考LTMP - <a href="http://wsgzao.github.io/post/ltmp/" target="_blank" rel="external">http://wsgzao.github.io/post/ltmp/</a></p>
</blockquote>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">#原有主数据库版本</span><br><span class="line">mysql -V</span><br><span class="line">mysql  Ver 14.14 Distrib 5.5.31, for Linux (x86_64) using readline 5.1</span><br><span class="line"></span><br><span class="line">#迁移从数据库版本</span><br><span class="line">mysql -V</span><br><span class="line">mysql  Ver 14.14 Distrib 5.6.25, for linux-glibc2.5 (x86_64) using  EditLine wrapper</span><br><span class="line"></span><br><span class="line">#检查数据库引擎</span><br><span class="line"><span class="operator"><span class="keyword">show</span> <span class="keyword">engines</span>;</span></span><br><span class="line"></span><br><span class="line">+<span class="comment">--------------------+---------+----------------------------------------------------------------+--------------+------+------------+</span></span><br><span class="line">| Engine             | Support | Comment                                                        | Transactions | XA   | Savepoints |</span><br><span class="line">+<span class="comment">--------------------+---------+----------------------------------------------------------------+--------------+------+------------+</span></span><br><span class="line">| MRG_MYISAM         | YES     | Collection of identical MyISAM tables                          | NO           | NO   | NO         |</span><br><span class="line">| CSV                | YES     | CSV storage engine                                             | NO           | NO   | NO         |</span><br><span class="line">| MyISAM             | YES     | MyISAM storage engine                                          | NO           | NO   | NO         |</span><br><span class="line">| BLACKHOLE          | YES     | /dev/null storage engine (anything you write to it disappears) | NO           | NO   | NO         |</span><br><span class="line">| MEMORY             | YES     | Hash based, stored in memory, useful for temporary tables      | NO           | NO   | NO         |</span><br><span class="line">| InnoDB             | DEFAULT | Supports transactions, row-level locking, and foreign keys     | YES          | YES  | YES        |</span><br><span class="line">| ARCHIVE            | YES     | Archive storage engine                                         | NO           | NO   | NO         |</span><br><span class="line">| PERFORMANCE_SCHEMA | YES     | Performance Schema                                             | NO           | NO   | NO         |</span><br><span class="line">| FEDERATED          | NO      | Federated MySQL storage engine                                 | NULL         | NULL | NULL       |</span><br><span class="line">+<span class="comment">--------------------+---------+----------------------------------------------------------------+--------------+------+------------+</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#主从数据库同步注意点</span><br><span class="line">[mysqld]</span><br><span class="line">#主从之间的id不能相同</span><br><span class="line">server-id</span><br><span class="line">#启用二进制日志</span><br><span class="line">log-bin</span><br><span class="line">#一般在从库开启（可选）</span><br><span class="line">read_only</span><br><span class="line">#推荐使用InnoDB并做好相关配置</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#检查主从数据库状态</span><br><span class="line">mysql -S /tmp/mysql.sock -e "<span class="operator"><span class="keyword">show</span> <span class="keyword">global</span> <span class="keyword">variables</span> <span class="keyword">like</span> <span class="string">'server_id'</span>;</span>"</span><br><span class="line">+<span class="comment">---------------+-------+</span></span><br><span class="line">| Variable_name | Value |</span><br><span class="line">+<span class="comment">---------------+-------+</span></span><br><span class="line">| server_id     | 1     |</span><br><span class="line">+<span class="comment">---------------+-------+</span></span><br><span class="line"></span><br><span class="line">mysql -S /tmp/mysql.sock -e "<span class="operator"><span class="keyword">show</span> <span class="keyword">global</span> <span class="keyword">variables</span> <span class="keyword">like</span> <span class="string">'log_bin'</span>;</span>"</span><br><span class="line">+<span class="comment">---------------+-------+</span></span><br><span class="line">| Variable_name | Value |</span><br><span class="line">+<span class="comment">---------------+-------+</span></span><br><span class="line">| log_bin       | ON    |</span><br><span class="line">+<span class="comment">---------------+-------+</span></span><br></pre></td></tr></table></figure>
<h3 id="安装percona-xtrabackup">安装percona-xtrabackup</h3><blockquote>
<p>一般推荐rpm安装 - <a href="https://www.percona.com/downloads/XtraBackup/LATEST/" target="_blank" rel="external">https://www.percona.com/downloads/XtraBackup/LATEST/</a></p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">yum -y install perl perl-devel libaio libaio-devel perl-Time-HiRes perl-DBD-MySQL</span><br><span class="line"><span class="comment">#rpm -ivh percona-xtrabackup-2.2.12-1.el6.x86_64.rpm </span></span><br><span class="line">rpm -Uvh percona-xtrabackup-<span class="number">2.2</span>.<span class="number">12</span>-<span class="number">1</span>.el6.x86_64.rpm</span><br></pre></td></tr></table></figure>
<h3 id="备份和恢复">备份和恢复</h3><blockquote>
<p>通常一般都直接使用innobackupex，因为它能同时备份InnoDB和MyISAM引擎的表<br>重点关注Slave_IO_Running和Slave_SQL_Runningd的状态是否为YES</p>
</blockquote>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">#备份</span><br><span class="line">innobackupex <span class="comment">--socket=/usr/local/var/mysql2/mysql2.sock --user=root --password --defaults-file=/etc/mysqld_multi.cnf --parallel=4 --database=passport /tmp/backup</span></span><br><span class="line">#保持事务一致性</span><br><span class="line">innobackupex <span class="comment">--socket=/usr/local/var/mysql2/mysql2.sock --user=root --password --defaults-file=/etc/mysqld_multi.cnf --database=passport --apply-log /tmp/backup/2015-08-05_16-08-14</span></span><br><span class="line">#传输</span><br><span class="line">scp -r /tmp/<span class="operator"><span class="keyword">backup</span>/<span class="number">2015</span>-<span class="number">08</span>-<span class="number">05</span>_16-<span class="number">08</span>-<span class="number">14</span> <span class="number">10.10</span><span class="number">.16</span><span class="number">.24</span>:/tmp/<span class="keyword">backup</span>/ </span><br><span class="line">#恢复</span><br><span class="line">innobackupex <span class="comment">--socket=/tmp/mysql.sock --user=root --password --defaults-file=/app/local/mysql/my.cnf --copy-back /tmp/backup/2015-08-05_16-08-14/</span></span><br><span class="line">#还原权限</span><br><span class="line">chown -R mysql:mysql /app/<span class="keyword">data</span>/mysql/<span class="keyword">data</span></span><br><span class="line">service mysqld <span class="keyword">start</span></span><br><span class="line">/app/<span class="keyword">local</span>/mysql/scripts/mysql_install_db <span class="comment">--basedir=/app/local/mysql --datadir=/app/data/mysql/data --no-defaults --skip-name-resolve --user=mysql</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#主库授权同步帐号</span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">DISTINCT</span> <span class="keyword">CONCAT</span>(<span class="string">'User: '''</span>,<span class="keyword">user</span>,<span class="string">'''@'''</span>,host,<span class="string">''';'</span>) <span class="keyword">AS</span> <span class="keyword">query</span> <span class="keyword">FROM</span> mysql.<span class="keyword">user</span>;</span></span><br><span class="line"><span class="operator"><span class="keyword">GRANT</span> REPLICATION <span class="keyword">SLAVE</span> <span class="keyword">ON</span> *.* <span class="keyword">TO</span> <span class="string">'slave_passport'</span>@<span class="string">'10.10.16.24'</span> <span class="keyword">IDENTIFIED</span> <span class="keyword">BY</span> <span class="string">'slave_passport'</span>;</span></span><br><span class="line"><span class="operator"><span class="keyword">FLUSH</span> <span class="keyword">PRIVILEGES</span>;</span></span><br><span class="line"></span><br><span class="line">#从库开启同步</span><br><span class="line">cat /tmp/<span class="operator"><span class="keyword">backup</span>/<span class="number">2015</span>-<span class="number">08</span>-<span class="number">05</span>_16-<span class="number">08</span>-<span class="number">14</span>/xtrabackup_binlog_info </span><br><span class="line">mysql-<span class="keyword">bin</span><span class="number">.002599</span>    <span class="number">804497686</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">CHANGE</span> <span class="keyword">MASTER</span> <span class="keyword">TO</span></span><br><span class="line">MASTER_HOST=<span class="string">'10.10.16.51'</span>,</span><br><span class="line">MASTER_USER=<span class="string">'slave_passport'</span>,</span><br><span class="line">MASTER_PASSWORD=<span class="string">'slave_passport'</span>,</span><br><span class="line">MASTER_PORT=<span class="number">3307</span>,</span><br><span class="line">MASTER_LOG_FILE=<span class="string">'mysql-bin.002599'</span>,</span><br><span class="line">MASTER_LOG_POS=<span class="number">804497686</span>;</span></span><br><span class="line"></span><br><span class="line">#开启主从同步</span><br><span class="line"><span class="operator"><span class="keyword">start</span> <span class="keyword">slave</span>;</span></span><br><span class="line">#查看从库状态</span><br><span class="line"><span class="operator"><span class="keyword">show</span> <span class="keyword">slave</span> <span class="keyword">status</span>\ G</span><br><span class="line">#从库的检查参数</span><br><span class="line">Slave_IO_Running=Yes</span><br><span class="line">Slave_SQL_Running=Yes</span><br><span class="line"></span><br><span class="line">#主库的检查参数</span><br><span class="line"><span class="keyword">show</span> <span class="keyword">master</span> <span class="keyword">status</span> \G</span><br><span class="line"></span><br><span class="line">+<span class="comment">------------------+-----------+--------------+------------------+</span></span><br><span class="line">| File             | <span class="keyword">Position</span>  | Binlog_Do_DB | Binlog_Ignore_DB |</span><br><span class="line">+<span class="comment">------------------+-----------+--------------+------------------+</span></span><br><span class="line">| mysql-<span class="keyword">bin</span><span class="number">.002600</span> | <span class="number">454769337</span> |              |                  |</span><br><span class="line">+<span class="comment">------------------+-----------+--------------+------------------+</span></span><br><span class="line"><span class="number">1</span> <span class="keyword">row</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">show</span> <span class="keyword">processlist</span>;</span></span><br><span class="line"></span><br><span class="line">Master has sent all binlog to slave; waiting for binlog to be updated</span><br></pre></td></tr></table></figure>
<h3 id="MySQL主从切换">MySQL主从切换</h3><blockquote>
<p>切换前断开主库访问连接观察进程状态，无写操作后再停止从库IO_THREAD进行切换</p>
</blockquote>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">#查看主库状态</span><br><span class="line"><span class="operator"><span class="keyword">show</span> <span class="keyword">processlist</span>;</span></span><br><span class="line">Master has sent all binlog to slave; waiting for binlog to be updated</span><br><span class="line"><span class="operator"><span class="keyword">show</span> <span class="keyword">master</span> <span class="keyword">status</span> \G</span><br><span class="line"></span><br><span class="line">#从库停止 IO_THREAD 线程</span><br><span class="line"><span class="keyword">stop</span> <span class="keyword">slave</span> IO_THREAD;</span></span><br><span class="line"><span class="operator"><span class="keyword">show</span> <span class="keyword">processlist</span>;</span></span><br><span class="line">Slave has read all relay log; waiting for the slave I/O thread to <span class="operator"><span class="keyword">update</span> it</span><br><span class="line"><span class="keyword">show</span> <span class="keyword">slave</span> <span class="keyword">status</span> \G</span><br><span class="line"></span><br><span class="line">#从库切换为主库</span><br><span class="line"><span class="keyword">stop</span> <span class="keyword">slave</span>;</span></span><br><span class="line"><span class="operator"><span class="keyword">reset</span> <span class="keyword">master</span>;</span></span><br><span class="line"><span class="operator"><span class="keyword">reset</span> <span class="keyword">slave</span> <span class="keyword">all</span>;</span></span><br><span class="line"><span class="operator"><span class="keyword">show</span> <span class="keyword">master</span> <span class="keyword">status</span> \G</span><br><span class="line"></span><br><span class="line">#激活帐户</span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">DISTINCT</span> <span class="keyword">CONCAT</span>(<span class="string">'User: '''</span>,<span class="keyword">user</span>,<span class="string">'''@'''</span>,host,<span class="string">''';'</span>) <span class="keyword">AS</span> <span class="keyword">query</span> <span class="keyword">FROM</span> mysql.<span class="keyword">user</span>;</span></span><br><span class="line"><span class="operator"><span class="keyword">GRANT</span> REPLICATION <span class="keyword">SLAVE</span> <span class="keyword">ON</span> *.* <span class="keyword">TO</span> <span class="string">'slave_passport'</span>@<span class="string">'10.10.16.51'</span> <span class="keyword">IDENTIFIED</span> <span class="keyword">BY</span> <span class="string">'slave_passport'</span>;</span></span><br><span class="line"><span class="operator"><span class="keyword">FLUSH</span> <span class="keyword">PRIVILEGES</span>;</span></span><br><span class="line"></span><br><span class="line">#切换原有主库为从库</span><br><span class="line"><span class="operator"><span class="keyword">reset</span> <span class="keyword">master</span>;</span></span><br><span class="line"><span class="operator"><span class="keyword">reset</span> <span class="keyword">slave</span> <span class="keyword">all</span>;</span></span><br><span class="line"></span><br><span class="line"><span class="operator"><span class="keyword">CHANGE</span> <span class="keyword">MASTER</span> <span class="keyword">TO</span></span><br><span class="line">MASTER_HOST=<span class="string">'10.10.16.24'</span>,</span><br><span class="line">MASTER_USER=<span class="string">'slave_passport'</span>,</span><br><span class="line">MASTER_PASSWORD=<span class="string">'slave_passport'</span>,</span><br><span class="line">MASTER_PORT=<span class="number">3306</span>,</span><br><span class="line">MASTER_LOG_FILE=<span class="string">'mysql-bin.000001'</span>,</span><br><span class="line">MASTER_LOG_POS=<span class="number">804497686</span>;</span></span><br><span class="line"></span><br><span class="line">#检查主库</span><br><span class="line"><span class="operator"><span class="keyword">SHOW</span> <span class="keyword">PROCESSLIST</span>;</span></span><br><span class="line"><span class="operator"><span class="keyword">show</span> <span class="keyword">master</span> <span class="keyword">status</span> \G</span><br><span class="line"></span><br><span class="line">#启动从库</span><br><span class="line"><span class="keyword">SHOW</span> <span class="keyword">PROCESSLIST</span>;</span></span><br><span class="line"><span class="operator"><span class="keyword">start</span> <span class="keyword">slave</span>;</span></span><br><span class="line"><span class="operator"><span class="keyword">show</span> <span class="keyword">slave</span> <span class="keyword">status</span> \G</span></span><br></pre></td></tr></table></figure>
<h3 id="常见问题">常见问题</h3><blockquote>
<p>Slave_SQL_Running:No</p>
</blockquote>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">#一般是事务回滚造成的</span><br><span class="line"><span class="operator"><span class="keyword">stop</span> <span class="keyword">slave</span>;</span></span><br><span class="line"><span class="operator"><span class="keyword">set</span> <span class="keyword">GLOBAL</span> SQL_SLAVE_SKIP_COUNTER=<span class="number">1</span>;</span></span><br><span class="line"><span class="operator"><span class="keyword">start</span> <span class="keyword">slave</span>;</span></span><br></pre></td></tr></table></figure>
]]></content>
    <summary type="html">
    <![CDATA[XtraBackup是目前首选的备份方案之一]]>
    
    </summary>
    
      <category term="学习 | Study" scheme="http://wsgzao.github.io/categories/%E5%AD%A6%E4%B9%A0-Study/"/>
    
  </entry>
  
  <entry>
    <title><![CDATA[Windows常用软件推荐]]></title>
    <link href="http://wsgzao.github.io/post/windows/"/>
    <id>http://wsgzao.github.io/post/windows/</id>
    <published>2015-08-05T16:05:27.000Z</published>
    <updated>2015-08-05T15:44:31.321Z</updated>
    <content type="html"><![CDATA[<p><img src="http://i.v2ex.co/l6zV1ws3.jpeg" alt=""></p>
<h2 id="前言">前言</h2><p>很多人都认为我是计算机高手，其实我只会帮你修理下你的电脑啦，曾几何时我也帮助过好多好多的同学和老师，尝试和体验各种各样的软件，但谁又能想到我曾今也对你们的电脑做过很多失败的坑爹操作，把你们最宝贵的数据撸得灰飞烟灭，这里要感谢当时允许我不断尝试失败的大白鼠 @王纪华 tommy(249033945)，使我养成了发散思维、逆向思维和创造性思维的解决问题之道。作为一名非职业HelpDesk，我一定不是最最优秀的那一群技术大牛，但我也努力超越了99.99%的从业者，Because I just love and enjoy thinking to do better and better.</p>
<p>如果你认同<code>高效，实用</code>的软件使用理念就跟着我走吧，让我们一起寻找<code>适合自己的好用软件</code>。</p>
<blockquote>
<p>长期更新此文以督促自己的懒惰，我要用佳软改变你一生的习惯。</p>
</blockquote>
<hr>
<h2 id="更新记录">更新记录</h2><p>2015年08月06日 - 增加Ditto, mRemoteNG, SocksCap64, SwitchHosts<br>2015年08月04日 - 增加StartIsBack++, Clover, Cmd Markdown, JetBrains<br>2015年05月29日 - 增加AnyDesk，COW，替换QQ拼音纯净版为百度输入法<br>2015年04月16日 - 增加Listary，Bandisoft，Adobe Acrobat DC，Auto CAD 2016<br>2015年03月31日 - 增加微PE，有道云协作，自同步<br>2015年03月05日 - 正式更名为Windows常用软件推荐，统一日志标题和链接<br>2015年02月24日 - 替换TrueCrypt为VeraCrypt，增加易数一键还原，百度电脑专家<br>2015年02月20日 - 剥离Mac和Android部分<br>2014年11月12日 - 增加Win10，3DM运行库，网易云音乐，好奇心日报，调整部分链接和描述<br>2014年08月26日 - 引导部分原版链接至第三方Mod修改版(绿色精简)<br>2014年08月13日 - 增加DirectX Repair，EaseUS Data Recovery Wizard和Mac专题<br>2014年08月12日 - 精简优化分离内容，转化为Markdown书写<br>2014年06月02日 - 更新猎豹免费WiFi和猎豹清理大师<br>2014年04月15日 - 更新Windows 8.1 With Update和一小波翻墙工具并调整部分软件推荐<br>2014年03月18日 - 更新TeamViewer 9，Sublime 3，读知乎<br>2014年03月07日 - 新增雅虎天气，更新Office2013 With SP1等其它软件版本及评语<br>2014年01月20日 - 更新部分软件评语，新增专业软件部分之文件传输专题<br>2013年12月27日 - 手机浏览器回归QQ浏览器，更新部分软件版本和推荐优先级<br>2013年12月03日 - 更新部分软件版本，新增专业软件部分之文本处理专题<br>2013年11月28日 - 更新大批软件版本，新增福昕风腾PDF，StartIsBackPlus，高德地图<br>2013年11月21日 - PE更换为IT天空 SKYPE<br>2013年11月03日 - 增加专业软件部分之网络穿透专题<br>2013年10月08日 - 简单看图制图类工具更换为QQ影像<br>2013年10月04日 - 手机浏览器更换为傲游及链接文字描述等细节<br>2013年09月21日 - 精细化内容<br>2013年09月19日 - 完善内容<br>2013年09月07日 - 补充专业软件部分<br>2013年08月29日 - 微调精炼语法<br>2013年08月28日 - 优化下语句和措辞<br>2013年08月27日 - 增加Software List For Android<br>2013年08月26日 - 增加OS部分<br>2013年08月25日 - 补充特色推荐部分<br>2013年08月24日 - 常用软件部分基本结束<br>2013年08月23日 - 补充内容<br>2013年08月22日 - 补充内容<br>2013年08月21日 - 梳理框架</p>
<p>阅读原文 - <a href="http://wsgzao.github.io/post/windows/" target="_blank" rel="external">http://wsgzao.github.io/post/windows/</a></p>
<p>扩展阅读</p>
<ul>
<li>小众软件 - <a href="http://love.appinn.com/" target="_blank" rel="external">http://love.appinn.com/</a></li>
<li>善用佳软 - <a href="http://xbeta.info/" target="_blank" rel="external">http://xbeta.info/</a></li>
<li>zd423 - <a href="http://www.zdfans.com/" target="_blank" rel="external">http://www.zdfans.com/</a></li>
<li>Apps索引 - <a href="http://wsgzao.github.io/index/#Apps" target="_blank" rel="external">http://wsgzao.github.io/index/#Apps</a></li>
</ul>
<hr>
<h2 id="Windows_Operating_System">Windows Operating System</h2><blockquote>
<p>重装系统建议谨慎行事，丢失数据可是很蛋疼的一件事哦</p>
</blockquote>
<p>Windows 7 - <a href="http://www.zdfans.com/4922.html" target="_blank" rel="external">http://www.zdfans.com/4922.html</a></p>
<ul>
<li>普通用户建议稳定在Win7</li>
<li>怀有好奇心的朋友可考虑向Win10迈进</li>
<li>玩游戏和办公需求高者请勿尝鲜</li>
</ul>
<p>Windows 10 - <a href="http://www.zdfans.com/5671.html" target="_blank" rel="external">http://www.zdfans.com/5671.html</a></p>
<ul>
<li>Windows 10强势回归</li>
</ul>
<p>Ghost - <a href="http://songyongzhi.blog.163.com/" target="_blank" rel="external">http://songyongzhi.blog.163.com/</a></p>
<ul>
<li>偷懒请认准Ghost，ESD会慢慢成为新的标准</li>
<li>安装方式建议【U盘引导+移动硬盘安装】</li>
</ul>
<p>Others - <a href="http://msdn.itellyou.cn/" target="_blank" rel="external">http://msdn.itellyou.cn/</a></p>
<ul>
<li>简单直接的微软原版资源下载渠道</li>
</ul>
<p>U盘装机助理 - <a href="http://www.itiankong.net/forum-usbzl-1.html" target="_blank" rel="external">http://www.itiankong.net/forum-usbzl-1.html</a></p>
<ul>
<li>作者频繁的更新速度深深的折磨着我幼小的心灵</li>
</ul>
<p>微PE - <a href="http://www.wepe.com.cn/" target="_blank" rel="external">http://www.wepe.com.cn/</a></p>
<ul>
<li>感谢前通用PE作者@李培聪的付出，祝你创业顺利哈</li>
</ul>
<hr>
<h2 id="Software_List_For_Windows">Software List For Windows</h2><h3 id="特色推荐">特色推荐</h3><p>Listary -  <a href="http://www.listary.com/" target="_blank" rel="external">http://www.listary.com/</a></p>
<ul>
<li>如果Mac下的Alfred作为排名第一的效率工具类神器，那你还在犹豫什么呢，必装</li>
<li>我也从Launchy转投Listary，可以和Everything/Total Commander相辅相成</li>
</ul>
<p>ADSafe广告管家 - <a href="http://www.ad-safe.com/" target="_blank" rel="external">http://www.ad-safe.com/</a></p>
<ul>
<li>去网页，弹窗，视频40s等待广告就是如此简单</li>
<li>发现上网异常请自觉停用此类去广告软件</li>
</ul>
<p>Http File Server - <a href="http://pan.baidu.com/s/1i3u0vGx" target="_blank" rel="external">http://pan.baidu.com/s/1i3u0vGx</a></p>
<ul>
<li>十分方便的HTTP文件共享服务器</li>
<li>Mod By 随波</li>
</ul>
<h3 id="压缩解压缩">压缩解压缩</h3><p>好压 - <a href="http://haozip.2345.com/" target="_blank" rel="external">http://haozip.2345.com/</a></p>
<ul>
<li>简单方便，自带虚拟光驱</li>
<li>WinRAR，7zip，360压缩也许都很优秀，但我相信自己体验后做出的选择</li>
</ul>
<p>Bandizip - <a href="http://www.bandisoft.com/bandizip" target="_blank" rel="external">http://www.bandisoft.com/bandizip</a></p>
<ul>
<li>Bandisoft出品，轻巧、快速、免费的压缩软件</li>
</ul>
<h3 id="图像浏览处理">图像浏览处理</h3><p>2345看图王 - <a href="http://pic.2345.com/" target="_blank" rel="external">http://pic.2345.com/</a></p>
<ul>
<li>速度最快的看图软件</li>
<li>ACDSee臃肿，Picasa乏力，专业制图请使用PS</li>
</ul>
<p>Honeyview - <a href="http://www.bandisoft.com/honeyview/" target="_blank" rel="external">http://www.bandisoft.com/honeyview/</a></p>
<ul>
<li>也是Bandisoft家族出品，速度惊人的图像浏览器</li>
</ul>
<p>Faststone Capture - <a href="http://www.portablesoft.org/faststone-capture/" target="_blank" rel="external">http://www.portablesoft.org/faststone-capture/</a></p>
<ul>
<li>截图神器+录屏工具</li>
<li>我也不反对大家使用QQ截图哈</li>
</ul>
<p>Adobe Photoshop - <a href="http://www.flighty.cn/html/soft/20141016_263.html" target="_blank" rel="external">http://www.flighty.cn/html/soft/20141016_263.html</a></p>
<ul>
<li>专业制图利器</li>
<li>Mod By 轻狂志</li>
</ul>
<h3 id="文字办公">文字办公</h3><p>Microsoft Office 2013 With SP1 - <a href="http://pan.baidu.com/s/1i343Bql" target="_blank" rel="external">http://pan.baidu.com/s/1i343Bql</a></p>
<ul>
<li>整合Visio &amp; Project</li>
<li>普通用户请下载x86版本</li>
<li>金山WPS格式兼容性不佳建议在移动端使用</li>
</ul>
<p>Microsoft Office 2007 - <a href="http://pan.baidu.com/share/link?shareid=966283776&amp;uk=1157904223" target="_blank" rel="external">http://pan.baidu.com/share/link?shareid=966283776&amp;uk=1157904223</a></p>
<ul>
<li>Office 2007 SP3中英双语VOL集成</li>
<li>整合Visio &amp; Project</li>
<li>已完美激活建议求稳者安装</li>
</ul>
<p>MathType - <a href="http://fengqingwuhen.blog.163.com/blog/static/17747406320141019104445935/" target="_blank" rel="external">http://fengqingwuhen.blog.163.com/blog/static/17747406320141019104445935/</a></p>
<ul>
<li>最佳数学公式编辑器</li>
</ul>
<p>福昕风腾PDF套件金山版 - <a href="http://pan.baidu.com/s/17qSRE" target="_blank" rel="external">http://pan.baidu.com/s/17qSRE</a></p>
<ul>
<li>优秀的个人免费PDF阅读软件</li>
<li>简单小巧够用</li>
</ul>
<p>Adobe Acrobat - <a href="http://pan.baidu.com/s/1sj5aaSl" target="_blank" rel="external">http://pan.baidu.com/s/1sj5aaSl</a></p>
<ul>
<li>需要使用专业功能朋友还是坚持Acrobat吧</li>
</ul>
<h3 id="浏览器">浏览器</h3><p>Maxthon傲游 - <a href="http://www.maxthon.cn/" target="_blank" rel="external">http://www.maxthon.cn/</a></p>
<ul>
<li>被搜狗，360极速，金山猎豹，百度浏览器依次挑战，但依旧努力改变着世界</li>
</ul>
<p>Google Chrome - <a href="http://chrome.google.com/" target="_blank" rel="external">http://chrome.google.com/</a></p>
<ul>
<li>简洁的界面和精益求精的内核是核心</li>
<li>插件丰富，版本飙得够快</li>
</ul>
<h3 id="输入法">输入法</h3><p>百度输入法 - <a href="http://shurufa.baidu.com" target="_blank" rel="external">http://shurufa.baidu.com</a></p>
<ul>
<li>百度输入法尊重用户体验成功上位，全平台统一已成定局</li>
<li>可惜腾和搜狗已然忘记研发输入法的初心，唉~</li>
</ul>
<h3 id="安全防护">安全防护</h3><p>腾讯电脑管家 - <a href="http://guanjia.qq.com" target="_blank" rel="external">http://guanjia.qq.com</a></p>
<ul>
<li>刷个存在感</li>
</ul>
<p>金山毒霸 - <a href="http://www.ijinshan.com/" target="_blank" rel="external">http://www.ijinshan.com/</a></p>
<ul>
<li>金山一直很努力</li>
<li>猎豹系列很出色</li>
</ul>
<p>360安全中心 - <a href="http://www.360.cn/" target="_blank" rel="external">http://www.360.cn/</a></p>
<ul>
<li>用户体验和技术实力毋庸置疑</li>
<li>我不喜欢周鸿祎yī靠打压对手的流氓商业模式</li>
<li>360已经在安全领域形成垄断优势</li>
</ul>
<p>百度电脑专家 - <a href="http://zhuanjia.baidu.com/" target="_blank" rel="external">http://zhuanjia.baidu.com/</a></p>
<ul>
<li>360和腾讯都有电脑修复，但唯独百度解决了很多实际问题</li>
<li>百度卫士和杀毒还需要努力啊</li>
</ul>
<h3 id="媒体处理">媒体处理</h3><p>QQ影音 - <a href="http://player.qq.com/" target="_blank" rel="external">http://player.qq.com/</a></p>
<ul>
<li>全能，轻巧，无广告</li>
<li>PotPlayer或许是目前最佳的播放器</li>
</ul>
<p>QQ音乐 - <a href="http://music.qq.com/" target="_blank" rel="external">http://music.qq.com/</a></p>
<ul>
<li>我办理了绿钻</li>
</ul>
<p>网易云音乐 - <a href="http://music.163.com" target="_blank" rel="external">http://music.163.com</a></p>
<ul>
<li>网易再一次用优秀的产品体验为自己赢得了口碑</li>
</ul>
<p>完美解码 - <a href="http://jm.wmzhe.com/" target="_blank" rel="external">http://jm.wmzhe.com/</a></p>
<ul>
<li>高清全能解码播放</li>
<li>视频制作需要</li>
</ul>
<p>格式工厂 - <a href="http://www.zdfans.com/1072.html" target="_blank" rel="external">http://www.zdfans.com/1072.html</a></p>
<ul>
<li>经常音视频转码必备之一吧</li>
</ul>
<h3 id="下载工具">下载工具</h3><p>QQ旋风 - <a href="http://xf.qq.com/" target="_blank" rel="external">http://xf.qq.com/</a></p>
<ul>
<li>界面清爽，回归下载本质</li>
<li>如今浏览器自带下载也足矣</li>
</ul>
<p>迅雷 - <a href="http://vip.xunlei.com/fast_xl/" target="_blank" rel="external">http://vip.xunlei.com/fast_xl/</a></p>
<ul>
<li>产品本身很优秀</li>
<li>恭喜IPO成功，期待和小米的整合组建智能家庭</li>
</ul>
<h3 id="聊天通信">聊天通信</h3><p>QQ - <a href="http://im.qq.com/" target="_blank" rel="external">http://im.qq.com/</a></p>
<ul>
<li>我办理了QQ会员</li>
</ul>
<p>飞信 - <a href="http://feixin.10086.cn/" target="_blank" rel="external">http://feixin.10086.cn/</a></p>
<ul>
<li>群发短信，微信改变了我们的生活，4G的时代短信将离我们远去</li>
<li>只剩免费的短信报警作用吧</li>
</ul>
<p>Skype - <a href="http://www.skype.com/" target="_blank" rel="external">http://www.skype.com/</a></p>
<ul>
<li>MSN再见了因为不思进取，Skype不要走老路啊</li>
</ul>
<h3 id="词典翻译">词典翻译</h3><p>有道词典 - <a href="http://cidian.youdao.com/" target="_blank" rel="external">http://cidian.youdao.com/</a></p>
<ul>
<li>越做越强，短期内无人能超越</li>
<li>金山词霸和必应词典看移动端吧</li>
</ul>
<h3 id="邮件客户端">邮件客户端</h3><p>Foxmail - <a href="http://foxmail.com.cn/" target="_blank" rel="external">http://foxmail.com.cn/</a></p>
<ul>
<li>入职后的第一件事就是收发邮件</li>
<li>个人日常在线邮箱建议使用QQ邮箱</li>
<li>投简历还是无奈选择Gmail</li>
</ul>
<h3 id="文本编辑器">文本编辑器</h3><p>NotePad2 - <a href="http://pan.baidu.com/s/1qWkb1q0" target="_blank" rel="external">http://pan.baidu.com/s/1qWkb1q0</a></p>
<ul>
<li>差个tab标签，建议替换自带记事本</li>
<li>Mod By zhfi</li>
</ul>
<p>Sublime Text - <a href="http://pan.baidu.com/share/home?uk=3693847658#category/type=0" target="_blank" rel="external">http://pan.baidu.com/share/home?uk=3693847658#category/type=0</a></p>
<ul>
<li>无比性感的编辑器，</li>
<li>建议补充搭配使用</li>
</ul>
<p>UEStudio -  <a href="http://hrtsea.com/?s=UEStudio" target="_blank" rel="external">http://hrtsea.com/?s=UEStudio</a></p>
<ul>
<li>专业强大的文本编辑器</li>
<li>略显臃肿</li>
</ul>
<p>Cmd Markdown - <a href="http://www.zybuluo.com/mdeditor" target="_blank" rel="external">http://www.zybuluo.com/mdeditor</a></p>
<ul>
<li>Markdown简洁的语法可以辅助你书写更有质量的文章</li>
<li>作业部落推出客户端啦</li>
</ul>
<h3 id="数据同步共享">数据同步共享</h3><p>金山快盘 - <a href="http://www.kuaipan.cn/" target="_blank" rel="external">http://www.kuaipan.cn/</a></p>
<ul>
<li>百度网盘统一文件共享，360不时捅其菊花，金山不断深耕协同办公，腾讯继续保持蛋疼状态</li>
</ul>
<p>Evernote - <a href="http://www.evernote.com/" target="_blank" rel="external">http://www.evernote.com/</a></p>
<ul>
<li>笔记类应用除了onenote我只认可它</li>
<li>建议搭配金山快盘和Evernote，提高工作效率</li>
</ul>
<p>有道云协作 - <a href="http://note.youdao.com/groupintro.html" target="_blank" rel="external">http://note.youdao.com/groupintro.html</a></p>
<ul>
<li>跨平台支持多人实时协作，可以极大提升团队效率</li>
<li>虽然没有直接推荐有道云笔记但对于文字编辑类工作者来说整合使用还是很方便的</li>
</ul>
<p>FileGee - <a href="http://cn.filegee.com/" target="_blank" rel="external">http://cn.filegee.com/</a></p>
<ul>
<li>国内优秀的个人免费本地同步工具</li>
</ul>
<p>自同步 - <a href="http://www.zisync.com/" target="_blank" rel="external">http://www.zisync.com/</a></p>
<ul>
<li>局域网最高效的文件同步、共享工具</li>
</ul>
<h3 id="数据备份恢复">数据备份恢复</h3><p>易数一键还原 - <a href="http://www.onekeyrestore.cn/" target="_blank" rel="external">http://www.onekeyrestore.cn/</a></p>
<ul>
<li>以DiskGenius为内核开发，安全易用靠谱</li>
<li>同时推荐ORM一键还原系统</li>
</ul>
<p>DiskGenius -  <a href="http://pan.baidu.com/s/1kTj3b75" target="_blank" rel="external">http://pan.baidu.com/s/1kTj3b75</a></p>
<ul>
<li>国内磁盘分区和数据恢复的佼佼者</li>
<li>Mod By MyCrack</li>
</ul>
<p>EaseUS Data Recovery Wizard - <a href="http://www.0daydown.com/?s=EaseUS+Data+Recovery" target="_blank" rel="external">http://www.0daydown.com/?s=EaseUS+Data+Recovery</a></p>
<ul>
<li>原先是国产易我数据恢复，现在依旧犀利啊</li>
</ul>
<h3 id="数据加密">数据加密</h3><p>VeraCrypt -  <a href="http://sourceforge.net/projects/veracrypt/" target="_blank" rel="external">http://sourceforge.net/projects/veracrypt/</a></p>
<ul>
<li>替代TrueCrypt，不断修复安全漏洞</li>
<li>微软自带的 BitLocker 驱动器加密也足矣</li>
</ul>
<h3 id="快速启动">快速启动</h3><p>StartIsBack++ - <a href="http://www.zdfans.com/5573.html" target="_blank" rel="external">http://www.zdfans.com/5573.html</a></p>
<ul>
<li>最好用的开始菜单恢复软件</li>
</ul>
<p>Clover - <a href="http://ejie.me/" target="_blank" rel="external">http://ejie.me/</a></p>
<ul>
<li>为你的 Windows Explorer 插上翅膀</li>
<li>可惜作者不更新了，在Win10上会有一些小Bug</li>
</ul>
<p>Ditto - <a href="http://ditto-cp.sourceforge.net/" target="_blank" rel="external">http://ditto-cp.sourceforge.net/</a></p>
<ul>
<li>不可不用的精品免费Windows剪贴板增强小工具</li>
</ul>
<p>SwitchHosts - <a href="http://oldj.github.io/SwitchHosts/" target="_blank" rel="external">http://oldj.github.io/SwitchHosts/</a></p>
<ul>
<li>SwitchHosts! 是一个管理、切换多个 hosts 方案的工具</li>
<li>它是一个免费开源的软件，基于 wxPython 开发，可在 Windows/Linux/Mac 下运行</li>
</ul>
<h3 id="光盘刻录">光盘刻录</h3><p>Nero -  <a href="http://pan.baidu.com/share/link?shareid=1935729386&amp;uk=1157904223" target="_blank" rel="external">http://pan.baidu.com/share/link?shareid=1935729386&amp;uk=1157904223</a></p>
<ul>
<li>专注刻录，刻录时记得校验数据，别刻飞了</li>
</ul>
<p>UltraISO - <a href="http://www.zdfans.com/1397.html" target="_blank" rel="external">http://www.zdfans.com/1397.html</a></p>
<ul>
<li>作为经常折腾各类操作系统的人来说，它不可或缺</li>
</ul>
<h3 id="驱动运行库">驱动运行库</h3><p>万能驱动助理 - <a href="http://www.wandrv.com" target="_blank" rel="external">http://www.wandrv.com</a></p>
<ul>
<li>确实是装机必备的万能驱动包</li>
</ul>
<p>驱动精灵 - <a href="http://www.drivergenius.com/" target="_blank" rel="external">http://www.drivergenius.com/</a></p>
<ul>
<li>不重装电脑或者驱动异常，别没事升级驱动</li>
</ul>
<p>DirectX Repair - <a href="http://blog.csdn.net/vbcom/article/details/6962388" target="_blank" rel="external">http://blog.csdn.net/vbcom/article/details/6962388</a></p>
<ul>
<li>系统+游戏修复神器啊</li>
</ul>
<p>3DM游戏运行库 - <a href="http://bbs.3dmgame.com/thread-3551335-1-1.html" target="_blank" rel="external">http://bbs.3dmgame.com/thread-3551335-1-1.html</a></p>
<ul>
<li>集成32位和64位运行库，是目前互联网上最新最全的常用运行库合集</li>
</ul>
<h3 id="远程控制">远程控制</h3><p>TeamViewer - <a href="http://www.zdfans.com/789.html" target="_blank" rel="external">http://www.zdfans.com/789.html</a></p>
<ul>
<li>远程控制，内网穿透，VPN共享，跨平台</li>
<li>对个人免费，业界良心啊，QQ表示继续努力</li>
</ul>
<p>AnyDesk - <a href="http://anydesk.com/" target="_blank" rel="external">http://anydesk.com/</a></p>
<ul>
<li>远程控制效果或许会超出你的想象，作为TeamViewer备用方案</li>
</ul>
<p>向日葵 - <a href="http://sunlogin.oray.com/zh_CN/" target="_blank" rel="external">http://sunlogin.oray.com/zh_CN/</a></p>
<ul>
<li>硬是一种态度</li>
</ul>
<h3 id="Windows和Office激活">Windows和Office激活</h3><p>Windows Loader - <a href="http://forums.mydigitallife.info/forums/39-Windows-Loader" target="_blank" rel="external">http://forums.mydigitallife.info/forums/39-Windows-Loader</a></p>
<ul>
<li>几乎是万能的Windows NT6以上版本激活工具</li>
</ul>
<p>HEU KMS Activator - <a href="http://www.heu8.com/2752.html" target="_blank" rel="external">http://www.heu8.com/2752.html</a></p>
<ul>
<li>国人制作的本地KMS激活工具，可激活Windows NT6以上版本和Office 2010/2013</li>
</ul>
<p>KMS8 - <a href="http://pan.baidu.com/s/1jGknAv0" target="_blank" rel="external">http://pan.baidu.com/s/1jGknAv0</a></p>
<ul>
<li>国内知名KMS激活工具小马KMS8，简单小巧且拥有不俗的成功率</li>
</ul>
<hr>
<h2 id="Software_List_For_Windows_Professional">Software List For Windows Professional</h2><blockquote>
<p>大部分行业都有属于自己的专业工具，我这里仅结合实际列举较为实用的</p>
</blockquote>
<p>VMware Workstation -  <a href="http://www.zdfans.com/3847.html" target="_blank" rel="external">http://www.zdfans.com/3847.html</a></p>
<ul>
<li>我相信硬件性能过剩的趋势将驱使更多的人走近虚拟化，感受另一个奇妙的世界</li>
</ul>
<p>SecureCRT - <a href="http://www.portablesoft.org/securecrt-securefx-integrated/" target="_blank" rel="external">http://www.portablesoft.org/securecrt-securefx-integrated/</a></p>
<ul>
<li>专业的终端管理软件，Unix连接必备</li>
<li>免费版请用PuTTY或Xshell吧</li>
</ul>
<p>Adobe - <a href="http://yun.baidu.com/share/home?uk=1308988221" target="_blank" rel="external">http://yun.baidu.com/share/home?uk=1308988221</a></p>
<ul>
<li>Mod By liuhangtnnd</li>
</ul>
<p>Auto CAD - <a href="http://www.zdfans.com/4808.html" target="_blank" rel="external">http://www.zdfans.com/4808.html</a></p>
<ul>
<li>Mod By 珊瑚の海</li>
</ul>
<p>FreeMind - <a href="http://sourceforge.net/projects/freemind/" target="_blank" rel="external">http://sourceforge.net/projects/freemind/</a></p>
<ul>
<li>免费简单好用的思维脑图工具</li>
<li>XMind，Mindjet MindManager和Axure RP Pro或许更专业</li>
</ul>
<p>JetBrains - <a href="http://www.jetbrains.com/" target="_blank" rel="external">http://www.jetbrains.com/</a></p>
<ul>
<li>IntelliJ IDEA, PhpStorm, PyCharm, ReSharper等都是这家出品的</li>
</ul>
<h3 id="网络穿透专题">网络穿透专题</h3><blockquote>
<p>善用此类工具你可以穿透各类网络干你想干的事情</p>
</blockquote>
<p>CCProxy - <a href="http://www.ccproxy.com/" target="_blank" rel="external">http://www.ccproxy.com/</a></p>
<ul>
<li>最佳共享上网行为管理软件</li>
<li>与Teamviewer VPN协同二级代理穿透网络</li>
</ul>
<p>COW - <a href="https://github.com/cyfdecyf/cow" target="_blank" rel="external">https://github.com/cyfdecyf/cow</a></p>
<ul>
<li>COW 是一个简化穿墙的 HTTP 代理服务器</li>
</ul>
<p>Proxifier - <a href="http://pan.baidu.com/share/link?shareid=3076195103&amp;uk=1157904223" target="_blank" rel="external">http://pan.baidu.com/share/link?shareid=3076195103&amp;uk=1157904223</a></p>
<ul>
<li>让不支持代理的软件也能通，如mstsc</li>
</ul>
<p>Xmanager - <a href="http://www.0daydown.com/?s=Xmanager+" target="_blank" rel="external">http://www.0daydown.com/?s=Xmanager+</a></p>
<ul>
<li>利用Xmanager-Passive可以轻松映射图形化界面，Xshell、SecureCRT，PuTTY等都适用</li>
</ul>
<p>mRemoteNG - <a href="http://www.mremoteng.org/" target="_blank" rel="external">http://www.mremoteng.org/</a></p>
<ul>
<li>非常方便的3389管理工具，MobaXterm也是不错的选择</li>
<li>mRemoteNG is the next generation of mRemote, open source, tabbed, multi-protocol, remote connections manager.</li>
</ul>
<p>SocksCap64 - <a href="http://www.sockscap64.com/" target="_blank" rel="external">http://www.sockscap64.com/</a></p>
<ul>
<li>最好用的网络加速/Socks代理软件</li>
</ul>
<h3 id="文本处理专题">文本处理专题</h3><blockquote>
<p>本专题将重点解决日常办公中遇到的PDF转换，内容检索，ORC识别等专向领域</p>
</blockquote>
<p>Solid PDF Tools - <a href="http://www.ttrar.com/html/Solid-PDF-Tools.html" target="_blank" rel="external">http://www.ttrar.com/html/Solid-PDF-Tools.html</a></p>
<ul>
<li>最佳全能PDF转换、制作与编辑工具</li>
</ul>
<p>FileLocator Pro - <a href="http://www.portablesoft.org/filelocator-pro-portable/" target="_blank" rel="external">http://www.portablesoft.org/filelocator-pro-portable/</a></p>
<ul>
<li>最好的免索引全文搜索工具</li>
<li>文件检索请使用Everything</li>
</ul>
<p>ABBYY FineReader Corporate - <a href="http://www.ttrar.com/html/ABBYY-FineReader-Corporate.html" target="_blank" rel="external">http://www.ttrar.com/html/ABBYY-FineReader-Corporate.html</a></p>
<ul>
<li>世界第一的OCR软件!识别率英文120%!中文99%!这货是真的真的很强</li>
</ul>
<p>Beyond Compare - <a href="http://www.ttrar.com/html/Beyond-Compare.html" target="_blank" rel="external">http://www.ttrar.com/html/Beyond-Compare.html</a></p>
<ul>
<li>不可多得的专业级的文件夹和文件对比工具</li>
</ul>
<h3 id="文件传输专题">文件传输专题</h3><blockquote>
<p>本身这没有什么好介绍的，但是最近智能家庭的概念和各大互联网企业的动作让我看见某些市场前景，我这里简单预测下自己的判断。<br>迅雷的离线下载、云点播和百度云这两样”范云服务“产品将在未来的智能家庭硬件大战中起到关键性的作用，它们与其它产品如无线路由器，电视机的合作和融合将会彻底改变我们的生活方式，目前来看已经在改变。</p>
</blockquote>
<p>常用下载工具没有推荐 - ?</p>
<ul>
<li>无论是迅雷，QQ旋风，还是国外的IDM，EagleGet，最终应该转型为类似百度云这样的平台类应用</li>
</ul>
<p>WinSCP - <a href="http://winscp.net/eng/download.php" target="_blank" rel="external">http://winscp.net/eng/download.php</a></p>
<ul>
<li>个人认为是目前最佳的sftp和ftp传输工具，用户体验已超越FileZilla Client</li>
</ul>
<p>Serv-U - <a href="http://www.ttrar.com/html/Serv-U-FTP-Server-Platinum.html" target="_blank" rel="external">http://www.ttrar.com/html/Serv-U-FTP-Server-Platinum.html</a></p>
<ul>
<li>这也许是世界上最好的FTP服务器之一</li>
<li>如果觉得贵不妨尝试下国产的xlight</li>
</ul>
<p>FileZilla Server - <a href="https://filezilla-project.org/download.php?type=server" target="_blank" rel="external">https://filezilla-project.org/download.php?type=server</a></p>
<ul>
<li>Windows下的免费服务端就用这个吧</li>
<li>Unix一般用vsftpd或者ProFTPD较多，当然你也要考虑处理中文乱码</li>
</ul>
<hr>
<p>题图 - 移动先行，云优先   Mobile-First，Cloud-First</p>
]]></content>
    <summary type="html">
    <![CDATA[长期更新此文以督促自己的懒惰，我要用佳软改变你一生的习惯]]>
    
    </summary>
    
      <category term="软件 | Soft" scheme="http://wsgzao.github.io/categories/%E8%BD%AF%E4%BB%B6-Soft/"/>
    
  </entry>
  
  <entry>
    <title><![CDATA[苹果越狱小结]]></title>
    <link href="http://wsgzao.github.io/post/jailbreak/"/>
    <id>http://wsgzao.github.io/post/jailbreak/</id>
    <published>2015-08-03T13:35:54.000Z</published>
    <updated>2015-08-03T14:00:23.000Z</updated>
    <content type="html"><![CDATA[<p><img src="http://i.v2ex.co/dNgjdLEg.png" alt=""></p>
<h2 id="前言">前言</h2><p>本来一直都没有苹果的产品除了第一代的iPod(没怎么使用最后大学送人了 @李清纯(255270520) ，巧合的是老妈学校发了一台iPad mini Retina正好赶上mini第2代，也算是比较成熟的产品了就顺手撸过来仔细体验一把。本想像Android一样不用root(iOS称为Jailbreak越狱)也能安心使用，但手机习惯了魅族和小米的良好用户体验，iOS如此”严格”的限制对我这样一个喜欢追求自由舒爽简称“懒”的人来说真心不习惯，我们这次越狱的目的是为了让iOS系统用起来更加润滑，随着支付渠道的完善我也希望大家给予背后的开发者一些应有的正版支持。</p>
<blockquote>
<p>我们开始尊重版权并抵制盗版但不能否认自己也是盗版的受益者</p>
</blockquote>
<hr>
<h2 id="更新记录">更新记录</h2><p>2015年08月03日 - 更新iOS 8.4，真的还需要越狱么？<br>2015年02月02日 - 更新iOS 8.1.2<br>2014年07月20日 - 修改【iOS】文字错误，去除178盗版源<br>2014年07月18日 - 更新iOS 7.1.2和部分推荐插件<br>2014年02月06日 - 撰写初稿</p>
<p>阅读原文 - <a href="http://wsgzao.github.io/post/jailbreak/" target="_blank" rel="external">http://wsgzao.github.io/post/jailbreak/</a></p>
<hr>
<h2 id="基础信息">基础信息</h2><p>设备型号：iPad mini (Retina) Wi-Fi 16 GB (白色)<br>系统版本： <code>8.4</code></p>
<p>序列号：DQTLQWNTFCM8</p>
<p>苹果信息查询：<a href="http://www.25pp.com/xuliehao/" target="_blank" rel="external">http://www.25pp.com/xuliehao/</a></p>
<p>【备注】了解产品的背后信息很重要</p>
<h2 id="升级固件">升级固件</h2><p>选择支持设备越狱的版本，安装iTunes使用<code>Shift</code>+<code>鼠标左键</code>点击恢复</p>
<p><a href="http://jailbreak.25pp.com/gujian/" target="_blank" rel="external">http://jailbreak.25pp.com/gujian/</a></p>
<h2 id="Jailbreak-越狱">Jailbreak.越狱</h2><p>参照图文教程一步一步执行即可，So Easy</p>
<p><a href="http://jailbreak.25pp.com/" target="_blank" rel="external">http://jailbreak.25pp.com/</a></p>
<blockquote>
<p>唯一提醒1点，无论升级还是越狱，备份数据都是必须哒</p>
</blockquote>
<h2 id="越狱后插件推荐">越狱后插件推荐</h2><blockquote>
<p>添加Cydia软件源</p>
</blockquote>
<p><code>-&gt;打开Cydia-&gt;软件源-&gt;右上角编辑-&gt;左上角添加</code></p>
<pre><code><span class="string">http:</span><span class="comment">//apt.25pp.com</span>
</code></pre><blockquote>
<p>安装插件</p>
</blockquote>
<p><code>-&gt;打开Cydia-&gt;右下角搜索</code></p>
<p>【捆绑】PP助手</p>
<p>【必装】Apple File Conduit”2”</p>
<p>【推荐】百度输入法(iPad)</p>
<p>【推荐】SwitchSpring，任务切换时可以一键关闭所有应用</p>
<p>【推荐】Shadowsocks，简单的iOS翻墙方式</p>
]]></content>
    <summary type="html">
    <![CDATA[只为更加自由的使用iOS]]>
    
    </summary>
    
      <category term="生活 | Life" scheme="http://wsgzao.github.io/categories/%E7%94%9F%E6%B4%BB-Life/"/>
    
  </entry>
  
  <entry>
    <title><![CDATA[iptables配置实践]]></title>
    <link href="http://wsgzao.github.io/post/iptables/"/>
    <id>http://wsgzao.github.io/post/iptables/</id>
    <published>2015-07-24T07:52:17.000Z</published>
    <updated>2015-07-24T09:21:57.081Z</updated>
    <content type="html"><![CDATA[<p><img src="//i.v2ex.co/4WFXrnn2.png" alt=""></p>
<h2 id="前言">前言</h2><p>在大企业中防火墙角色主要交给硬件来支持，效果自然没话说只是需要增加一点点成本，但对于大多数个人或者互联网公司来说选择系统自带的<code>iptables</code>或者第三方云防火墙似乎是更加合适的选择，通过一些合理的优化和灵活的配置，我们也可以很轻松实现硬件防火墙的部分功能，够用就好。</p>
<blockquote>
<p>建立防火墙白名单机制很重要   </p>
</blockquote>
<hr>
<h2 id="更新历史">更新历史</h2><p>2015年07月24日 - 初稿</p>
<p>阅读原文 - <a href="http://wsgzao.github.io/post/iptables/" target="_blank" rel="external">http://wsgzao.github.io/post/iptables/</a></p>
<p>扩展阅读</p>
<p>防火墙与 NAT 服务器 - <a href="http://vbird.dic.ksu.edu.tw/linux_server/0250simple_firewall_3.php" target="_blank" rel="external">http://vbird.dic.ksu.edu.tw/linux_server/0250simple_firewall_3.php</a><br>Linux 防火墙和 iptables - <a href="http://liaoph.com/iptables/" target="_blank" rel="external">http://liaoph.com/iptables/</a></p>
<hr>
<h2 id="基础知识">基础知识</h2><blockquote>
<p>原理部分请参考扩展阅读</p>
</blockquote>
<h3 id="关闭iptables">关闭iptables</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">/etc/init.d/iptables stop</span><br><span class="line">chkconfig iptables off</span><br></pre></td></tr></table></figure>
<h3 id="基础语法">基础语法</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#规则的观察与清除</span></span><br><span class="line"></span><br><span class="line">     iptables [-t tables] [-L] [-nv]</span><br><span class="line"></span><br><span class="line">选项与参数：</span><br><span class="line">-t ：后面接 table ，例如 nat 或 filter ，若省略此项目，则使用默认的 filter</span><br><span class="line">-L ：列出目前的 table 的规则</span><br><span class="line">-n ：不进行 IP 与 HOSTNAME 的反查，显示讯息的速度会快很多！</span><br><span class="line">-v ：列出更多的信息，包括通过该规则的封包总位数、相关的网络接口等</span><br><span class="line"></span><br><span class="line">     iptables [-t tables] [-FXZ]</span><br><span class="line"></span><br><span class="line">选项与参数：</span><br><span class="line">-F ：清除所有的已订定的规则；</span><br><span class="line">-X ：杀掉所有使用者 <span class="string">"自定义"</span> 的 chain (应该说的是 tables ）啰；</span><br><span class="line">-Z ：将所有的 chain 的计数与流量统计都归零</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#封包的基础比对：IP, 网域及接口装置</span></span><br><span class="line"></span><br><span class="line">    iptables [-AI 链名] [-io 网络接口] [-p 协议] [<span class="operator">-s</span> 来源IP/网域] [<span class="operator">-d</span> 目标IP/网域] -j [ACCEPT|DROP|REJECT|LOG]</span><br><span class="line"></span><br><span class="line">选项与参数：</span><br><span class="line">-AI 链名：针对某的链进行规则的 <span class="string">"插入"</span> 或 <span class="string">"累加"</span></span><br><span class="line">    -A ：新增加一条规则，该规则增加在原本规则的最后面。例如原本已经有四条规则，</span><br><span class="line">         使用 -A 就可以加上第五条规则！</span><br><span class="line">    -I ：插入一条规则。如果没有指定此规则的顺序，默认是插入变成第一条规则。</span><br><span class="line">         例如原本有四条规则，使用 -I 则该规则变成第一条，而原本四条变成 <span class="number">2</span>~<span class="number">5</span> 号</span><br><span class="line">    链 ：有 INPUT, OUTPUT, FORWARD 等，此链名称又与 -io 有关，请看底下。</span><br><span class="line"></span><br><span class="line">-io 网络接口：设定封包进出的接口规范</span><br><span class="line">    -i ：封包所进入的那个网络接口，例如 eth0, lo 等接口。需与 INPUT 链配合；</span><br><span class="line">    -o ：封包所传出的那个网络接口，需与 OUTPUT 链配合；</span><br><span class="line"></span><br><span class="line">-p 协定：设定此规则适用于哪种封包格式</span><br><span class="line">   主要的封包格式有： tcp, udp, icmp 及 all 。</span><br><span class="line"></span><br><span class="line"><span class="operator">-s</span> 来源 IP/网域：设定此规则之封包的来源项目，可指定单纯的 IP 或包括网域，例如：</span><br><span class="line">   IP  ：<span class="number">192.168</span>.<span class="number">0.100</span></span><br><span class="line">   网域：<span class="number">192.168</span>.<span class="number">0.0</span>/<span class="number">24</span>, <span class="number">192.168</span>.<span class="number">0.0</span>/<span class="number">255.255</span>.<span class="number">255.0</span> 均可。</span><br><span class="line">   若规范为『不许』时，则加上 ! 即可，例如：</span><br><span class="line">   <span class="operator">-s</span> ! <span class="number">192.168</span>.<span class="number">100.0</span>/<span class="number">24</span> 表示不许 <span class="number">192.168</span>.<span class="number">100.0</span>/<span class="number">24</span> 之封包来源；</span><br><span class="line"></span><br><span class="line"><span class="operator">-d</span> 目标 IP/网域：同 <span class="operator">-s</span> ，只不过这里指的是目标的 IP 或网域。</span><br><span class="line"></span><br><span class="line">-j ：后面接动作，主要的动作有接受(ACCEPT)、丢弃(DROP)、拒绝(REJECT)及记录(LOG)</span><br><span class="line"></span><br><span class="line"><span class="comment">#TCP, UDP 的规则比对：针对端口设定</span></span><br><span class="line"></span><br><span class="line">    iptables [-AI 链] [-io 网络接口] [-p tcp,udp] [<span class="operator">-s</span> 来源IP/网域] [--sport 埠口范围] [<span class="operator">-d</span> 目标IP/网域] [--dport 端口范围] -j [ACCEPT|DROP|REJECT]</span><br><span class="line"></span><br><span class="line">选项与参数：</span><br><span class="line">--sport 埠口范围：限制来源的端口号码，端口号码可以是连续的，例如 <span class="number">1024</span>:<span class="number">65535</span></span><br><span class="line">--dport 埠口范围：限制目标的端口号码。</span><br><span class="line"></span><br><span class="line"><span class="comment">#iptables 外挂模块：mac 与 state</span></span><br><span class="line"></span><br><span class="line">    iptables -A INPUT [-m state] [--state 状态]</span><br><span class="line"></span><br><span class="line">选项与参数：</span><br><span class="line">-m ：一些 iptables 的外挂模块，主要常见的有：</span><br><span class="line">     state ：状态模块</span><br><span class="line">     mac   ：网络卡硬件地址 (hardware address)</span><br><span class="line">--state ：一些封包的状态，主要有：</span><br><span class="line">     INVALID    ：无效的封包，例如数据破损的封包状态</span><br><span class="line">     ESTABLISHED：已经联机成功的联机状态；</span><br><span class="line">     NEW        ：想要新建立联机的封包状态；</span><br><span class="line">     RELATED    ：这个最常用！表示这个封包是与我们主机发送出去的封包有关</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#ICMP 封包规则的比对：针对是否响应 ping 来设计</span></span><br><span class="line"></span><br><span class="line">    iptables -A INPUT [-p icmp] [--icmp-type 类型] -j ACCEPT</span><br><span class="line"></span><br><span class="line">选项与参数：</span><br><span class="line">--icmp-type ：后面必须要接 ICMP 的封包类型，也可以使用代号，</span><br><span class="line">              例如 <span class="number">8</span>  代表 <span class="built_in">echo</span> request 的意思。</span><br></pre></td></tr></table></figure>
<h2 id="配置iptables白名单机制">配置iptables白名单机制</h2><blockquote>
<p>配置iptables白名单是相对简单有效的管理手段</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">#清除所有规则(慎用)</span></span><br><span class="line">iptables -F</span><br><span class="line">iptables -X</span><br><span class="line">iptables -Z</span><br><span class="line"></span><br><span class="line"><span class="comment">#查看iptable和行号</span></span><br><span class="line">iptables -nL --line-number</span><br><span class="line"></span><br><span class="line"><span class="comment">#保存当前防火墙配置</span></span><br><span class="line">service iptables save</span><br><span class="line"></span><br><span class="line"><span class="comment">#手动编辑防火墙策略</span></span><br><span class="line">vi /etc/sysconfig/iptables</span><br><span class="line"></span><br><span class="line"><span class="comment"># Generated by iptables-save v1.4.7 on Fri Jul 24 09:42:09 2015</span></span><br><span class="line">*filter</span><br><span class="line">:INPUT ACCEPT [<span class="number">0</span>:<span class="number">0</span>]</span><br><span class="line">:FORWARD ACCEPT [<span class="number">0</span>:<span class="number">0</span>]</span><br><span class="line">:OUTPUT ACCEPT [<span class="number">0</span>:<span class="number">0</span>]</span><br><span class="line"><span class="comment">#开放本地和Ping</span></span><br><span class="line">-A INPUT -i lo -j ACCEPT  </span><br><span class="line">-A INPUT -m state --state RELATED,ESTABLISHED -j ACCEPT </span><br><span class="line">-A INPUT -p icmp -j ACCEPT</span><br><span class="line"><span class="comment">#配置内网白名单</span></span><br><span class="line">-A INPUT <span class="operator">-s</span> <span class="number">10.0</span>.<span class="number">0.0</span>/<span class="number">8</span> -j ACCEPT</span><br><span class="line">-A INPUT <span class="operator">-s</span> <span class="number">172.16</span>.<span class="number">0.0</span>/<span class="number">12</span> -j ACCEPT</span><br><span class="line">-A INPUT <span class="operator">-s</span> <span class="number">192.168</span>.<span class="number">0.0</span>/<span class="number">16</span> -j ACCEPT</span><br><span class="line"><span class="comment">#配置外网白名单</span></span><br><span class="line">-A INPUT <span class="operator">-s</span> <span class="number">180.168</span>.<span class="number">36.198</span> -j ACCEPT </span><br><span class="line">-A INPUT <span class="operator">-s</span> <span class="number">180.168</span>.<span class="number">34.218</span> -j ACCEPT </span><br><span class="line">-A INPUT <span class="operator">-s</span> <span class="number">222.73</span>.<span class="number">202.251</span> -j ACCEPT </span><br><span class="line"><span class="comment">#控制端口</span></span><br><span class="line">-A INPUT -p tcp --dport <span class="number">80</span> -j ACCEPT </span><br><span class="line">-A INPUT -p tcp --dport <span class="number">22</span> -j ACCEPT</span><br><span class="line"><span class="comment">#拒绝其它</span></span><br><span class="line">-A INPUT -j DROP </span><br><span class="line">-A FORWARD -j DROP </span><br><span class="line"><span class="comment">#开放出口</span></span><br><span class="line">-A OUTPUT -j ACCEPT </span><br><span class="line">COMMIT</span><br><span class="line"><span class="comment"># Completed on Fri Jul 24 09:40:16 2015 </span></span><br><span class="line"></span><br><span class="line"><span class="comment">#重启生效</span></span><br><span class="line">service iptables restart</span><br><span class="line"></span><br><span class="line"><span class="comment">#复查结果</span></span><br><span class="line"></span><br><span class="line">iptables -nL --line-number</span><br><span class="line"></span><br><span class="line">Chain INPUT (policy ACCEPT)</span><br><span class="line">num  target     prot opt <span class="built_in">source</span>               destination         </span><br><span class="line"><span class="number">1</span>    ACCEPT     all  --  <span class="number">0.0</span>.<span class="number">0.0</span>/<span class="number">0</span>            <span class="number">0.0</span>.<span class="number">0.0</span>/<span class="number">0</span>           </span><br><span class="line"><span class="number">2</span>    ACCEPT     all  --  <span class="number">0.0</span>.<span class="number">0.0</span>/<span class="number">0</span>            <span class="number">0.0</span>.<span class="number">0.0</span>/<span class="number">0</span>           state RELATED,ESTABLISHED </span><br><span class="line"><span class="number">3</span>    ACCEPT     icmp --  <span class="number">0.0</span>.<span class="number">0.0</span>/<span class="number">0</span>            <span class="number">0.0</span>.<span class="number">0.0</span>/<span class="number">0</span>           </span><br><span class="line"><span class="number">4</span>    ACCEPT     all  --  <span class="number">10.0</span>.<span class="number">0.0</span>/<span class="number">8</span>           <span class="number">0.0</span>.<span class="number">0.0</span>/<span class="number">0</span>           </span><br><span class="line"><span class="number">5</span>    ACCEPT     all  --  <span class="number">172.16</span>.<span class="number">0.0</span>/<span class="number">12</span>        <span class="number">0.0</span>.<span class="number">0.0</span>/<span class="number">0</span>           </span><br><span class="line"><span class="number">6</span>    ACCEPT     all  --  <span class="number">192.168</span>.<span class="number">0.0</span>/<span class="number">16</span>       <span class="number">0.0</span>.<span class="number">0.0</span>/<span class="number">0</span>           </span><br><span class="line"><span class="number">7</span>    ACCEPT     all  --  <span class="number">180.168</span>.<span class="number">36.198</span>       <span class="number">0.0</span>.<span class="number">0.0</span>/<span class="number">0</span>           </span><br><span class="line"><span class="number">8</span>    ACCEPT     all  --  <span class="number">180.168</span>.<span class="number">34.218</span>       <span class="number">0.0</span>.<span class="number">0.0</span>/<span class="number">0</span>           </span><br><span class="line"><span class="number">9</span>    ACCEPT     all  --  <span class="number">222.73</span>.<span class="number">202.251</span>       <span class="number">0.0</span>.<span class="number">0.0</span>/<span class="number">0</span>           </span><br><span class="line"><span class="number">10</span>   ACCEPT     tcp  --  <span class="number">0.0</span>.<span class="number">0.0</span>/<span class="number">0</span>            <span class="number">0.0</span>.<span class="number">0.0</span>/<span class="number">0</span>           tcp dpt:<span class="number">80</span> </span><br><span class="line"><span class="number">11</span>   ACCEPT     tcp  --  <span class="number">0.0</span>.<span class="number">0.0</span>/<span class="number">0</span>            <span class="number">0.0</span>.<span class="number">0.0</span>/<span class="number">0</span>           tcp dpt:<span class="number">22</span> </span><br><span class="line"><span class="number">12</span>   DROP       all  --  <span class="number">0.0</span>.<span class="number">0.0</span>/<span class="number">0</span>            <span class="number">0.0</span>.<span class="number">0.0</span>/<span class="number">0</span>           </span><br><span class="line"></span><br><span class="line">Chain FORWARD (policy ACCEPT)</span><br><span class="line">num  target     prot opt <span class="built_in">source</span>               destination         </span><br><span class="line"><span class="number">1</span>    DROP       all  --  <span class="number">0.0</span>.<span class="number">0.0</span>/<span class="number">0</span>            <span class="number">0.0</span>.<span class="number">0.0</span>/<span class="number">0</span>           </span><br><span class="line"></span><br><span class="line">Chain OUTPUT (policy ACCEPT)</span><br><span class="line">num  target     prot opt <span class="built_in">source</span>               destination         </span><br><span class="line"><span class="number">1</span>    ACCEPT     all  --  <span class="number">0.0</span>.<span class="number">0.0</span>/<span class="number">0</span>            <span class="number">0.0</span>.<span class="number">0.0</span>/<span class="number">0</span></span><br></pre></td></tr></table></figure>
<h2 id="设置crontab脚本">设置crontab脚本</h2><blockquote>
<p>便于运维集中化管理扩展</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">vi /root/start_iptables.sh</span><br><span class="line"></span><br><span class="line"><span class="shebang">#!/bin/bash</span></span><br><span class="line"><span class="comment">#0 0 * * * /root/start_iptables.sh</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#清除配置</span></span><br><span class="line">/sbin/iptables -P INPUT ACCEPT</span><br><span class="line">/sbin/iptables -F</span><br><span class="line">/sbin/iptables -X</span><br><span class="line"><span class="comment">#开放本地和Ping</span></span><br><span class="line">/sbin/iptables -A INPUT -i lo -j ACCEPT  </span><br><span class="line">/sbin/iptables -A INPUT -m state --state RELATED,ESTABLISHED -j ACCEPT </span><br><span class="line">/sbin/iptables -A INPUT -p icmp -j ACCEPT</span><br><span class="line"><span class="comment">#配置内网白名单</span></span><br><span class="line">/sbin/iptables -A INPUT <span class="operator">-s</span> <span class="number">10.0</span>.<span class="number">0.0</span>/<span class="number">8</span> -j ACCEPT</span><br><span class="line">/sbin/iptables -A INPUT <span class="operator">-s</span> <span class="number">172.16</span>.<span class="number">0.0</span>/<span class="number">12</span> -j ACCEPT</span><br><span class="line">/sbin/iptables -A INPUT <span class="operator">-s</span> <span class="number">192.168</span>.<span class="number">0.0</span>/<span class="number">16</span> -j ACCEPT</span><br><span class="line"><span class="comment">#配置外网白名单</span></span><br><span class="line">/sbin/iptables -A INPUT <span class="operator">-s</span> <span class="number">180.168</span>.<span class="number">36.198</span> -j ACCEPT </span><br><span class="line">/sbin/iptables -A INPUT <span class="operator">-s</span> <span class="number">180.168</span>.<span class="number">34.218</span> -j ACCEPT </span><br><span class="line">/sbin/iptables -A INPUT <span class="operator">-s</span> <span class="number">222.73</span>.<span class="number">202.251</span> -j ACCEPT </span><br><span class="line"><span class="comment">#控制端口</span></span><br><span class="line">/sbin/iptables -A INPUT -p tcp --dport <span class="number">80</span> -j ACCEPT </span><br><span class="line">/sbin/iptables -A INPUT -p tcp --dport <span class="number">22</span> -j ACCEPT</span><br><span class="line"><span class="comment">#拒绝其它</span></span><br><span class="line">/sbin/iptables -A INPUT -j DROP </span><br><span class="line">/sbin/iptables -A FORWARD -j DROP </span><br><span class="line"><span class="comment">#开放出口</span></span><br><span class="line">/sbin/iptables -A OUTPUT -j ACCEPT </span><br><span class="line"></span><br><span class="line"></span><br><span class="line">chmod <span class="number">755</span> /root/start_iptables.sh</span><br><span class="line">crontab <span class="operator">-e</span></span><br><span class="line"><span class="number">0</span> <span class="number">0</span> * * * /root/start_iptables.sh</span><br></pre></td></tr></table></figure>
]]></content>
    <summary type="html">
    <![CDATA[建立防火墙白名单机制很重要]]>
    
    </summary>
    
      <category term="学习 | Study" scheme="http://wsgzao.github.io/categories/%E5%AD%A6%E4%B9%A0-Study/"/>
    
  </entry>
  
  <entry>
    <title><![CDATA[使用Cygwin在Windows上体验Linux的快感]]></title>
    <link href="http://wsgzao.github.io/post/cygwin/"/>
    <id>http://wsgzao.github.io/post/cygwin/</id>
    <published>2015-07-21T09:22:07.000Z</published>
    <updated>2015-07-24T09:11:19.448Z</updated>
    <content type="html"><![CDATA[<p><img src="http://i.v2ex.co/Pmsh13Ts.png" alt=""></p>
<h2 id="前言">前言</h2><p>记得大学的时候就曾经使用过Cygwin，可惜当时没有发现她的美，我相信现在大多数朋友可能会更加倾向于使用<code>Git</code>或者干脆直接使用虚拟机以及原生Unix。不过对于刚进入Linux的世界新人来说，使用Cygwin可以让你在Windows下面练习Linux的Bash，以及常用工具，而不需要安装Linux，也不用担心Windows被破坏，给每个人多一种选择也蛮好的，最后再一次感谢163为开源做出的努力。</p>
<blockquote>
<p>Get that Linux feeling - on Windows     </p>
</blockquote>
<hr>
<h2 id="更新历史">更新历史</h2><p>2015年07月24日 - 增加在Cygwin里安装使用dig实践<br>2015年07月21日 - 初稿</p>
<p>阅读原文 - <a href="http://wsgzao.github.io/post/cygwin/" target="_blank" rel="external">http://wsgzao.github.io/post/cygwin/</a></p>
<p>扩展阅读</p>
<p>Cygwin - <a href="http://www.cygwin.com/" target="_blank" rel="external">http://www.cygwin.com/</a><br>163源 - <a href="http://mirrors.163.com/cygwin/" target="_blank" rel="external">http://mirrors.163.com/cygwin/</a></p>
<hr>
<blockquote>
<p>按照个人习惯一步步勾选即可，软件源我选择163，如果网络不给力可以下载我提供的完整离线包</p>
</blockquote>
<h2 id="在线安装">在线安装</h2><ol>
<li>点击下一步</li>
<li>选择<code>Install from Internet</code></li>
<li>自定义安装路径</li>
<li>自定义Local Package Directory</li>
<li>自定义网络连接下载方式（可以使用代理加速）</li>
<li>选择<code>http://mirrors.163.com</code>作为下载源</li>
<li>选择自己所需的Packages</li>
</ol>
<h2 id="离线安装">离线安装</h2><ol>
<li>点击下一步</li>
<li>选择<code>Install from Local Directory</code></li>
<li>自定义安装路径</li>
<li>定义Local Package Directory为<code>mirrors.163.com</code></li>
<li>选择自己所需的Packages</li>
</ol>
<h2 id="软件库">软件库</h2><blockquote>
<p>你同样可以在Cygwin上编译安装和执行Unix下的程序</p>
</blockquote>
<p>在<code>Select Packages</code>界面搜索并勾选所需的包或者直接全部install <code>Devel</code>，举个<code>GoAccess</code>栗子</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br></pre></td><td class="code"><pre><span class="line">Administrator@PC-<span class="number">20150629</span>NSFI ~/goaccess-<span class="number">0.9</span>.<span class="number">2</span></span><br><span class="line">$ ./configure --enable-utf8</span><br><span class="line">checking <span class="keyword">for</span> a BSD-compatible install... /usr/bin/install -c</span><br><span class="line">checking whether build environment is sane... yes</span><br><span class="line">checking <span class="keyword">for</span> a thread-safe mkdir -p... /usr/bin/mkdir -p</span><br><span class="line">checking <span class="keyword">for</span> gawk... gawk</span><br><span class="line">checking whether make sets $(MAKE)... yes</span><br><span class="line">checking <span class="keyword">for</span> gcc... gcc</span><br><span class="line">checking whether the C compiler works... yes</span><br><span class="line">checking <span class="keyword">for</span> C compiler default output file name... a.exe</span><br><span class="line">checking <span class="keyword">for</span> suffix of executables... .exe</span><br><span class="line">checking whether we are cross compiling... no</span><br><span class="line">checking <span class="keyword">for</span> suffix of object files... o</span><br><span class="line">checking whether we are using the GNU C compiler... yes</span><br><span class="line">checking whether gcc accepts -g... yes</span><br><span class="line">checking <span class="keyword">for</span> gcc option to accept ISO C89... none needed</span><br><span class="line">checking <span class="keyword">for</span> style of include used by make... GNU</span><br><span class="line">checking dependency style of gcc... gcc3</span><br><span class="line">checking whether gcc and cc understand -c and -o together... yes</span><br><span class="line">checking <span class="keyword">for</span> pthread_create <span class="keyword">in</span> -lpthread... yes</span><br><span class="line">checking build system type... x86_64-unknown-cygwin</span><br><span class="line">checking host system type... x86_64-unknown-cygwin</span><br><span class="line">checking whether to build with rdynamic <span class="keyword">for</span> GNU ld... no</span><br><span class="line">checking <span class="keyword">for</span> mvaddwstr <span class="keyword">in</span> -lncursesw... yes</span><br><span class="line">checking <span class="keyword">for</span> ncursesw/ncurses.h... yes</span><br><span class="line">checking <span class="keyword">for</span> ncurses.h... yes</span><br><span class="line">checking <span class="keyword">for</span> pkg-config... /usr/bin/pkg-config</span><br><span class="line">checking pkg-config is at least version <span class="number">0.9</span>.<span class="number">0</span>... yes</span><br><span class="line">checking <span class="keyword">for</span> pkg-config... /usr/bin/pkg-config</span><br><span class="line">checking <span class="keyword">for</span> GLIB2... yes</span><br><span class="line">checking <span class="keyword">for</span> g_list_append <span class="keyword">in</span> -lglib-<span class="number">2.0</span>... yes</span><br><span class="line">checking <span class="keyword">for</span> socket <span class="keyword">in</span> -lsocket... no</span><br><span class="line">checking <span class="keyword">for</span> gethostbyname <span class="keyword">in</span> -lnsl... no</span><br><span class="line">checking how to run the C preprocessor... gcc -E</span><br><span class="line">checking <span class="keyword">for</span> grep that handles long lines and -e... /usr/bin/grep</span><br><span class="line">checking <span class="keyword">for</span> egrep... /usr/bin/grep -E</span><br><span class="line">checking <span class="keyword">for</span> ANSI C header files... yes</span><br><span class="line">checking <span class="keyword">for</span> sys/types.h... yes</span><br><span class="line">checking <span class="keyword">for</span> sys/stat.h... yes</span><br><span class="line">checking <span class="keyword">for</span> stdlib.h... yes</span><br><span class="line">checking <span class="keyword">for</span> string.h... yes</span><br><span class="line">checking <span class="keyword">for</span> memory.h... yes</span><br><span class="line">checking <span class="keyword">for</span> strings.h... yes</span><br><span class="line">checking <span class="keyword">for</span> inttypes.h... yes</span><br><span class="line">checking <span class="keyword">for</span> stdint.h... yes</span><br><span class="line">checking <span class="keyword">for</span> unistd.h... yes</span><br><span class="line">checking netinet/in.h usability... yes</span><br><span class="line">checking netinet/in.h presence... yes</span><br><span class="line">checking <span class="keyword">for</span> netinet/in.h... yes</span><br><span class="line">checking sys/socket.h usability... yes</span><br><span class="line">checking sys/socket.h presence... yes</span><br><span class="line">checking <span class="keyword">for</span> sys/socket.h... yes</span><br><span class="line">checking arpa/inet.h usability... yes</span><br><span class="line">checking arpa/inet.h presence... yes</span><br><span class="line">checking <span class="keyword">for</span> arpa/inet.h... yes</span><br><span class="line">checking locale.h usability... yes</span><br><span class="line">checking locale.h presence... yes</span><br><span class="line">checking <span class="keyword">for</span> locale.h... yes</span><br><span class="line">checking netdb.h usability... yes</span><br><span class="line">checking netdb.h presence... yes</span><br><span class="line">checking <span class="keyword">for</span> netdb.h... yes</span><br><span class="line">checking <span class="keyword">for</span> stdint.h... (cached) yes</span><br><span class="line">checking <span class="keyword">for</span> stdlib.h... (cached) yes</span><br><span class="line">checking <span class="keyword">for</span> string.h... (cached) yes</span><br><span class="line">checking <span class="keyword">for</span> unistd.h... (cached) yes</span><br><span class="line">checking stddef.h usability... yes</span><br><span class="line">checking stddef.h presence... yes</span><br><span class="line">checking <span class="keyword">for</span> stddef.h... yes</span><br><span class="line">checking <span class="keyword">for</span> an ANSI C-conforming const... yes</span><br><span class="line">checking <span class="keyword">for</span> off_t... yes</span><br><span class="line">checking <span class="keyword">for</span> size_t... yes</span><br><span class="line">checking whether struct tm is <span class="keyword">in</span> sys/time.h or time.h... time.h</span><br><span class="line">checking <span class="keyword">for</span> ptrdiff_t... yes</span><br><span class="line">checking <span class="keyword">for</span> working strtod... yes</span><br><span class="line">checking <span class="keyword">for</span> _LARGEFILE_SOURCE value needed <span class="keyword">for</span> large files... no</span><br><span class="line">checking <span class="keyword">for</span> working memcmp... yes</span><br><span class="line">checking whether lstat correctly handles trailing slash... yes</span><br><span class="line">checking whether <span class="built_in">stat</span> accepts an empty string... no</span><br><span class="line">checking <span class="keyword">for</span> strftime... yes</span><br><span class="line">checking <span class="keyword">for</span> regcomp... yes</span><br><span class="line">checking <span class="keyword">for</span> strtoull... yes</span><br><span class="line">checking <span class="keyword">for</span> memmove... yes</span><br><span class="line">checking <span class="keyword">for</span> floor... yes</span><br><span class="line">checking <span class="keyword">for</span> gethostbyaddr... yes</span><br><span class="line">checking <span class="keyword">for</span> gethostbyname... yes</span><br><span class="line">checking <span class="keyword">for</span> memset... yes</span><br><span class="line">checking <span class="keyword">for</span> setlocale... yes</span><br><span class="line">checking <span class="keyword">for</span> strchr... yes</span><br><span class="line">checking <span class="keyword">for</span> strdup... yes</span><br><span class="line">checking <span class="keyword">for</span> strerror... yes</span><br><span class="line">checking <span class="keyword">for</span> strrchr... yes</span><br><span class="line">checking <span class="keyword">for</span> strstr... yes</span><br><span class="line">checking <span class="keyword">for</span> strtol... yes</span><br><span class="line">checking <span class="keyword">for</span> realpath... yes</span><br><span class="line">checking <span class="keyword">for</span> malloc... yes</span><br><span class="line">checking <span class="keyword">for</span> realloc... yes</span><br><span class="line">configure: creating ./config.status</span><br><span class="line">config.status: creating Makefile</span><br><span class="line">config.status: creating src/config.h</span><br><span class="line">config.status: executing depfiles commands</span><br><span class="line"></span><br><span class="line">Your build configuration:</span><br><span class="line"></span><br><span class="line">  CFLAGS = -pthread</span><br><span class="line">  storage: On-memory Hash Database (GLib)</span><br><span class="line">  prefix: /usr/<span class="built_in">local</span></span><br><span class="line">  package: goaccess</span><br><span class="line">  version: <span class="number">0.9</span>.<span class="number">2</span></span><br><span class="line">  bugs: goaccess@prosoftcorp.com</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">make &amp;&amp; make install</span><br><span class="line"></span><br><span class="line">$ goaccess -V</span><br><span class="line">GoAccess - <span class="number">0.9</span>.<span class="number">2</span>.</span><br><span class="line">For more details visit: http://goaccess.io</span><br><span class="line">Copyright (C) <span class="number">2009</span>-<span class="number">2015</span> GNU GPL<span class="string">'d, by Gerardo Orellana</span></span><br></pre></td></tr></table></figure>
<h3 id="在Cygwin里安装使用dig">在Cygwin里安装使用dig</h3><p>1.启动Cygwin选择下载源</p>
<blockquote>
<p>推荐国内源 - <a href="http://mirrors.163.com/cygwin/" target="_blank" rel="external">http://mirrors.163.com/cygwin/</a></p>
</blockquote>
<p>2.Install the <code>Bind</code> package</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">$ dig wsgzao.github.io</span><br><span class="line"></span><br><span class="line">; &lt;&lt;&gt;&gt; DiG <span class="number">9.10</span>.<span class="number">2</span>-P2 &lt;&lt;&gt;&gt; wsgzao.github.io</span><br><span class="line">;; global options: +cmd</span><br><span class="line">;; Got answer:</span><br><span class="line">;; -&gt;&gt;HEADER&lt;&lt;- opcode: QUERY, status: NOERROR, id: <span class="number">21080</span></span><br><span class="line">;; flags: qr rd ra; QUERY: <span class="number">1</span>, ANSWER: <span class="number">2</span>, AUTHORITY: <span class="number">0</span>, ADDITIONAL: <span class="number">1</span></span><br><span class="line"></span><br><span class="line">;; OPT PSEUDOSECTION:</span><br><span class="line">; EDNS: version: <span class="number">0</span>, flags:; udp: <span class="number">4096</span></span><br><span class="line">;; QUESTION SECTION:</span><br><span class="line">;wsgzao.github.io.              IN      A</span><br><span class="line"></span><br><span class="line">;; ANSWER SECTION:</span><br><span class="line">wsgzao.github.io.       <span class="number">30</span>      IN      CNAME   github.map.fastly.net.</span><br><span class="line">github.map.fastly.net.  <span class="number">30</span>      IN      A       <span class="number">103.245</span>.<span class="number">222.133</span></span><br><span class="line"></span><br><span class="line">;; Query time: <span class="number">10</span> msec</span><br><span class="line">;; SERVER: <span class="number">202.96</span>.<span class="number">209.133</span><span class="comment">#53(202.96.209.133)</span></span><br><span class="line">;; WHEN: 周五 七月 <span class="number">24</span> <span class="number">15</span>:<span class="number">28</span>:<span class="number">05</span> CST <span class="number">2015</span></span><br><span class="line">;; MSG SIZE  rcvd: <span class="number">96</span></span><br></pre></td></tr></table></figure>
]]></content>
    <summary type="html">
    <![CDATA[Get that Linux feeling - on Windows]]>
    
    </summary>
    
      <category term="学习 | Study" scheme="http://wsgzao.github.io/categories/%E5%AD%A6%E4%B9%A0-Study/"/>
    
  </entry>
  
  <entry>
    <title><![CDATA[Windows上使用Vagrant打造Laravel Homestead可协同跨平台开发环境]]></title>
    <link href="http://wsgzao.github.io/post/vagrant/"/>
    <id>http://wsgzao.github.io/post/vagrant/</id>
    <published>2015-07-18T10:29:28.000Z</published>
    <updated>2015-07-18T11:54:56.000Z</updated>
    <content type="html"><![CDATA[<p><img src="http://i.v2ex.co/vyf30F6d.png" alt=""></p>
<h2 id="前言">前言</h2><p>大家对<code>VMware</code>或者<code>VirtualBox</code>一定不会陌生，虚拟化的好处自然深入人心，而现在我们可以通过<code>Vagrant</code>搭建一套类似<code>Laravel Homestead</code>完整开发环境，这样极大的减少了架设开发环境的时间，同时还支持在<code>Windows/Mac/Linux</code>不同平台上分享定制包，统一团队之间的开发环境提高工作效率，而<code>Docker</code>的出现也让未来更值得期待。</p>
<blockquote>
<p>用Vagrant为自己打造一个奇妙的跨平台开发环境</p>
</blockquote>
<hr>
<h2 id="更新历史">更新历史</h2><p>2015年07月18日 - 初稿</p>
<p>阅读原文 - <a href="http://wsgzao.github.io/post/vagrant/" target="_blank" rel="external">http://wsgzao.github.io/post/vagrant/</a></p>
<p>扩展阅读</p>
<p>Vagrant - <a href="https://www.vagrantup.com/" target="_blank" rel="external">https://www.vagrantup.com/</a><br>Laravel Homestead - <a href="http://laravel.com/docs/5.1/homestead" target="_blank" rel="external">http://laravel.com/docs/5.1/homestead</a><br>在windows下进行linux开发：利用Vagrant+virtualbox - <a href="http://blog.star7th.com/2015/06/1538.html" target="_blank" rel="external">http://blog.star7th.com/2015/06/1538.html</a><br>在 Mac/win7 下上使用 Vagrant 打造本地开发环境 - <a href="http://segmentfault.com/a/1190000002645737" target="_blank" rel="external">http://segmentfault.com/a/1190000002645737</a></p>
<hr>
<h2 id="环境准备">环境准备</h2><ol>
<li>Git（非必需）</li>
<li>PHP（非必需）</li>
<li>Laravel（非必需）</li>
<li>Composer（非必需）</li>
<li>Vagrant</li>
<li>VirtualBox</li>
</ol>
<p>如果大家有需要离线安装欢迎直接留言回复哈</p>
<h2 id="安装git">安装git</h2><p>1.下载GitHub for Windows</p>
<p><a href="https://windows.github.com/" target="_blank" rel="external">https://windows.github.com/</a></p>
<h2 id="安装php">安装php</h2><blockquote>
<p>建议大家尽量安装当前最新版本的 PHP </p>
</blockquote>
<p>1.下载PHP</p>
<p><a href="http://windows.php.net/download/" target="_blank" rel="external">http://windows.php.net/download/</a></p>
<p>2.解压目录</p>
<p>我的路径<code>D:\php</code></p>
<p>3.添加环境变量</p>
<p>右键计算机-&gt;高级系统设置-&gt;环境变量-&gt;系统变量-&gt;PATH</p>
<p><code>C:\ProgramData\Oracle\Java\javapath;%SystemRoot%\system32;%SystemRoot%;%SystemRoot%\System32\Wbem;%SYSTEMROOT%\System32\WindowsPowerShell\v1.0\;C:\nodejs\;D:\php;C:\ProgramData\ComposerSetup\bin</code></p>
<p>4.设置php.ini</p>
<p>进入 PHP 安装目录（例如 <code>D:\php</code>）。找到 <code>php.ini-development</code> 文件并复制一份到当前目录，重命名为 <code>php.ini</code>，修改以下配置<br>去掉<code>extension=php_mbstring.dll</code> 前面的分号（888 行左右）<br>去掉<code>extension=php_openssl.dll</code>前面的分号（893 行左右）<br>去掉<code>extension_dir = &quot;ext&quot;</code>前面的分号（736 行左右）</p>
<p>5.使环境变量生效</p>
<p>重启<code>explorer.exe</code></p>
<h2 id="安装Laravel">安装Laravel</h2><p>1.下载Laravel</p>
<p><a href="http://www.golaravel.com/download/" target="_blank" rel="external">http://www.golaravel.com/download/</a></p>
<p>2.解压目录</p>
<p>我的路径<code>D:\laravel-v5.1.4</code></p>
<p>3.启动Laravel</p>
<figure class="highlight bat"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function">d:</span><br><span class="line"><span class="title">cd</span> <span class="title">laravel</span>-<span class="title">v5</span>.1.4</span><br><span class="line"><span class="title">D</span>:\<span class="title">laravel</span>-<span class="title">v5</span>.1.4&gt;<span class="title">php</span> <span class="title">artisan</span> <span class="title">serve</span></span><br><span class="line"><span class="title">Laravel</span> <span class="title">development</span> <span class="title">server</span> <span class="title">started</span> <span class="title">on</span> <span class="title">http</span>://<span class="title">localhost</span>:8000/</span></span><br></pre></td></tr></table></figure>
<p>在浏览器中访问<a href="http://localhost:8000/" target="_blank" rel="external">http://localhost:8000/</a></p>
<p><code>artisan</code> 的 <code>serve</code> 命令还支持两个参数：</p>
<p><code>host</code> 设置主机地址<br><code>port</code> 设置 web server 监听的端口号<br>例如：<code>php artisan serve --port=8888</code></p>
<h2 id="安装Composer">安装Composer</h2><p>1.下载<code>Composer-Setup.exe</code></p>
<p><a href="https://getcomposer.org/doc/00-intro.md#installation-windows" target="_blank" rel="external">https://getcomposer.org/doc/00-intro.md#installation-windows</a></p>
<p>2.配置Composer</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Loading composer repositories with package information</span><br><span class="line">Installing dependencies (including require-dev)</span><br><span class="line">SSL certificate problem, verify that the CA cert is OK. Details: </span><br><span class="line">error:<span class="number">14090086</span>:SSL routines:SSL3_GET_SERVER_CERTIFICATE:certificate verify failed”</span><br></pre></td></tr></table></figure>
<p>如果安装过程提示报错为缺少CA证书，下载<code>cacert.pem</code>到自定义路径<br><a href="http://curl.haxx.se/docs/caextract.html" target="_blank" rel="external">http://curl.haxx.se/docs/caextract.html</a></p>
<p>然后修改php.ini文件（1983行左右）</p>
<p><code>openssl.cafile=D:\php\verify\cacert.pem</code></p>
<p>3.测试Composer</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">composer -V</span><br><span class="line"></span><br><span class="line">Composer version <span class="number">1.0</span>-dev (d79427f1a7b15e8f4d46ce8124a4d0c58ba1479c) <span class="number">2015</span>-<span class="number">07</span>-<span class="number">04</span> <span class="number">1</span></span><br><span class="line"><span class="number">1</span>:<span class="number">22</span>:<span class="number">58</span></span><br></pre></td></tr></table></figure>
<h2 id="安装Vagrant">安装Vagrant</h2><p>1.下载Vagrant</p>
<p><a href="https://www.vagrantup.com/downloads.html" target="_blank" rel="external">https://www.vagrantup.com/downloads.html</a></p>
<p>2.离线下载虚拟镜像</p>
<p><a href="https://github.com/tommy-muehle/puppet-vagrant-boxes/releases/download/1.0.0/centos-6.6-x86_64.box" target="_blank" rel="external">https://github.com/tommy-muehle/puppet-vagrant-boxes/releases/download/1.0.0/centos-6.6-x86_64.box</a></p>
<p>上面给出的是centos-6.6镜像下载链接，要下载其他镜像请访问官网<br><a href="http://www.vagrantbox.es/" target="_blank" rel="external">http://www.vagrantbox.es/</a></p>
<h2 id="安装VirtualBox">安装VirtualBox</h2><blockquote>
<p>BIOS里面开启CPU硬件虚拟化支持VT(Virtualization Technology)</p>
</blockquote>
<p>1.下载VirtualBox</p>
<p><a href="https://www.virtualbox.org/wiki/Downloads" target="_blank" rel="external">https://www.virtualbox.org/wiki/Downloads</a></p>
<p>2.导入镜像</p>
<p>设置VirtualBox目录并拷贝镜像<code>centos-6.6-x86_64.box</code><br>E:\VirtualBox\centos-6.6-x86_64.box</p>
<p>3.命令初始化Vagrant</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#切换VirtualBox目录</span></span><br><span class="line">e:</span><br><span class="line"><span class="built_in">cd</span> .\VirtualBox</span><br><span class="line"></span><br><span class="line"><span class="comment">#输入命令初始化</span></span><br><span class="line">E:\VirtualBox&gt; vagrant init centos6.<span class="number">6</span></span><br><span class="line">A `Vagrantfile` has been placed <span class="keyword">in</span> this directory. You are now</span><br><span class="line">ready to `vagrant up` your first virtual environment! Please <span class="built_in">read</span></span><br><span class="line">the comments <span class="keyword">in</span> the Vagrantfile as well as documentation on</span><br><span class="line">`vagrantup.com` <span class="keyword">for</span> more information on using Vagrant.</span><br><span class="line"></span><br><span class="line"><span class="comment">#执行添加命令</span></span><br><span class="line">E:\VirtualBox&gt; vagrant box add centos6.<span class="number">6</span> centos-<span class="number">6.6</span>-x86_64.box</span><br><span class="line">==&gt; box: Adding box <span class="string">'centos6.6'</span> (v0) <span class="keyword">for</span> provider:</span><br><span class="line">    box: Downloading: file://E:/VirtualBox/centos-<span class="number">6.6</span>-x86_64.box</span><br><span class="line">    box: Progress: <span class="number">100</span>% (Rate: <span class="number">670</span>M/s, Estimated time remaining: --:--:--)</span><br><span class="line">==&gt; box: Successfully added box <span class="string">'centos6.6'</span> (v0) <span class="keyword">for</span> <span class="string">'virtualbox'</span>!</span><br><span class="line"></span><br><span class="line"><span class="comment">#检查是否导入成功</span></span><br><span class="line">E:\VirtualBox&gt; vagrant box list</span><br><span class="line">centos6.<span class="number">6</span> (virtualbox, <span class="number">0</span>)</span><br></pre></td></tr></table></figure>
<h2 id="Vagrant配置">Vagrant配置</h2><blockquote>
<p>详细配置文档可以参考官方手册 - <a href="https://docs.vagrantup.com/v2/" target="_blank" rel="external">https://docs.vagrantup.com/v2/</a></p>
</blockquote>
<h3 id="启动Vagrant">启动Vagrant</h3><p>通过Shell进入目录<code>E:\VirtualBox</code>后执行命令</p>
<pre><code><span class="title">vagrant</span> up
</code></pre><blockquote>
<p>顺利启动的完整过程如下所示</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line">E:\VirtualBox&gt;vagrant up</span><br><span class="line">Bringing machine <span class="string">'default'</span> up with <span class="string">'virtualbox'</span> provider...</span><br><span class="line">==&gt; default: Importing base box <span class="string">'centos6.6'</span>...</span><br><span class="line">==&gt; default: Matching MAC address <span class="keyword">for</span> NAT networking...</span><br><span class="line">==&gt; default: Setting the name of the VM: VirtualBox_default_1437213832296_68434</span><br><span class="line">==&gt; default: Clearing any previously <span class="built_in">set</span> forwarded ports...</span><br><span class="line">==&gt; default: Clearing any previously <span class="built_in">set</span> network interfaces...</span><br><span class="line">==&gt; default: Preparing network interfaces based on configuration...</span><br><span class="line">    default: Adapter <span class="number">1</span>: nat</span><br><span class="line">==&gt; default: Forwarding ports...</span><br><span class="line">    default: <span class="number">22</span> =&gt; <span class="number">2222</span> (adapter <span class="number">1</span>)</span><br><span class="line">==&gt; default: Booting VM...</span><br><span class="line">==&gt; default: Waiting <span class="keyword">for</span> machine to boot. This may take a few minutes...</span><br><span class="line">    default: SSH address: <span class="number">127.0</span>.<span class="number">0.1</span>:<span class="number">2222</span></span><br><span class="line">    default: SSH username: vagrant</span><br><span class="line">    default: SSH auth method: private key</span><br><span class="line">    default: Warning: Connection timeout. Retrying...</span><br><span class="line">    default:</span><br><span class="line">    default: Vagrant insecure key detected. Vagrant will automatically replace</span><br><span class="line">    default: this with a newly generated keypair <span class="keyword">for</span> better security.</span><br><span class="line">    default:</span><br><span class="line">    default: Inserting generated public key within guest...</span><br><span class="line">    default: Removing insecure key from the guest <span class="keyword">if</span> it<span class="string">'s present...</span><br><span class="line">    default: Key inserted! Disconnecting and reconnecting using new SSH key...</span><br><span class="line">==&gt; default: Machine booted and ready!</span><br><span class="line">==&gt; default: Checking for guest additions in VM...</span><br><span class="line">    default: The guest additions on this VM do not match the installed version of</span><br><span class="line">    default: VirtualBox! In most cases this is fine, but in rare cases it can</span><br><span class="line">    default: prevent things such as shared folders from working properly. If you see</span><br><span class="line">    default: shared folder errors, please make sure the guest additions within the</span><br><span class="line">    default: virtual machine match the version of VirtualBox you have installed on</span><br><span class="line">    default: your host and reload your VM.</span><br><span class="line">    default:</span><br><span class="line">    default: Guest Additions Version: 4.3.28</span><br><span class="line">    default: VirtualBox Version: 5.0</span><br><span class="line">==&gt; default: Mounting shared folders...</span><br><span class="line">    default: /vagrant =&gt; E:/VirtualBox</span></span><br></pre></td></tr></table></figure>
<p>虚拟机启动之后则可以通过 vagrant ssh 联入虚拟机进行进一步的环境配置，或者软件安装相关的工作，在Windows系统下，并不能直接通过<code>vagrant ssh</code>连到虚拟机，需要使用<code>SecureCRT/Putty/Xshell</code>等第三方工具进行连接。连接地址<code>127.0.0.1</code>，端口<code>2222</code>。登录的帐号<code>root</code>的密码为<code>vagrant</code></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">E:\VirtualBox&gt; vagrant up</span><br><span class="line">Bringing machine <span class="string">'default'</span> up with <span class="string">'virtualbox'</span> provider...</span><br><span class="line">==&gt; default: Clearing any previously <span class="built_in">set</span> forwarded ports...</span><br><span class="line">==&gt; default: Clearing any previously <span class="built_in">set</span> network interfaces...</span><br><span class="line">==&gt; default: Preparing network interfaces based on configuration...</span><br><span class="line">    default: Adapter <span class="number">1</span>: nat</span><br><span class="line">    default: Adapter <span class="number">2</span>: bridged</span><br><span class="line">==&gt; default: Forwarding ports...</span><br><span class="line">    default: <span class="number">80</span> =&gt; <span class="number">8080</span> (adapter <span class="number">1</span>)</span><br><span class="line">    default: <span class="number">22</span> =&gt; <span class="number">2222</span> (adapter <span class="number">1</span>)</span><br><span class="line">==&gt; default: Booting VM...</span><br><span class="line">==&gt; default: Waiting <span class="keyword">for</span> machine to boot. This may take a few minutes...</span><br><span class="line">The guest machine entered an invalid state <span class="keyword">while</span> waiting <span class="keyword">for</span> it</span><br><span class="line">to boot. Valid states are <span class="string">'starting, running'</span>. The machine is <span class="keyword">in</span> the</span><br><span class="line"><span class="string">'poweroff'</span> state. Please verify everything is configured</span><br><span class="line">properly and try again.</span><br><span class="line"></span><br><span class="line">If the provider you<span class="string">'re using has a GUI that comes with it,</span><br><span class="line">it is often helpful to open that and watch the machine, since the</span><br><span class="line">GUI often has more helpful error messages than Vagrant can retrieve.</span><br><span class="line">For example, if you'</span>re using VirtualBox, run `vagrant up` <span class="keyword">while</span> the</span><br><span class="line">VirtualBox GUI is open.</span><br></pre></td></tr></table></figure>
<p>如果有报上述错误，并且运行Virtualbox去安装系统时出错：<code>Failed to open a session for the virtual machine，Unable to load R3 module C:\Program Files\Oracle\VirtualBox/VBoxDD.DLL (VBoxDD): GetLastError=1790 (VERR_UNRESOLVED_ERROR).</code>，需要使用<code>UniversalThemePatcher</code>还原未破解的<code>themeservice.dll   themeui.dll   uxtheme.dll</code>文件</p>
<blockquote>
<p>已经打包好的下载链接 - <a href="http://pan.baidu.com/s/1c0HGj2g" target="_blank" rel="external">http://pan.baidu.com/s/1c0HGj2g</a></p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">==&gt; default: Booting VM...</span><br><span class="line">==&gt; default: Waiting <span class="keyword">for</span> machine to boot. This may take a few minutes...</span><br><span class="line">    default: SSH address: <span class="number">127.0</span>.<span class="number">0.1</span>:<span class="number">2222</span></span><br><span class="line">    default: SSH username: vagrant</span><br><span class="line">    default: SSH auth method: private key</span><br><span class="line">    default: Warning: Connection timeout. Retrying...</span><br><span class="line">    default: Warning: Connection timeout. Retrying...</span><br><span class="line">    default: Warning: Connection timeout. Retrying...</span><br></pre></td></tr></table></figure>
<p>如果报<code>default: Warning: Connection timeout. Retrying...</code>，建议打编辑<code>Vagrantfile</code>打开VirtualBox图形化界面<code>vb.gui = true</code>进一步分析错误代码和原因。</p>
<h3 id="导出box">导出box</h3><p>通过Shell进入目录<code>E:\VirtualBox</code>后执行命令</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">vagrant package</span><br><span class="line"></span><br><span class="line">vagrant package --output NAME --vagrantfile FILE</span><br><span class="line"></span><br><span class="line"><span class="comment">#可选参数：</span></span><br><span class="line">--output NAME ： （可选）设置通过NAME来指定输出的文件名</span><br><span class="line">--vagrantfile FILE：（可选）可以将Vagrantfile直接封进box中</span><br></pre></td></tr></table></figure>
<p>完成后会在当前目录就会生成package.box，可以在家或者团队成员共享开发环境保持一致性</p>
<h3 id="其它命令">其它命令</h3><p>vagrant up （启动虚拟机）<br>vagrant halt （关闭虚拟机——对应就是关机）<br>vagrant suspend （暂停虚拟机——只是暂停，虚拟机内存等信息将以状态文件的方式保存在本地，可以执行恢复操作后继续使用）<br>vagrant resume （恢复虚拟机 —— 与前面的暂停相对应）<br>vagrant box remove centos6.6 （移除box，其中centos6.6是box名）<br>vagrant destroy （删除虚拟机，删除后在当前虚拟机所做进行的除开Vagrantfile中的配置都不会保留）</p>
<h2 id="Laravel_Homestead">Laravel Homestead</h2><blockquote>
<p>细节部分可参考官方文档 - <a href="http://laravel.com/docs/5.1/homestead" target="_blank" rel="external">http://laravel.com/docs/5.1/homestead</a></p>
</blockquote>
<p>1.下载安装包</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">vagrant box add laravel/homestead</span><br><span class="line"></span><br><span class="line">E:\Homestead&gt;vagrant box add laravel/homestead</span><br><span class="line">==&gt; box: Loading metadata <span class="keyword">for</span> box <span class="string">'laravel/homestead'</span></span><br><span class="line">    box: URL: https://atlas.hashicorp.com/laravel/homestead</span><br><span class="line">This box can work with multiple providers! The providers that it</span><br><span class="line">can work with are listed below. Please review the list and choose</span><br><span class="line">the provider you will be working with.</span><br><span class="line"></span><br><span class="line"><span class="number">1</span>) virtualbox</span><br><span class="line"><span class="number">2</span>) vmware_desktop</span><br><span class="line"></span><br><span class="line">Enter your choice: <span class="number">1</span></span><br><span class="line">==&gt; box: Adding box <span class="string">'laravel/homestead'</span> (v0.<span class="number">2.7</span>) <span class="keyword">for</span> provider: virtualbox</span><br><span class="line">    box: Downloading: https://vagrantcloud.com/laravel/boxes/homestead/versions/<span class="number">0.2</span>.<span class="number">7</span>/providers/virtualbox.box</span><br><span class="line">    box: Progress: <span class="number">0</span>% (Rate: <span class="number">9</span>d/s, Estimated time remaining: <span class="number">0</span>:<span class="number">05</span>:<span class="number">30</span>)<span class="number">11</span>))</span><br></pre></td></tr></table></figure>
<blockquote>
<p>由于国内网络环境问题建议离线下载后手动导入</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#输入命令初始化</span></span><br><span class="line">E:\Homestead&gt;vagrant init laravel</span><br><span class="line">A `Vagrantfile` has been placed <span class="keyword">in</span> this directory. You are now</span><br><span class="line">ready to `vagrant up` your first virtual environment! Please <span class="built_in">read</span></span><br><span class="line">the comments <span class="keyword">in</span> the Vagrantfile as well as documentation on</span><br><span class="line">`vagrantup.com` <span class="keyword">for</span> more information on using Vagrant.</span><br><span class="line"></span><br><span class="line"><span class="comment">#执行添加命令</span></span><br><span class="line">E:\Homestead&gt;vagrant box add laravel laravel.box</span><br><span class="line">==&gt; box: Box file was not detected as metadata. Adding it directly...</span><br><span class="line">==&gt; box: Adding box <span class="string">'laravel'</span> (v0) <span class="keyword">for</span> provider:</span><br><span class="line">    box: Unpacking necessary files from: file://E:/Homestead/laravel.box</span><br><span class="line">    box: Progress: <span class="number">100</span>% (Rate: <span class="number">141</span>M/s, Estimated time remaining: --:--:--)</span><br><span class="line">==&gt; box: Successfully added box <span class="string">'laravel'</span> (v0) <span class="keyword">for</span> <span class="string">'virtualbox'</span>!</span><br><span class="line"></span><br><span class="line"><span class="comment">#检查是否导入成功</span></span><br><span class="line">E:\Homestead&gt;vagrant box list</span><br><span class="line">centos6.<span class="number">6</span> (virtualbox, <span class="number">0</span>)</span><br><span class="line">laravel   (virtualbox, <span class="number">0</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">#启动Lavarel Homestead</span></span><br><span class="line">E:\Homestead&gt;vagrant up</span><br><span class="line">Bringing machine <span class="string">'default'</span> up with <span class="string">'virtualbox'</span> provider...</span><br><span class="line">==&gt; default: Importing base box <span class="string">'laravel'</span>...</span><br><span class="line">==&gt; default: Matching MAC address <span class="keyword">for</span> NAT networking...</span><br><span class="line">==&gt; default: Setting the name of the VM: Homestead_default_1437217549272_56101</span><br><span class="line">==&gt; default: Clearing any previously <span class="built_in">set</span> network interfaces...</span><br><span class="line">==&gt; default: Preparing network interfaces based on configuration...</span><br><span class="line">    default: Adapter <span class="number">1</span>: nat</span><br><span class="line">==&gt; default: Forwarding ports...</span><br><span class="line">    default: <span class="number">22</span> =&gt; <span class="number">2222</span> (adapter <span class="number">1</span>)</span><br><span class="line">==&gt; default: Booting VM...</span><br><span class="line">==&gt; default: Waiting <span class="keyword">for</span> machine to boot. This may take a few minutes...</span><br><span class="line">    default: SSH address: <span class="number">127.0</span>.<span class="number">0.1</span>:<span class="number">2222</span></span><br><span class="line">    default: SSH username: vagrant</span><br><span class="line">    default: SSH auth method: private key</span><br><span class="line">    default: Warning: Connection timeout. Retrying...</span><br><span class="line">    default:</span><br><span class="line">    default: Vagrant insecure key detected. Vagrant will automatically replace</span><br><span class="line">    default: this with a newly generated keypair <span class="keyword">for</span> better security.</span><br><span class="line">    default:</span><br><span class="line">    default: Inserting generated public key within guest...</span><br><span class="line">    default: Removing insecure key from the guest <span class="keyword">if</span> it<span class="string">'s present...</span><br><span class="line">    default: Key inserted! Disconnecting and reconnecting using new SSH key...</span><br><span class="line">==&gt; default: Machine booted and ready!</span><br><span class="line">==&gt; default: Checking for guest additions in VM...</span><br><span class="line">    default: The guest additions on this VM do not match the installed version of</span><br><span class="line">    default: VirtualBox! In most cases this is fine, but in rare cases it can</span><br><span class="line">    default: prevent things such as shared folders from working properly. If you see</span><br><span class="line">    default: shared folder errors, please make sure the guest additions within the</span><br><span class="line">    default: virtual machine match the version of VirtualBox you have installed on</span><br><span class="line">    default: your host and reload your VM.</span><br><span class="line">    default:</span><br><span class="line">    default: Guest Additions Version: 4.3.14</span><br><span class="line">    default: VirtualBox Version: 5.0</span><br><span class="line">==&gt; default: Mounting shared folders...</span><br><span class="line">    default: /vagrant =&gt; E:/Homestead</span></span><br></pre></td></tr></table></figure>
<p>登录帐户<code>vagrant/vagrant</code>，开始全新的<code>Laravel Homestead</code>体验之旅吧。</p>
]]></content>
    <summary type="html">
    <![CDATA[用Vagrant为自己打造一个奇妙的跨平台开发环境]]>
    
    </summary>
    
      <category term="学习 | Study" scheme="http://wsgzao.github.io/categories/%E5%AD%A6%E4%B9%A0-Study/"/>
    
  </entry>
  
  <entry>
    <title><![CDATA[使用GoAccess分析Nginx日志以及sed/awk手动分析实践]]></title>
    <link href="http://wsgzao.github.io/post/goaccess/"/>
    <id>http://wsgzao.github.io/post/goaccess/</id>
    <published>2015-07-16T02:48:05.000Z</published>
    <updated>2015-07-16T05:51:26.968Z</updated>
    <content type="html"><![CDATA[<p><img src="http://www.goaccess.io/images/goaccess-html-report.png" alt=""></p>
<h2 id="前言">前言</h2><p>使用Nginx的网站可能会遇到访问流量异常、被友情检测、程序出现Bug等各种突然情况，这时大家的反应想必都是第一时间分析日志，然后发现日志有几十GB之多，又需要按照时间、错误类型或者关键字段检索信息时会不会有种醍醐灌顶、菊花一紧的错觉。文中介绍的方法不管是GoAccess还是sed/awk虽然可以解决一时的问题但未必能够治本，也许<code>ELK(Logstash+ElasticSearch+Kibana)</code>对我们大多数人来说是更合理的集中化日志管理解决方案。</p>
<blockquote>
<p>日志固然重要，但努力建设适合业务发展的集中化日志管理平台才是基础核心</p>
</blockquote>
<hr>
<h2 id="更新历史">更新历史</h2><p>2015年07月16日 - 初稿</p>
<p>阅读原文 - <a href="http://wsgzao.github.io/post/goaccess/" target="_blank" rel="external">http://wsgzao.github.io/post/goaccess/</a></p>
<p>扩展阅读</p>
<p>GoAccess - <a href="http://goaccess.io/" target="_blank" rel="external">http://goaccess.io/</a><br>用GoAccess分析Nginx的日志 - <a href="http://www.fancycoding.com/log-analyse-using-goaccess/" target="_blank" rel="external">http://www.fancycoding.com/log-analyse-using-goaccess/</a><br>sed 简明教程 - <a href="http://coolshell.cn/articles/9104.html" target="_blank" rel="external">http://coolshell.cn/articles/9104.html</a><br>AWK 简明教程 - <a href="http://coolshell.cn/articles/9070.html" target="_blank" rel="external">http://coolshell.cn/articles/9070.html</a></p>
<hr>
<h2 id="安装GoAccess">安装GoAccess</h2><blockquote>
<p>各平台都有灰常简单的部署方案 - <a href="http://goaccess.io/download" target="_blank" rel="external">http://goaccess.io/download</a></p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">wget http://tar.goaccess.io/goaccess-<span class="number">0.9</span>.<span class="number">2</span>.tar.gz</span><br><span class="line">tar -xzvf goaccess-<span class="number">0.9</span>.<span class="number">2</span>.tar.gz</span><br><span class="line"><span class="built_in">cd</span> goaccess-<span class="number">0.9</span>.<span class="number">2</span>/</span><br><span class="line">./configure --enable-utf8</span><br><span class="line">make</span><br><span class="line">make install</span><br></pre></td></tr></table></figure>
<h2 id="使用方式">使用方式</h2><blockquote>
<p>更多常见问题请参考官方FAQ - <a href="http://goaccess.io/faq" target="_blank" rel="external">http://goaccess.io/faq</a></p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">#直接打开</span></span><br><span class="line">goaccess <span class="operator">-f</span> access.log</span><br><span class="line"></span><br><span class="line"><span class="comment">#选择日志格式</span></span><br><span class="line">NCSA Combined Log Format</span><br><span class="line"></span><br><span class="line"><span class="comment">#剩下的操作都蛮简单的，参考扩展阅读和官方文档吧</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#导出HTML报告会遇到的问题</span></span><br><span class="line">goaccess <span class="operator">-f</span> time_access.log <span class="operator">-a</span> &gt; report.html</span><br><span class="line"></span><br><span class="line">GoAccess - version <span class="number">0.9</span>.<span class="number">2</span> - Jul <span class="number">15</span> <span class="number">2015</span> <span class="number">16</span>:<span class="number">23</span>:<span class="number">20</span></span><br><span class="line">Config file: /usr/<span class="built_in">local</span>/etc/goaccess.conf</span><br><span class="line"></span><br><span class="line">Fatal error has occurred</span><br><span class="line">Error occured at: src/parser.c - verify_formats - <span class="number">1691</span></span><br><span class="line">No time format was found on your conf file.</span><br><span class="line"></span><br><span class="line"><span class="comment">#添加配置文件</span></span><br><span class="line">vi ~/.goaccessrc</span><br><span class="line"></span><br><span class="line">time-format %T</span><br><span class="line">date-format %d/%b/%Y</span><br><span class="line"><span class="built_in">log</span>-format %h %^[%d:%t %^] <span class="string">"%r"</span> %s %b <span class="string">"%R"</span> <span class="string">"%u"</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#重新指定配置文件后执行</span></span><br><span class="line">goaccess <span class="operator">-f</span> time_access.log -p ~/.goaccessrc <span class="operator">-a</span> &gt; report.html</span><br></pre></td></tr></table></figure>
<h2 id="使用bash/sed/awk手动查找Nginx日志">使用bash/sed/awk手动查找Nginx日志</h2><blockquote>
<p>更多技巧可以参考扩展阅读，Python的处理效率或者更优</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#按日期查找时间段</span></span><br><span class="line">sed -n <span class="string">"/14\/Jul\/2015:00:00:00/,/15\/Jul\/2015:15:00:00/"</span>p access.log &gt; time_access.log</span><br><span class="line"></span><br><span class="line"><span class="comment">#查找504错误的页面和数量</span></span><br><span class="line">awk <span class="string">'($9 ~ /504/)'</span> time_access.log | awk <span class="string">'&#123;print $7&#125;'</span> | sort | uniq -c | sort -rn &gt; <span class="number">504</span>.log</span><br><span class="line"></span><br><span class="line"><span class="comment">#查找访问最多的20个IP及访问次数</span></span><br><span class="line">awk <span class="string">'&#123;print $1&#125;'</span> time_access.log | sort | uniq -c | sort -n -k <span class="number">1</span> -r | head -n <span class="number">20</span> &gt; top.log</span><br></pre></td></tr></table></figure>
]]></content>
    <summary type="html">
    <![CDATA[日志固然重要，但努力建设适合业务发展的集中化日志管理平台才是基础核心]]>
    
    </summary>
    
      <category term="学习 | Study" scheme="http://wsgzao.github.io/categories/%E5%AD%A6%E4%B9%A0-Study/"/>
    
  </entry>
  
  <entry>
    <title><![CDATA[中文文案排版指北]]></title>
    <link href="http://wsgzao.github.io/post/chinese-copywriting-guidelines/"/>
    <id>http://wsgzao.github.io/post/chinese-copywriting-guidelines/</id>
    <published>2015-07-11T07:31:24.000Z</published>
    <updated>2015-07-11T08:40:10.000Z</updated>
    <content type="html"><![CDATA[<p><img src="http://i.v2ex.co/ekrNgJeK.jpeg" alt=""></p>
<h2 id="前言">前言</h2><blockquote>
<p>统一中文文案、排版的相关用法，降低团队成员之间的沟通成本，增强网站气质。</p>
</blockquote>
<hr>
<h2 id="更新历史">更新历史</h2><p>2015年07月11日 - 转载初稿，转化为简体中文</p>
<p>阅读原文 - <a href="http://wsgzao.github.io/post/chinese-copywriting-guidelines/" target="_blank" rel="external">http://wsgzao.github.io/post/chinese-copywriting-guidelines/</a></p>
<p>扩展阅读</p>
<p>Chinese Copywriting Guidelines：中文文案排版指北 - <a href="https://github.com/sparanoid/chinese-copywriting-guidelines" target="_blank" rel="external">https://github.com/sparanoid/chinese-copywriting-guidelines</a></p>
<hr>
<h2 id="Table_of_Contents">Table of Contents</h2><ul>
<li><a href="#spacing">空格</a><ul>
<li><a href="#spacing-c1">中英文之间需要增加空格</a></li>
<li><a href="#spacing-c2">中文与数字之间需要增加空格</a></li>
<li><a href="#spacing-c3">数字与单位之间需要增加空格</a></li>
<li><a href="#spacing-c4">全形标点与其他字符之间不加空格</a></li>
<li><a href="#spacing-c5"><code>-ms-text-autospace</code> to the rescue?</a></li>
</ul>
</li>
<li><a href="#punctuation-marks">标点符号</a><ul>
<li><a href="#punctuation-marks-c1">不重複使用标点符号</a></li>
</ul>
</li>
<li><a href="#fullwidth-halfwidth">全形和半形</a><ul>
<li><a href="#fullwidth-halfwidth-c1">使用全形中文标点</a></li>
<li><a href="#fullwidth-halfwidth-c2">数字使用半形字符</a></li>
<li><a href="#fullwidth-halfwidth-c3">遇到完整的英文整句、特殊名词，其内容使用半形标点</a></li>
</ul>
</li>
<li><a href="#glossaries">名词</a><ul>
<li><a href="#glossaries-c1">专有名词使用正确的大小写</a></li>
<li><a href="#glossaries-c2">不要使用不地道的缩写</a></li>
</ul>
</li>
<li><a href="#dispute">争议</a><ul>
<li><a href="#dispute-c1">中文链接之间增加空格</a></li>
<li><a href="#dispute-c2">简体中文使用直角引号</a></li>
</ul>
</li>
<li><a href="#tools">工具</a></li>
<li><a href="#who-is-using">谁在这样做？</a></li>
<li><a href="#references">参考文献</a></li>
</ul>
<p><a name="spacing"></a></p>
<h2 id="空格">空格</h2><p>「有研究显示，打字的时候不喜欢在中文和英文之间加空格的人，感情路都走得很辛苦，有七成的比例会在 34 岁的时候跟自己不爱的人结婚，而其余三成的人最后只能把遗产留给自己的猫。毕竟爱情跟书写都需要适时地留白。</p>
<p>与大家共勉之。」——<a href="https://github.com/vinta/paranoid-auto-spacing" target="_blank" rel="external">vinta/paranoid-auto-spacing</a></p>
<p><a name="spacing-c1"></a></p>
<h3 id="中英文之间需要增加空格">中英文之间需要增加空格</h3><p>正确：</p>
<blockquote>
<p>在 LeanCloud 上，数据存储是围绕 <code>AVObject</code> 进行的。</p>
</blockquote>
<p>错误：</p>
<blockquote>
<p>在LeanCloud上，数据存储是围绕<code>AVObject</code>进行的。</p>
<p>在 LeanCloud上，数据存储是围绕<code>AVObject</code> 进行的。</p>
</blockquote>
<p>完整的正确用法：</p>
<blockquote>
<p>在 LeanCloud 上，数据存储是围绕 <code>AVObject</code> 进行的。每个 <code>AVObject</code> 都包含了与 JSON 兼容的 key-value 对应的数据。数据是 schema-free 的，你不需要在每个 <code>AVObject</code> 上提前指定存在哪些键，只要直接设定对应的 key-value 即可。</p>
</blockquote>
<p>:exclamation: 例外：「豆瓣FM」等产品名词，按照官方所定义的格式书写。</p>
<p><a name="spacing-c2"></a></p>
<h3 id="中文与数字之间需要增加空格">中文与数字之间需要增加空格</h3><p>正确：</p>
<blockquote>
<p>今天出去买菜花了 5000 元。</p>
</blockquote>
<p>错误：</p>
<blockquote>
<p>今天出去买菜花了 5000元。</p>
<p>今天出去买菜花了5000元。</p>
</blockquote>
<p><a name="spacing-c3"></a></p>
<h3 id="数字与单位之间需要增加空格">数字与单位之间需要增加空格</h3><p>正确：</p>
<blockquote>
<p>我家的光纤入屋宽频有 10 Gbps，SSD 一共有 20 TB。</p>
</blockquote>
<p>错误：</p>
<blockquote>
<p>我家的光纤入屋宽频有 10Gbps，SSD 一共有 20TB。</p>
</blockquote>
<p>:exclamation: 例外：度／百分比与数字之间不需要增加空格：</p>
<p>正确：</p>
<blockquote>
<p>今天是 233° 的高温。</p>
<p>新 MacBook Pro 有 15% 的 CPU 性能提升。</p>
</blockquote>
<p>错误：</p>
<blockquote>
<p>今天是 233 ° 的高温。</p>
<p>新 MacBook Pro 有 15 % 的 CPU 性能提升。</p>
</blockquote>
<p><a name="spacing-c4"></a></p>
<h3 id="全形标点与其他字符之间不加空格">全形标点与其他字符之间不加空格</h3><p>正确：</p>
<blockquote>
<p>刚刚买了一部 iPhone，好开心！</p>
</blockquote>
<p>错误：</p>
<blockquote>
<p>刚刚买了一部 iPhone ，好开心！</p>
</blockquote>
<p><a name="spacing-c5"></a></p>
<h3 id="-ms-text-autospace_to_the_rescue?"><code>-ms-text-autospace</code> to the rescue?</h3><p>Microsoft 有个 <a href="http://msdn.microsoft.com/en-us/library/ie/ms531164(v=vs.85" target="_blank" rel="external"><code>-ms-text-autospace</code></a>.aspx) 的 CSS 属性可以实现自动为中英文之间增加空白。不过目前并未普及，另外在其他应用场景，例如 OS X、iOS 的用户介面目前并不存在这个特性，所以请继续保持随手加空格的习惯。</p>
<p><a name="punctuation-marks"></a></p>
<h2 id="标点符号">标点符号</h2><p><a name="punctuation-marks-c1"></a></p>
<h3 id="不重複使用标点符号">不重複使用标点符号</h3><p>正确：</p>
<blockquote>
<p>德国队竟然战胜了巴西队！</p>
<p>她竟然对你说「喵」？！</p>
</blockquote>
<p>错误：</p>
<blockquote>
<p>德国队竟然战胜了巴西队！！</p>
<p>德国队竟然战胜了巴西队！！！！</p>
<p>德国队竟然战胜了巴西队！！！！！！！！</p>
<p>她竟然对你说「喵」？？！！</p>
<p>她竟然对你说「喵」？！？！？？！！</p>
</blockquote>
<p><a name="fullwidth-halfwidth"></a></p>
<h2 id="全形和半形">全形和半形</h2><p>:exclamation: 不明白什麽是全形（全角）与半形（半角）符号？请查看维基百科词条『<a href="http://zh.wikipedia.org/wiki/%E5%85%A8%E5%BD%A2%E5%92%8C%E5%8D%8A%E5%BD%A2" target="_blank" rel="external">全形和半形</a>』。</p>
<p><a name="fullwidth-halfwidth-c1"></a></p>
<h3 id="使用全形中文标点">使用全形中文标点</h3><p>正确：</p>
<blockquote>
<p>嗨！你知道嘛？今天前台的小妹跟我说「喵」了哎！</p>
<p>核磁共振成像（NMRI）是什麽原理都不知道？JFGI！</p>
</blockquote>
<p>错误：</p>
<blockquote>
<p>嗨! 你知道嘛? 今天前台的小妹跟我说 “喵” 了哎!</p>
<p>嗨!你知道嘛?今天前台的小妹跟我说”喵”了哎!</p>
<p>核磁共振成像 (NMRI) 是什麽原理都不知道? JFGI!</p>
<p>核磁共振成像(NMRI)是什麽原理都不知道?JFGI!</p>
</blockquote>
<p><a name="fullwidth-halfwidth-c2"></a></p>
<h3 id="数字使用半形字符">数字使用半形字符</h3><p>正确：</p>
<blockquote>
<p>这件蛋糕只卖 1000 元。</p>
</blockquote>
<p>错误：</p>
<blockquote>
<p>这件蛋糕只卖 １０００ 元。</p>
</blockquote>
<p>:exclamation: 例外：在设计稿、宣传海报中如出现极少量数字的情形时，为方便文字对齐，是可以使用全形数字的。</p>
<p><a name="fullwidth-halfwidth-c3"></a></p>
<h3 id="遇到完整的英文整句、特殊名词，其内容使用半形标点">遇到完整的英文整句、特殊名词，其内容使用半形标点</h3><p>正确：</p>
<blockquote>
<p>乔帮主那句话是怎麽说的？「Stay hungry, stay foolish.」。</p>
<p>推荐你阅读『Hackers &amp; Painters: Big Ideas from the Computer Age』，非常的有趣。</p>
</blockquote>
<p>错误：</p>
<blockquote>
<p>乔帮主那句话是怎麽说的？「Stay hungry，stay foolish。」。</p>
<p>推荐你阅读『Hackers＆Painters：Big Ideas from the Computer Age』，非常的有趣。</p>
</blockquote>
<p><a name="glossaries"></a></p>
<h2 id="名词">名词</h2><p><a name="glossaries-c1"></a></p>
<h3 id="专有名词使用正确的大小写">专有名词使用正确的大小写</h3><p>大小写相关用法原属于英文书写范畴，不属于本 wiki 讨论内容，在这裡只对部分易错用法进行简述。</p>
<p>正确：</p>
<blockquote>
<p>使用 GitHub 登录</p>
<p>我们的客户有 GitHub、Foursquare、Microsoft Corporation、Google、Facebook, Inc.。</p>
</blockquote>
<p>错误：</p>
<blockquote>
<p>使用 github 登录</p>
<p>使用 GITHUB 登录</p>
<p>使用 Github 登录</p>
<p>使用 gitHub 登录</p>
<p>使用 g?ん?Ц8 登录</p>
<p>我们的客户有 github、foursquare、microsoft corporation、google、facebook, inc.。</p>
<p>我们的客户有 GITHUB、FOURSQUARE、MICROSOFT CORPORATION、GOOGLE、FACEBOOK, INC.。</p>
<p>我们的客户有 Github、FourSquare、MicroSoft Corporation、Google、FaceBook, Inc.。</p>
<p>我们的客户有 gitHub、fourSquare、microSoft Corporation、google、faceBook, Inc.。</p>
<p>我们的客户有 g?ん?Ц8、?ouЯ?qu?г?、???г????t ??г??г?t???n、900913、?4??в??к, IП?.。</p>
</blockquote>
<p>注意：当网页中需要配合整体视觉风格而出现全部大写／小写的情形，HTML 中请使用标准的大小写规范进行书写；并通过 <code>text-transform: uppercase;</code>／<code>text-transform: lowercase;</code> 对表现形式进行定义。</p>
<p><a name="glossaries-c2"></a></p>
<h3 id="不要使用不地道的缩写">不要使用不地道的缩写</h3><p>正确：</p>
<blockquote>
<p>我们需要一位熟悉 JavaScript、HTML5，至少理解一种框架（如 Backbone.js、AngularJS、React 等）的前端开发者。</p>
</blockquote>
<p>错误：</p>
<blockquote>
<p>我们需要一位熟悉 Js、h5，至少理解一种框架（如 backbone、angular、RJS 等）的 FED。</p>
</blockquote>
<p><a name="dispute"></a></p>
<h2 id="争议">争议</h2><p>:exclamation: 以下用法略带有个人色彩，既：无论是否遵循下述规则，从语法的角度来讲都是<strong>正确</strong>的。</p>
<p><a name="dispute-c1"></a></p>
<h3 id="中文链接之间增加空格">中文链接之间增加空格</h3><p>用法：</p>
<blockquote>
<p>请 <a href="#">提交一个 issue</a> 并分配给相关同事。</p>
<p>访问我们网站的最新动态，请 <a href="#">点击这裡</a> 进行订阅！</p>
</blockquote>
<p>对比用法：</p>
<blockquote>
<p>请<a href="#">提交一个 issue</a> 并分配给相关同事。</p>
<p>访问我们网站的最新动态，请<a href="#">点击这裡</a>进行订阅！</p>
</blockquote>
<p><a name="dispute-c2"></a></p>
<h3 id="简体中文使用直角引号">简体中文使用直角引号</h3><p>用法：</p>
<blockquote>
<p>「老师，『有条不紊』的『紊』是什么意思？」</p>
</blockquote>
<p>对比用法：</p>
<blockquote>
<p>“老师，‘有条不紊’的‘紊’是什么意思？”</p>
</blockquote>
<p><a name="tools"></a></p>
<h2 id="工具">工具</h2><table>
<thead>
<tr>
<th>仓库</th>
<th>语言</th>
</tr>
</thead>
<tbody>
<tr>
<td><a href="https://github.com/vinta/paranoid-auto-spacing" target="_blank" rel="external">vinta/paranoid-auto-spacing</a></td>
<td>JavaScript</td>
</tr>
<tr>
<td><a href="https://github.com/huei90/pangu.node" target="_blank" rel="external">huei90/pangu.node</a></td>
<td>Node.js</td>
</tr>
<tr>
<td><a href="https://github.com/huacnlee/auto-correct" target="_blank" rel="external">huacnlee/auto-correct</a></td>
<td>Ruby</td>
</tr>
<tr>
<td><a href="https://github.com/sparanoid/space-lover" target="_blank" rel="external">sparanoid/space-lover</a></td>
<td>PHP (WordPress)</td>
</tr>
<tr>
<td><a href="https://github.com/hotoo/pangu.vim" target="_blank" rel="external">hotoo/pangu.vim</a></td>
<td>Vim</td>
</tr>
</tbody>
</table>
<p><a name="who-is-using"></a></p>
<h2 id="谁在这样做？">谁在这样做？</h2><table>
<thead>
<tr>
<th>网站</th>
<th>文案</th>
<th>UGC</th>
</tr>
</thead>
<tbody>
<tr>
<td><a href="http://www.apple.com/cn/" target="_blank" rel="external">Apple 中国</a></td>
<td>Yes</td>
<td>N/A</td>
</tr>
<tr>
<td><a href="http://www.apple.com/hk/" target="_blank" rel="external">Apple 香港</a></td>
<td>Yes</td>
<td>N/A</td>
</tr>
<tr>
<td><a href="http://www.apple.com/tw/" target="_blank" rel="external">Apple 台湾</a></td>
<td>Yes</td>
<td>N/A</td>
</tr>
<tr>
<td><a href="http://www.microsoft.com/zh-cn/" target="_blank" rel="external">Microsoft 中国</a></td>
<td>Yes</td>
<td>N/A</td>
</tr>
<tr>
<td><a href="http://www.microsoft.com/zh-hk/" target="_blank" rel="external">Microsoft 香港</a></td>
<td>Yes</td>
<td>N/A</td>
</tr>
<tr>
<td><a href="http://www.microsoft.com/zh-tw/" target="_blank" rel="external">Microsoft 台湾</a></td>
<td>Yes</td>
<td>N/A</td>
</tr>
<tr>
<td><a href="http://leancloud.cn/" target="_blank" rel="external">LeanCloud</a></td>
<td>Yes</td>
<td>N/A</td>
</tr>
<tr>
<td><a href="http://www.zhihu.com/" target="_blank" rel="external">知乎</a></td>
<td>Yes</td>
<td>部分用户达成</td>
</tr>
<tr>
<td><a href="http://www.v2ex.com/" target="_blank" rel="external">V2EX</a></td>
<td>Yes</td>
<td>标题达成</td>
</tr>
<tr>
<td><a href="http://segmentfault.com/" target="_blank" rel="external">SegmentFault</a></td>
<td>Yes</td>
<td>部分用户达成</td>
</tr>
<tr>
<td><a href="http://apple4us.com/" target="_blank" rel="external">Apple4us</a></td>
<td>Yes</td>
<td>N/A</td>
</tr>
<tr>
<td><a href="http://www.wandoujia.com/" target="_blank" rel="external">豌豆荚</a></td>
<td>Yes</td>
<td>N/A</td>
</tr>
<tr>
<td><a href="http://ruby-china.org/" target="_blank" rel="external">Ruby China</a></td>
<td>Yes</td>
<td>标题达成</td>
</tr>
<tr>
<td><a href="http://phphub.org/" target="_blank" rel="external">PHPHub</a></td>
<td>Yes</td>
<td>标题达成</td>
</tr>
</tbody>
</table>
<p><a name="references"></a></p>
<h2 id="参考文献">参考文献</h2><ul>
<li><a href="http://grammar.about.com/od/punctuationandmechanics/a/Guidelines-For-Using-Capital-Letters.htm" target="_blank" rel="external">来自 About.com 的大小写用法（英文）</a></li>
<li><a href="http://en.wikipedia.org/wiki/Letter_case" target="_blank" rel="external">来自维基百科的关于大小写字符的相关条目（英文）</a></li>
<li><a href="http://www.oxforddictionaries.com/us/words/punctuation" target="_blank" rel="external">来自 Oxford Dictionaries 的标点相关用法（英文）</a></li>
<li><a href="https://owl.english.purdue.edu/owl/section/1/6/" target="_blank" rel="external">来自普渡大学的标点符号用法（英文）</a></li>
<li><a href="http://www.wikihow.com/Use-English-Punctuation-Correctly" target="_blank" rel="external">来自 wikiHow 的英文标点符号用法 wiki（英文）</a></li>
<li><a href="https://zh.opensuse.org/index.php?title=Help:%E6%A0%BC%E5%BC%8F" target="_blank" rel="external">格式－openSUSE</a></li>
<li><a href="http://zh.wikipedia.org/wiki/%E5%85%A8%E5%BD%A2%E5%92%8C%E5%8D%8A%E5%BD%A2" target="_blank" rel="external">全形和半形 - 维基百科</a></li>
<li><a href="http://zh.wikipedia.org/wiki/%E5%BC%95%E8%99%9F" target="_blank" rel="external">引号 - 维基百科</a></li>
<li><a href="http://zh.wikipedia.org/wiki/%E7%96%91%E5%95%8F%E9%A9%9A%E5%98%86%E8%99%9F" target="_blank" rel="external">疑问惊叹号 - 维基百科</a></li>
</ul>
]]></content>
    <summary type="html">
    <![CDATA[统一中文文案、排版的相关用法，降低团队成员之间的沟通成本，增强网站气质。]]>
    
    </summary>
    
      <category term="学习 | Study" scheme="http://wsgzao.github.io/categories/%E5%AD%A6%E4%B9%A0-Study/"/>
    
  </entry>
  
  <entry>
    <title><![CDATA[使用Samba实现Linux与Windows文件共享实践]]></title>
    <link href="http://wsgzao.github.io/post/samba/"/>
    <id>http://wsgzao.github.io/post/samba/</id>
    <published>2015-07-11T06:31:57.000Z</published>
    <updated>2015-07-11T06:59:01.000Z</updated>
    <content type="html"><![CDATA[<p><img src="http://i.v2ex.co/Pbu91VnP.png" alt=""></p>
<h2 id="前言">前言</h2><p>一直以来都以为FTP和NFS是局域网文件共享的常用方式，但是在最近接触Samba之后，了解到一些用户需要简化访问学习成本，满足基础的权限控制管理，并支持实时编辑和保存文件，我才明白这些需求使用之前的方法都是很难满足的，而Samba却可以完美的支持上述需求，虽然在开始接触时花了一些时间学习，但把配置和语法梳理清楚之后就很简单了。</p>
<blockquote>
<p>Unix与Windows文件共享的最佳方式之一</p>
</blockquote>
<hr>
<h2 id="更新历史">更新历史</h2><p>2015年07月11日 - 初稿</p>
<p>阅读原文 - <a href="http://wsgzao.github.io/post/samba/" target="_blank" rel="external">http://wsgzao.github.io/post/samba/</a></p>
<p>扩展阅读</p>
<p>Samba - <a href="https://www.samba.org/samba/docs/man/Samba-HOWTO-Collection/" target="_blank" rel="external">https://www.samba.org/samba/docs/man/Samba-HOWTO-Collection/</a><br>SAMBA服务器 - <a href="http://vbird.dic.ksu.edu.tw/linux_server/0370samba.php" target="_blank" rel="external">http://vbird.dic.ksu.edu.tw/linux_server/0370samba.php</a><br>RHEL6.5下部署samba企业级文件服务器实战 - <a href="http://yuan2.blog.51cto.com/446689/1588085" target="_blank" rel="external">http://yuan2.blog.51cto.com/446689/1588085</a></p>
<hr>
<h2 id="安装samba">安装samba</h2><blockquote>
<p>各个平台的安装都蛮简单的，略过</p>
</blockquote>
<h2 id="配置samba">配置samba</h2><blockquote>
<p>建议合理规划目录和用户权限，可以利用用户组来简化授权管理，参见扩展阅读</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">#创建目录（举例）</span></span><br><span class="line">mkdir -p /data2/sm</span><br><span class="line">chmod -R <span class="number">777</span> /data2/sm</span><br><span class="line"></span><br><span class="line"><span class="comment">#添加用户（举例）</span></span><br><span class="line">groupadd dengling</span><br><span class="line">useradd -g dengling <span class="operator">-s</span> /sbin/nologin dengling</span><br><span class="line">smbpasswd <span class="operator">-a</span> dengling</span><br><span class="line"></span><br><span class="line"><span class="comment">#备份smb配置文件并编辑</span></span><br><span class="line"><span class="built_in">cd</span> /etc/samba</span><br><span class="line">cp smb.conf smb.conf.bak</span><br><span class="line">vi smb.conf</span><br><span class="line"></span><br><span class="line"><span class="comment">#全局参数</span></span><br><span class="line">[global]</span><br><span class="line">    security = share</span><br><span class="line">    lanman auth = Yes</span><br><span class="line">    <span class="built_in">log</span> file = /var/<span class="built_in">log</span>/samba/log.%m</span><br><span class="line">    idmap config * : backend = tdb</span><br><span class="line">    guest ok = Yes</span><br><span class="line">    hosts allow = <span class="number">127</span>., <span class="number">172</span>., <span class="number">192.168</span>.<span class="number">1</span>., <span class="number">192.168</span>.<span class="number">3</span>.</span><br><span class="line">    cups options = raw</span><br><span class="line"></span><br><span class="line"><span class="comment">#共享参数</span></span><br><span class="line">[homes]</span><br><span class="line">    comment = Home Directories</span><br><span class="line">    <span class="built_in">read</span> only = No</span><br><span class="line">    browseable = No</span><br><span class="line"></span><br><span class="line">[sheji]</span><br><span class="line">    comment = sheji</span><br><span class="line">    path = /data2/sm/sheji</span><br><span class="line">    valid users = share, shenwei, xuwei, shenjiamei, humengchu, rensiqiang, yeting, tongying, jinbo, zengfanan, fengpeisi</span><br><span class="line">    <span class="built_in">read</span> only = No</span><br><span class="line">    create mask = <span class="number">0775</span></span><br><span class="line">    directory mask = <span class="number">0775</span></span><br><span class="line"></span><br><span class="line">[<span class="built_in">test</span>]</span><br><span class="line">    comment = sheji</span><br><span class="line">    path = /data2/sm/<span class="built_in">test</span></span><br><span class="line">    valid users = <span class="built_in">test</span>, <span class="built_in">test</span>2, shenwei</span><br><span class="line">    <span class="built_in">read</span> only = No</span><br><span class="line">    create mask = <span class="number">0775</span></span><br><span class="line">    directory mask = <span class="number">0775</span></span><br><span class="line"></span><br><span class="line">[q2]</span><br><span class="line">    comment = sheji</span><br><span class="line">    path = /data2/sm/q2</span><br><span class="line">    valid users = xuejia, sungaoshuai, lujingjing, huangsonghe, yefei, lvwenhan, fangyuan, zhanghuichen, liuguofa, xupeiyu, yangpengfei, lisuitao, sunzhen, shenwei, xuwei, shenjiamei, humengchu, rensiqiang, yeting, tongying, jinbo, zengfanan, fengpeisi, chenye, wuailing, pengnan, liangzhixue, chenhong, daimengyou, wangxiaoshuo, zhoujian, fenglu, linlijun, chenshuxian, linzhimin, yanyoushan, xiaguoying, zhanghuanrong, mayushu, xuyangjing, guogaoyan, huangyouyang, jinzhibin, huyuqing, shenxuemei, liukui</span><br><span class="line">    <span class="built_in">read</span> only = No</span><br><span class="line">    create mask = <span class="number">0775</span></span><br><span class="line">    directory mask = <span class="number">0775</span></span><br><span class="line"></span><br><span class="line">[market]</span><br><span class="line">    comment = sheji</span><br><span class="line">    path = /data2/sm/market</span><br><span class="line">    valid users = zhanghuichen, shenwei, chenye, wuailing, pengnan, liangzhixue, chenhong, daimengyou, wangxiaoshuo, xuyangjing, chenshuxian, linzhimin, caoling, guogaoyan, xiehaibo, huangyouyang, jinzhibin, huyuqing</span><br><span class="line">    <span class="built_in">read</span> only = No</span><br><span class="line">    create mask = <span class="number">0777</span></span><br><span class="line">    directory mask = <span class="number">0775</span></span><br><span class="line"></span><br><span class="line">[market_finance]</span><br><span class="line">    comment = sheji</span><br><span class="line">    path = /data2/sm/market_finance</span><br><span class="line">    valid users = yangqiong, shenwei, chenye, wuailing, pengnan, liangzhixue, chenhong, daimengyou, wangxiaoshuo, xiehaibo, gaofangjie, xuyangjing, chenshuxian, linzhimin, huangyouyang, jinzhibin, huyuqing</span><br><span class="line">    <span class="built_in">read</span> only = No</span><br><span class="line">    create mask = <span class="number">0777</span></span><br><span class="line">    directory mask = <span class="number">0775</span></span><br><span class="line"></span><br><span class="line">[shenwei]</span><br><span class="line">    comment = sheji</span><br><span class="line">    path = /data2/sm/develop/shenwei</span><br><span class="line">    valid users = shenwei</span><br><span class="line">    <span class="built_in">read</span> only = No</span><br><span class="line">    create mask = <span class="number">0777</span></span><br><span class="line">    directory mask = <span class="number">0775</span></span><br><span class="line"></span><br><span class="line">[qijun]</span><br><span class="line">    comment = qj</span><br><span class="line">    path = /data2/sm/homedir/qijun</span><br><span class="line">    valid users = qijun</span><br><span class="line">    <span class="built_in">read</span> only = No</span><br><span class="line">    create mask = <span class="number">0777</span></span><br><span class="line">    directory mask = <span class="number">0775</span></span><br><span class="line">    guest ok = No</span><br><span class="line"></span><br><span class="line">[wenyong]</span><br><span class="line">    comment = sheji</span><br><span class="line">    path = /data2/sm/develop/wenyong</span><br><span class="line">    valid users = wenyong</span><br><span class="line">    <span class="built_in">read</span> only = No</span><br><span class="line">    create mask = <span class="number">0777</span></span><br><span class="line">    directory mask = <span class="number">0775</span></span><br><span class="line"></span><br><span class="line">[wudi]</span><br><span class="line">    comment = sheji</span><br><span class="line">    path = /data2/sm/develop/wudi</span><br><span class="line">    valid users = wudi</span><br><span class="line">    <span class="built_in">read</span> only = No</span><br><span class="line">    create mask = <span class="number">0777</span></span><br><span class="line">    directory mask = <span class="number">0775</span></span><br><span class="line"></span><br><span class="line">[caijiannan]</span><br><span class="line">    comment = sheji</span><br><span class="line">    path = /data2/sm/develop/caijiannan</span><br><span class="line">    valid users = caijiannan</span><br><span class="line">    <span class="built_in">read</span> only = No</span><br><span class="line">    create mask = <span class="number">0777</span></span><br><span class="line">    directory mask = <span class="number">0775</span></span><br><span class="line"></span><br><span class="line">[weiduani2]</span><br><span class="line">    comment = weiduan</span><br><span class="line">    path = /data2/sm/develop/raochao/微端</span><br><span class="line">    valid users = wangfeng</span><br><span class="line">    <span class="built_in">read</span> only = No</span><br><span class="line">    create mask = <span class="number">0777</span></span><br><span class="line">    directory mask = <span class="number">0775</span></span><br><span class="line"></span><br><span class="line">[raochao]</span><br><span class="line">    comment = raochao</span><br><span class="line">    path = /data2/sm/develop/raochao</span><br><span class="line">    <span class="built_in">read</span> list = wangfeng, xuwei, shenjiamei, chenxianzhe, chenye, wuailing, liuyuting, dainan</span><br><span class="line">    write list = raochao</span><br><span class="line"></span><br><span class="line">[product]</span><br><span class="line">    comment = product</span><br><span class="line">    path = /data2/sm/product</span><br><span class="line">    <span class="built_in">read</span> only = No</span><br><span class="line">    create mask = <span class="number">0777</span></span><br><span class="line">    directory mask = <span class="number">0777</span></span><br><span class="line"></span><br><span class="line">[jinbo]</span><br><span class="line">    comment = J<span class="keyword">in</span>Bo</span><br><span class="line">    path = /data2/sm/homedir/jinbo</span><br><span class="line">    valid users = jinbo</span><br><span class="line">    <span class="built_in">read</span> only = No</span><br><span class="line">    guest ok = No</span><br><span class="line"></span><br><span class="line">[xiaoqiang]</span><br><span class="line">    comment = xiaoqiang</span><br><span class="line">    path = /data2/sm/homedir/xiaoqiang</span><br><span class="line">    valid users = xiaoqiang</span><br><span class="line">    <span class="built_in">read</span> only = No</span><br><span class="line">    guest ok = No</span><br><span class="line"></span><br><span class="line">[share]</span><br><span class="line">    comment = share</span><br><span class="line">    path = /data2/sm/homedir/share</span><br><span class="line">    valid users = share, market, wal, qijun, zhanghua</span><br><span class="line">    <span class="built_in">read</span> only = No</span><br></pre></td></tr></table></figure>
<h2 id="启动samba">启动samba</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">#常用选项</span></span><br><span class="line">[shared_name]</span><br><span class="line">    path =                              <span class="comment"># 文件系统路径</span></span><br><span class="line">    browseable = &#123;yes|no&#125;               <span class="comment"># 是否可以被查看到</span></span><br><span class="line">    public = &#123;yes|no&#125;                   <span class="comment"># 是否可被所有人读</span></span><br><span class="line">    guest ok = &#123;yes|no&#125;                 <span class="comment"># 与 public 相同</span></span><br><span class="line">    <span class="built_in">read</span> only = yes                     <span class="comment"># 是否只读</span></span><br><span class="line">    writeable = yes                     <span class="comment"># 是否可写</span></span><br><span class="line">    write list = user1, user2           <span class="comment"># 可写用户列表</span></span><br><span class="line">                @group, +group          <span class="comment"># 可写组列表</span></span><br><span class="line">    valid users =                       <span class="comment"># 白名单</span></span><br><span class="line">    invalid users =                     <span class="comment"># 黑名单</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#检查语法</span></span><br><span class="line">testparm</span><br><span class="line"></span><br><span class="line"><span class="comment">#重启smb服务查看状态</span></span><br><span class="line">service smb restart</span><br><span class="line">smbstatus</span><br></pre></td></tr></table></figure>
<h2 id="Windows客户端访问">Windows客户端访问</h2><p>1.Windows上访问samba</p>
<p>在“计算机”中输入：<code>\\xxx.xxx.xxx.xxx\</code></p>
<p>2.Windows断开samba共享连接，实在不行可以选择注销或者重启</p>
<p>在【开始】→【运行】→【CMD】回车中输入：<code>net use * /del /y</code></p>
<p>3.将samba共享的Linux目录映射成Windows的一个驱动器盘符</p>
<p>在【右键计算机】→【映射网络驱动器】→【文件夹\XX.XX.XX.XX\】</p>
]]></content>
    <summary type="html">
    <![CDATA[Unix与Windows文件共享的最佳方式之一]]>
    
    </summary>
    
      <category term="学习 | Study" scheme="http://wsgzao.github.io/categories/%E5%AD%A6%E4%B9%A0-Study/"/>
    
  </entry>
  
  <entry>
    <title><![CDATA[NTP配置实践]]></title>
    <link href="http://wsgzao.github.io/post/ntp/"/>
    <id>http://wsgzao.github.io/post/ntp/</id>
    <published>2015-06-26T06:10:20.000Z</published>
    <updated>2015-06-26T07:24:28.000Z</updated>
    <content type="html"><![CDATA[<p><img src="http://i.v2ex.co/R4iWUNbV.png" alt=""></p>
<h2 id="前言">前言</h2><p>NTP（Network Time Protocol，网络时间协议）是用来使网络中的各个计算机时间同步的一种协议。无论是平时使用的私人计算机还是在工作中搭建的服务器集群，时间的统一性和准确性是十分重要的。本文以自己公司的NTP配置实践过程为例，过程本身并不复杂，原理部分请参考扩展阅读。</p>
<blockquote>
<p>时间同步真的很重要 </p>
</blockquote>
<hr>
<h2 id="更新历史">更新历史</h2><p>2015年06月26日 - 初稿</p>
<p>阅读原文 - <a href="http://wsgzao.github.io/post/ntp/" target="_blank" rel="external">http://wsgzao.github.io/post/ntp/</a></p>
<p>扩展阅读</p>
<ul>
<li>NTP - <a href="http://www.ntp.org/" target="_blank" rel="external">http://www.ntp.org/</a></li>
<li>NTP 服务器 - <a href="http://vbird.dic.ksu.edu.tw/linux_server/0440ntp.php" target="_blank" rel="external">http://vbird.dic.ksu.edu.tw/linux_server/0440ntp.php</a></li>
</ul>
<hr>
<h2 id="准备工作">准备工作</h2><h3 id="检查NTP是否安装">检查NTP是否安装</h3><blockquote>
<p>如果缺少NTP服务,请从官方下载适合自己系统的版本</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#检查rpm包 </span></span><br><span class="line">rpm -qa | grep ntp</span><br><span class="line"></span><br><span class="line">ntp-<span class="number">4.2</span>.<span class="number">4</span>p8-<span class="number">1.16</span>.<span class="number">1</span></span><br><span class="line">yast2-ntp-client-<span class="number">2.17</span>.<span class="number">14</span>-<span class="number">1.10</span>.<span class="number">14</span></span><br></pre></td></tr></table></figure>
<h3 id="手动修改时间">手动修改时间</h3><blockquote>
<p>选择正确的时区，控制误差在5分钟以内</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#查看当前时间</span></span><br><span class="line">date</span><br><span class="line"></span><br><span class="line"><span class="number">2008</span>年 <span class="number">12</span>月 <span class="number">12</span>日 星期五 <span class="number">14</span>:<span class="number">44</span>:<span class="number">12</span> CST</span><br><span class="line">Fri Jun <span class="number">26</span> <span class="number">14</span>:<span class="number">51</span>:<span class="number">37</span> CST <span class="number">2015</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#手动修改时间（月/日/年时:分:秒）</span></span><br><span class="line">date <span class="operator">-s</span> <span class="string">"1/1/09 00:01"</span></span><br><span class="line"></span><br><span class="line"><span class="number">2009</span>年 <span class="number">01</span>月 <span class="number">01</span>日 星期四 <span class="number">00</span>:<span class="number">01</span>:<span class="number">00</span> CST</span><br><span class="line"> </span><br><span class="line"><span class="comment">#手动修改分秒</span></span><br><span class="line">date <span class="operator">-s</span> <span class="number">21</span>:<span class="number">21</span></span><br></pre></td></tr></table></figure>
<h2 id="NTP配置">NTP配置</h2><h3 id="NTP服务端配置">NTP服务端配置</h3><blockquote>
<p>服务端时间来源选择上海交通大学网络中心NTP服务器地址</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#NTP服务端系统版本</span></span><br><span class="line">cat /etc/SuSE-release </span><br><span class="line"></span><br><span class="line">SUSE Linux Enterprise Server <span class="number">11</span> (x86_64)</span><br><span class="line">VERSION = <span class="number">11</span></span><br><span class="line">PATCHLEVEL = <span class="number">2</span></span><br></pre></td></tr></table></figure>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#编辑ntp配置文件</span></span><br><span class="line">vi /etc/ntp.conf</span><br><span class="line"></span><br><span class="line">server <span class="number">202.120</span>.<span class="number">2.101</span> prefer</span><br><span class="line"><span class="comment">#server ntp.sjtu.edu.cn</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#加入自动启动</span></span><br><span class="line">chkconfig ntp on</span><br><span class="line"></span><br><span class="line"><span class="comment">#启动ntp服务</span></span><br><span class="line">service ntp start</span><br><span class="line">service ntp status</span><br><span class="line">service ntp stop</span><br></pre></td></tr></table></figure>
<p>完整的<code>/etc/ntp.conf</code>配置文件如下</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">################################################################################</span></span><br><span class="line"><span class="comment">## /etc/ntp.conf</span></span><br><span class="line"><span class="comment">##</span></span><br><span class="line"><span class="comment">## Sample NTP configuration file.</span></span><br><span class="line"><span class="comment">## See package 'ntp-doc' for documentation, Mini-HOWTO and FAQ.</span></span><br><span class="line"><span class="comment">## Copyright (c) 1998 S.u.S.E. GmbH Fuerth, Germany.</span></span><br><span class="line"><span class="comment">##</span></span><br><span class="line"><span class="comment">## Author: Michael Andres,  &lt;ma@suse.de&gt;</span></span><br><span class="line"><span class="comment">##         Michael Skibbe,  &lt;mskibbe@suse.de&gt;</span></span><br><span class="line"><span class="comment">##</span></span><br><span class="line"><span class="comment">################################################################################</span></span><br><span class="line"></span><br><span class="line"><span class="comment">##</span></span><br><span class="line"><span class="comment">## Radio and modem clocks by convention have addresses in the </span></span><br><span class="line"><span class="comment">## form 127.127.t.u, where t is the clock type and u is a unit </span></span><br><span class="line"><span class="comment">## number in the range 0-3. </span></span><br><span class="line"><span class="comment">##</span></span><br><span class="line"><span class="comment">## Most of these clocks require support in the form of a </span></span><br><span class="line"><span class="comment">## serial port or special bus peripheral. The particular  </span></span><br><span class="line"><span class="comment">## device is normally specified by adding a soft link </span></span><br><span class="line"><span class="comment">## /dev/device-u to the particular hardware device involved, </span></span><br><span class="line"><span class="comment">## where u correspond to the unit number above. </span></span><br><span class="line"><span class="comment">## </span></span><br><span class="line"><span class="comment">## Generic DCF77 clock on serial port (Conrad DCF77)</span></span><br><span class="line"><span class="comment">## Address:     127.127.8.u</span></span><br><span class="line"><span class="comment">## Serial Port: /dev/refclock-u</span></span><br><span class="line"><span class="comment">##  </span></span><br><span class="line"><span class="comment">## (create soft link /dev/refclock-0 to the particular ttyS?)</span></span><br><span class="line"><span class="comment">##</span></span><br><span class="line"><span class="comment"># server 127.127.8.0 mode 5 prefer</span></span><br><span class="line">server <span class="number">202.120</span>.<span class="number">2.101</span> prefer</span><br><span class="line"></span><br><span class="line"><span class="comment">##</span></span><br><span class="line"><span class="comment">## Undisciplined Local Clock. This is a fake driver intended for backup</span></span><br><span class="line"><span class="comment">## and when no outside source of synchronized time is available.</span></span><br><span class="line"><span class="comment">##</span></span><br><span class="line">server <span class="number">127.127</span>.<span class="number">1.0</span> </span><br><span class="line"><span class="comment"># local clock (LCL)</span></span><br><span class="line">fudge <span class="number">127.127</span>.<span class="number">1.0</span>  stratum <span class="number">10</span></span><br><span class="line"><span class="comment"># LCL is unsynchronized</span></span><br><span class="line"></span><br><span class="line"><span class="comment">##</span></span><br><span class="line"><span class="comment">## Add external Servers using</span></span><br><span class="line"><span class="comment">## # rcntp addserver &lt;yourserver&gt;</span></span><br><span class="line"><span class="comment">## </span></span><br><span class="line"></span><br><span class="line"><span class="comment">##</span></span><br><span class="line"><span class="comment">## Miscellaneous stuff</span></span><br><span class="line"><span class="comment">##</span></span><br><span class="line"></span><br><span class="line">driftfile /var/lib/ntp/drift/ntp.drift  </span><br><span class="line"><span class="comment"># path for drift file</span></span><br><span class="line"></span><br><span class="line">logfile /var/<span class="built_in">log</span>/ntp             </span><br><span class="line"><span class="comment"># alternate log file</span></span><br><span class="line"><span class="comment"># logconfig =syncstatus + sysevents</span></span><br><span class="line"><span class="comment"># logconfig =all</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># statsdir /tmp/                # directory for statistics files</span></span><br><span class="line"><span class="comment"># filegen peerstats  file peerstats  type day enable</span></span><br><span class="line"><span class="comment"># filegen loopstats  file loopstats  type day enable</span></span><br><span class="line"><span class="comment"># filegen clockstats file clockstats type day enable</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># Authentication stuff</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line">keys /etc/ntp.keys               </span><br><span class="line"><span class="comment"># path for keys file</span></span><br><span class="line">trustedkey <span class="number">1</span>                     </span><br><span class="line"><span class="comment"># define trusted keys</span></span><br><span class="line">requestkey <span class="number">1</span>                     </span><br><span class="line"><span class="comment"># key (7) for accessing server variables</span></span><br><span class="line"><span class="comment"># controlkey 15                 # key (6) for accessing server variables</span></span><br></pre></td></tr></table></figure>
<h3 id="NTP客户端配置">NTP客户端配置</h3><blockquote>
<p>如无特殊要求，一般使用crontab计划任务同步时间</p>
</blockquote>
<p>1.crontab计划任务方式配置</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">crontab <span class="operator">-e</span></span><br><span class="line"></span><br><span class="line"><span class="number">0</span> <span class="number">0</span> * * * /usr/sbin/sntp -P no -r  <span class="number">172.16</span>.<span class="number">0.3</span>;hwclock -w</span><br></pre></td></tr></table></figure>
<p>2.以服务进程方式实时同步</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#编辑客户端配置文件</span></span><br><span class="line">vi /etc/ntp.conf</span><br><span class="line"></span><br><span class="line">server <span class="number">198.16</span>.<span class="number">2.135</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#启动服务</span></span><br><span class="line">chkconfig ntp on</span><br><span class="line">service ntp restart</span><br><span class="line"></span><br><span class="line"><span class="comment">#如果相差时间较长,请先手动同步</span></span><br><span class="line">sntp -P no -r <span class="number">198.16</span>.<span class="number">2.135</span></span><br><span class="line">ntpdate –d <span class="number">198.16</span>.<span class="number">2.135</span></span><br></pre></td></tr></table></figure>
<h3 id="检查NTP同步状态">检查NTP同步状态</h3><blockquote>
<p>NTP协议为UDP端口是123，offset时间偏移量以毫秒为单位，注意防火墙的控制策略</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#查看服务连接和监听</span></span><br><span class="line">ntp:~ <span class="comment"># netstat -tlunp | grep ntp  </span></span><br><span class="line">udp        <span class="number">0</span>      <span class="number">0</span> <span class="number">198.17</span>.<span class="number">1.224</span>:<span class="number">123</span>        <span class="number">0.0</span>.<span class="number">0.0</span>:*                           <span class="number">28916</span>/ntpd          </span><br><span class="line">udp        <span class="number">0</span>      <span class="number">0</span> <span class="number">198.16</span>.<span class="number">2.224</span>:<span class="number">123</span>        <span class="number">0.0</span>.<span class="number">0.0</span>:*                           <span class="number">28916</span>/ntpd          </span><br><span class="line">udp        <span class="number">0</span>      <span class="number">0</span> <span class="number">127.0</span>.<span class="number">0.2</span>:<span class="number">123</span>           <span class="number">0.0</span>.<span class="number">0.0</span>:*                           <span class="number">28916</span>/ntpd          </span><br><span class="line">udp        <span class="number">0</span>      <span class="number">0</span> <span class="number">127.0</span>.<span class="number">0.1</span>:<span class="number">123</span>           <span class="number">0.0</span>.<span class="number">0.0</span>:*                           <span class="number">28916</span>/ntpd          </span><br><span class="line">udp        <span class="number">0</span>      <span class="number">0</span> <span class="number">0.0</span>.<span class="number">0.0</span>:<span class="number">123</span>             <span class="number">0.0</span>.<span class="number">0.0</span>:*                           <span class="number">28916</span>/ntpd          </span><br><span class="line">udp        <span class="number">0</span>      <span class="number">0</span> ::<span class="number">1</span>:<span class="number">123</span>                 :::*                                <span class="number">28916</span>/ntpd          </span><br><span class="line">udp        <span class="number">0</span>      <span class="number">0</span> fe80::<span class="number">250</span>:<span class="number">56</span>ff:feb9:<span class="number">123</span> :::*                                <span class="number">28916</span>/ntpd          </span><br><span class="line">udp        <span class="number">0</span>      <span class="number">0</span> fe80::<span class="number">250</span>:<span class="number">56</span>ff:feb9:<span class="number">123</span> :::*                                <span class="number">28916</span>/ntpd          </span><br><span class="line">udp        <span class="number">0</span>      <span class="number">0</span> :::<span class="number">123</span>                  :::*                                <span class="number">28916</span>/ntpd          </span><br><span class="line"></span><br><span class="line"><span class="comment">#查看网络中的NTP服务器，同时显示客户端和每个服务器的关系</span></span><br><span class="line">ntp:~ <span class="comment"># ntpq -p  </span></span><br><span class="line">     remote           refid      st t when poll reach   delay   offset  jitter</span><br><span class="line">==============================================================================</span><br><span class="line">*<span class="number">202.120</span>.<span class="number">2.101</span>   <span class="number">202.118</span>.<span class="number">1.81</span>     <span class="number">3</span> u    <span class="number">5</span> <span class="number">1024</span>  <span class="number">377</span>  <span class="number">265.748</span>   -<span class="number">2.819</span>  <span class="number">16.138</span></span><br><span class="line"> LOCAL(<span class="number">0</span>)        .LOCL.          <span class="number">10</span> l   <span class="number">34</span>   <span class="number">64</span>  <span class="number">377</span>    <span class="number">0.000</span>    <span class="number">0.000</span>   <span class="number">0.001</span></span><br></pre></td></tr></table></figure>
]]></content>
    <summary type="html">
    <![CDATA[时间同步真的很重要]]>
    
    </summary>
    
      <category term="学习 | Study" scheme="http://wsgzao.github.io/categories/%E5%AD%A6%E4%B9%A0-Study/"/>
    
  </entry>
  
  <entry>
    <title><![CDATA[使用Bash Shell处理JSON文件]]></title>
    <link href="http://wsgzao.github.io/post/bash-json/"/>
    <id>http://wsgzao.github.io/post/bash-json/</id>
    <published>2015-06-19T06:46:15.000Z</published>
    <updated>2015-06-19T07:21:25.000Z</updated>
    <content type="html"><![CDATA[<p><img src="http://json.org/img/json160.gif" alt=""></p>
<h2 id="前言">前言</h2><p>JSON(JavaScript Object Notation) 是一种轻量级的数据交换格式，易于人阅读和编写，同时也易于机器解析和生成。本文提供一个真实的测试用例需求，设计逻辑类似<code>Makefile</code>，我以Bash处理JSON为例，Coding水平有限，请各位多多包涵哈，欢迎大家一起学习和挑战各种不同的语言来实现。 </p>
<blockquote>
<p>巧用jq处理JSON数据 </p>
</blockquote>
<hr>
<h2 id="更新历史">更新历史</h2><p>2015年06月19日 - 初稿</p>
<p>阅读原文 - <a href="http://wsgzao.github.io/post/bash-json/" target="_blank" rel="external">http://wsgzao.github.io/post/bash-json/</a></p>
<p>扩展阅读</p>
<ul>
<li>JSON - <a href="http://json.org/" target="_blank" rel="external">http://json.org/</a></li>
<li>jq - <a href="http://stedolan.github.io/jq/" target="_blank" rel="external">http://stedolan.github.io/jq/</a></li>
</ul>
<hr>
<h2 id="Test_Case">Test Case</h2><p>In data pipeline system and configuration management systems, it’s very common that you need execute a bunch of jobs which has dependencies with each other.</p>
<p>Write a program <code>pipeline_runner</code> to execute a list of shell scripts. The definition of those scripts and their dependencies are described in a JSON file. The program only takes in one argument which is the file path of JSON file that defines the jobs. </p>
<p>For example,<br>// jobs.json<br><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    "<span class="attribute">log0_compressed</span>" : <span class="value">&#123;</span><br><span class="line">        "<span class="attribute">commands</span>": <span class="value"><span class="string">"curl http://websrv0/logs/access.log.gz &gt; access0.log.gz"</span></span>,</span><br><span class="line">        "<span class="attribute">input</span>": <span class="value">[]</span>,</span><br><span class="line">        "<span class="attribute">output</span>": <span class="value"><span class="string">"access0.log.gz"</span></span><br><span class="line">    </span>&#125;</span>,</span><br><span class="line">    "<span class="attribute">log0</span>" : <span class="value">&#123;</span><br><span class="line">        "<span class="attribute">commands</span>": <span class="value"><span class="string">"gunzip access0.log.gz"</span></span>,</span><br><span class="line">        "<span class="attribute">input</span>": <span class="value">[<span class="string">"access0.log.gz"</span>]</span>,</span><br><span class="line">        "<span class="attribute">output</span>": <span class="value"><span class="string">"access0.log"</span></span><br><span class="line">    </span>&#125;</span>,</span><br><span class="line">    "<span class="attribute">log1_compressed</span>": <span class="value">&#123;</span><br><span class="line">        "<span class="attribute">commands</span>": <span class="value"><span class="string">"curl http://websrv1/logs/access.log.gz &gt; access1.log.gz"</span></span>,</span><br><span class="line">        "<span class="attribute">input</span>": <span class="value">[]</span>,</span><br><span class="line">        "<span class="attribute">output</span>": <span class="value"><span class="string">"access1.log.gz"</span></span><br><span class="line">    </span>&#125;</span>,</span><br><span class="line">    "<span class="attribute">log1</span>" : <span class="value">&#123;</span><br><span class="line">        "<span class="attribute">commands</span>": <span class="value"><span class="string">"gunzip access1.log.gz"</span></span>,</span><br><span class="line">        "<span class="attribute">input</span>": <span class="value">[<span class="string">"access1.log.gz"</span>]</span>,</span><br><span class="line">        "<span class="attribute">output</span>": <span class="value"><span class="string">"access1.log"</span></span><br><span class="line">    </span>&#125;</span>,</span><br><span class="line">    "<span class="attribute">log_combined</span>": <span class="value">&#123;</span><br><span class="line">        "<span class="attribute">commands</span>": <span class="value"><span class="string">"cat access0.log access1.log &gt; access.log"</span></span>,</span><br><span class="line">        "<span class="attribute">input</span>": <span class="value">[<span class="string">"access0.log"</span>, <span class="string">"access1.log"</span>]</span>,</span><br><span class="line">        "<span class="attribute">output</span>": <span class="value"><span class="string">"access.log"</span></span><br><span class="line">    </span>&#125;</span><br><span class="line"></span>&#125;</span><br></pre></td></tr></table></figure></p>
<p>To run the program</p>
<pre><code><span class="title">pipeline_runner</span> jobs.json
</code></pre><p>As you can see, each job has its input files and output files.</p>
<ul>
<li>A job will only be executed if all its input files exist.</li>
<li>A job can have multiple input files (or none) but only produce one output file.</li>
<li>Users could run the program multiple times, but if a job’s output file already exists, the program would skip the job.</li>
</ul>
<p>If you’re still not very clear,  think of <code>Makefile</code> in Linux systems. The logic is quite similar.</p>
<blockquote>
<p>You could complete the test with the programming language you preferred. </p>
</blockquote>
<h2 id="Bash_Shell">Bash Shell</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br></pre></td><td class="code"><pre><span class="line"><span class="shebang">#!/bin/bash</span><br><span class="line"></span></span><br><span class="line"><span class="comment"># dos2unix *.sh</span></span><br><span class="line"><span class="comment"># Program:</span></span><br><span class="line"><span class="comment"># This program to test json.</span></span><br><span class="line"><span class="comment"># History:</span></span><br><span class="line"><span class="comment"># 2015/06/18 by OX</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#---------------------------- custom variables ---------------------start</span></span><br><span class="line">runuser=root</span><br><span class="line"></span><br><span class="line"><span class="comment"># commands</span></span><br><span class="line"><span class="built_in">log</span>_combined_commands=`cat jobs.json | ./jq -r <span class="string">'.log_combined.commands'</span>`</span><br><span class="line"><span class="built_in">log</span>1_commands=`cat jobs.json | ./jq -r <span class="string">'.log1.commands'</span>`</span><br><span class="line"><span class="built_in">log</span>1_compressed_commands=`cat jobs.json | ./jq -r <span class="string">'.log1_compressed.commands'</span>`</span><br><span class="line"><span class="built_in">log</span>0_commands=`cat jobs.json | ./jq -r <span class="string">'.log0.commands'</span>`</span><br><span class="line"><span class="built_in">log</span>0_compressed_commands=`cat jobs.json | ./jq -r <span class="string">'.log0_compressed.commands'</span>`</span><br><span class="line"></span><br><span class="line"><span class="comment"># input file name</span></span><br><span class="line"><span class="built_in">log</span>0_input=`cat jobs.json | ./jq -r <span class="string">'.log0.input[0]'</span>`</span><br><span class="line"><span class="built_in">log</span>1_input=`cat jobs.json | ./jq -r <span class="string">'.log1.input[0]'</span>`</span><br><span class="line"><span class="built_in">log</span>_combined_input1=`cat jobs.json | ./jq -r <span class="string">'.log_combined.input[0]'</span>`</span><br><span class="line"><span class="built_in">log</span>_combined_input2=`cat jobs.json | ./jq -r <span class="string">'.log_combined.input[1]'</span>`</span><br><span class="line"></span><br><span class="line"><span class="comment"># output file name</span></span><br><span class="line"><span class="built_in">log</span>_combined_output=`cat jobs.json | ./jq -r <span class="string">'.log_combined.output'</span>`</span><br><span class="line"><span class="built_in">log</span>1_output=`cat jobs.json | ./jq -r <span class="string">'.log1.output'</span>`</span><br><span class="line"><span class="built_in">log</span>1_compressed_output=`cat jobs.json | ./jq -r <span class="string">'.log1_compressed.output'</span>`</span><br><span class="line"><span class="built_in">log</span>0_output=`cat jobs.json | ./jq -r <span class="string">'.log0.output'</span>`</span><br><span class="line"><span class="built_in">log</span>0_compressed_output=`cat jobs.json | ./jq -r <span class="string">'.log0_compressed.output'</span>`</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#---------------------------- custom variables ---------------------end</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#---------------------------- user check ---------------------start</span></span><br><span class="line"><span class="keyword">if</span> [ <span class="string">"`whoami`"</span> != <span class="string">"<span class="variable">$runuser</span>"</span> ]; <span class="keyword">then</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">"Please re-run <span class="variable">$&#123;this_file&#125;</span> as <span class="variable">$runuser</span>."</span></span><br><span class="line">    <span class="built_in">exit</span> <span class="number">1</span></span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line"><span class="comment">#---------------------------- user check ---------------------end</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#---------------------------- function ---------------------start</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="title">pause</span></span>()</span><br><span class="line">&#123;</span><br><span class="line">    <span class="built_in">read</span> -n1 -p <span class="string">"Press any key to continue..."</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="title">log_combined_check_first</span></span>()</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">if</span> [ <span class="operator">-f</span> <span class="string">"<span class="variable">$log_combined_output</span>"</span> ]; <span class="keyword">then</span></span><br><span class="line">   <span class="built_in">echo</span> <span class="string">"<span class="variable">$&#123;log_combined_output&#125;</span> has been generated, the programe will exit"</span></span><br><span class="line">   <span class="built_in">exit</span> <span class="number">0</span></span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="title">log0_compressed_check</span></span>()</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">if</span> [ ! <span class="operator">-f</span> <span class="string">"<span class="variable">$log0_compressed_output</span>"</span> ]; <span class="keyword">then</span></span><br><span class="line">   <span class="built_in">eval</span> <span class="variable">$&#123;log0_compressed_commands&#125;</span></span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="title">log0_check</span></span>()</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">if</span> [ ! <span class="operator">-f</span> <span class="string">"<span class="variable">$log0_output</span>"</span> ]; <span class="keyword">then</span></span><br><span class="line">   <span class="built_in">eval</span> <span class="variable">$&#123;log0_commands&#125;</span></span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="title">log1_compressed_check</span></span>()</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">if</span> [ ! <span class="operator">-f</span> <span class="string">"<span class="variable">$log1_compressed_output</span>"</span> ]; <span class="keyword">then</span></span><br><span class="line">   <span class="built_in">eval</span> <span class="variable">$&#123;log1_compressed_commands&#125;</span></span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="title">log1_check</span></span>()</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">if</span> [ ! <span class="operator">-f</span> <span class="string">"<span class="variable">$log1_output</span>"</span> ]; <span class="keyword">then</span></span><br><span class="line">   <span class="built_in">eval</span> <span class="variable">$&#123;log1_commands&#125;</span></span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="title">log_combined_check</span></span>()</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">if</span> [ ! <span class="operator">-f</span> <span class="string">"<span class="variable">$log_combined_output</span>"</span> ]; <span class="keyword">then</span></span><br><span class="line">   <span class="built_in">eval</span> <span class="variable">$&#123;log_combined_commands&#125;</span></span><br><span class="line">   <span class="built_in">echo</span> <span class="string">"<span class="variable">$&#123;log_combined_output&#125;</span> has been generated, the programe will exit"</span></span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#---------------------------- function ---------------------end</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#---------------------------- main ---------------------start</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">echo</span> <span class="string">"</span><br><span class="line">Please read first:</span><br><span class="line">[0]Check jobs.json and jq by yourself first</span><br><span class="line">[1]A job will only be executed if all its input files exist.</span><br><span class="line">[2]A job can have multiple input files (or none) but only produce one output file.</span><br><span class="line">[3]Users could run the program multiple times, but if a job's output file already exists, the program would skip the job.</span><br><span class="line"></span><br><span class="line">"</span></span><br><span class="line">pause</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#check if file exist and do the job</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">log</span>_combined_check_first</span><br><span class="line"></span><br><span class="line"><span class="built_in">log</span>0_compressed_check</span><br><span class="line"><span class="built_in">log</span>0_check</span><br><span class="line"></span><br><span class="line"><span class="built_in">log</span>1_compressed_check</span><br><span class="line"><span class="built_in">log</span>1_check</span><br><span class="line"></span><br><span class="line"><span class="built_in">log</span>_combined_check</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#---------------------------- main ---------------------end</span></span><br></pre></td></tr></table></figure>
<h2 id="小结">小结</h2><blockquote>
<p>我的代码未实现任意数量jobs的input，希望大牛指点</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">file://D:\pipeline (<span class="number">2</span> folders, <span class="number">4</span> files, <span class="number">490.55</span> KB, <span class="number">531.04</span> KB <span class="keyword">in</span> total.)</span><br><span class="line">│  jobs.json <span class="number">794</span> bytes</span><br><span class="line">│  jq <span class="number">486.13</span> KB</span><br><span class="line">│  pipeline_runner <span class="number">2.95</span> KB</span><br><span class="line">│  README.md <span class="number">714</span> bytes</span><br><span class="line">├─logs (<span class="number">0</span> folders, <span class="number">2</span> files, <span class="number">248</span> bytes, <span class="number">248</span> bytes <span class="keyword">in</span> total.)</span><br><span class="line">│      access0.log.gz <span class="number">123</span> bytes</span><br><span class="line">│      access1.log.gz <span class="number">125</span> bytes</span><br><span class="line">└─result (<span class="number">0</span> folders, <span class="number">5</span> files, <span class="number">40.25</span> KB, <span class="number">40.25</span> KB <span class="keyword">in</span> total.)</span><br><span class="line">        access.log <span class="number">20.00</span> KB</span><br><span class="line">        access0.log <span class="number">10.00</span> KB</span><br><span class="line">        access0.log.gz <span class="number">123</span> bytes</span><br><span class="line">        access1.log <span class="number">10.00</span> KB</span><br><span class="line">        access1.log.gz <span class="number">125</span> bytes</span><br></pre></td></tr></table></figure>
<p><a href="http://pan.baidu.com/s/1hq1rCP2" target="_blank" rel="external">http://pan.baidu.com/s/1hq1rCP2</a></p>
]]></content>
    <summary type="html">
    <![CDATA[巧用jq处理JSON数据]]>
    
    </summary>
    
      <category term="学习 | Study" scheme="http://wsgzao.github.io/categories/%E5%AD%A6%E4%B9%A0-Study/"/>
    
  </entry>
  
  <entry>
    <title><![CDATA[Linux查看内存大小和插槽]]></title>
    <link href="http://wsgzao.github.io/post/linux-memory/"/>
    <id>http://wsgzao.github.io/post/linux-memory/</id>
    <published>2015-06-04T08:23:07.000Z</published>
    <updated>2015-06-05T05:59:52.000Z</updated>
    <content type="html"><![CDATA[<p><img src="http://i.v2ex.co/ZwWMTwiI.jpeg" alt=""></p>
<h2 id="前言">前言</h2><p>相信大家更换自己笔记本电脑的内存时一定是得心应手，即便是一名新手也可以很轻松的动手实现，其实服务器的内存更换也很简单，关机-&gt;挪盖-&gt;按指定顺序插拔。不过这里有一个很重要的共性前提，需要清楚了解当前硬件所匹配的内存大小型号和插槽数量等依赖关系，这样我们在更换内存时才会更加游刃有余哈。</p>
<blockquote>
<p>更换内存前会用到的实用小技巧</p>
</blockquote>
<hr>
<h2 id="更新历史">更新历史</h2><p>2015年06月05日 - 初稿</p>
<p>阅读原文 - <a href="http://wsgzao.github.io/post/linux-memory/" target="_blank" rel="external">http://wsgzao.github.io/post/linux-memory/</a></p>
<p>扩展阅读</p>
<ul>
<li>MacBook Pro：如何拆卸或安装内存 - <a href="https://support.apple.com/zh-cn/HT1270" target="_blank" rel="external">https://support.apple.com/zh-cn/HT1270</a></li>
</ul>
<hr>
<h2 id="实践过程">实践过程</h2><blockquote>
<p>Linux 查看内存的插槽数，已经使用多少插槽，每条内存多大，已使用内存多大</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">dmidecode | grep  -P  -A5  <span class="string">"Memory\s+Device"</span> | grep Size | grep -v Range </span><br><span class="line"></span><br><span class="line">        Size: <span class="number">16384</span> MB</span><br><span class="line">        Size: No Module Installed</span><br><span class="line">        Size: No Module Installed</span><br><span class="line">        Size: <span class="number">16384</span> MB</span><br><span class="line">        Size: No Module Installed</span><br><span class="line">        Size: No Module Installed</span><br><span class="line">        Size: <span class="number">16384</span> MB</span><br><span class="line">        Size: No Module Installed</span><br><span class="line">        Size: No Module Installed</span><br><span class="line">        Size: <span class="number">16384</span> MB</span><br><span class="line">        Size: No Module Installed</span><br><span class="line">        Size: No Module Installed</span><br><span class="line">        Size: <span class="number">16384</span> MB</span><br><span class="line">        Size: No Module Installed</span><br><span class="line">        Size: <span class="number">16384</span> MB</span><br><span class="line">        Size: No Module Installed</span><br><span class="line">        Size: <span class="number">16384</span> MB</span><br><span class="line">        Size: No Module Installed</span><br><span class="line">        Size: <span class="number">16384</span> MB</span><br><span class="line">        Size: No Module Installed</span><br></pre></td></tr></table></figure>
<blockquote>
<p>Linux 查看内存支持的最大内存容量</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">dmidecode | grep -P  <span class="string">'Maximum\s+Capacity'</span></span><br><span class="line"></span><br><span class="line">        Maximum Capacity: <span class="number">1536</span> GB</span><br></pre></td></tr></table></figure>
<blockquote>
<p>Linux 查看内存的频率</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">dmidecode | grep -A16 <span class="string">"Memory Device"</span> | grep <span class="string">"Speed"</span></span><br><span class="line"></span><br><span class="line">        Speed: <span class="number">1600</span> MHz (<span class="number">0.6</span> ns)</span><br><span class="line">        Speed: Unknown</span><br><span class="line">        Speed: Unknown</span><br><span class="line">        Speed: <span class="number">1600</span> MHz (<span class="number">0.6</span> ns)</span><br><span class="line">        Speed: Unknown</span><br><span class="line">        Speed: Unknown</span><br><span class="line">        Speed: Unknown</span><br><span class="line">        Speed: Unknown</span><br><span class="line">        Speed: <span class="number">1600</span> MHz (<span class="number">0.6</span> ns)</span><br><span class="line">        Speed: Unknown</span><br><span class="line">        Speed: Unknown</span><br><span class="line">        Speed: <span class="number">1600</span> MHz (<span class="number">0.6</span> ns)</span><br><span class="line">        Speed: <span class="number">1600</span> MHz (<span class="number">0.6</span> ns)</span><br><span class="line">        Speed: Unknown</span><br><span class="line">        Speed: Unknown</span><br><span class="line">        Speed: <span class="number">1600</span> MHz (<span class="number">0.6</span> ns)</span><br><span class="line">        Speed: Unknown</span><br><span class="line">        Speed: Unknown</span><br><span class="line">        Speed: Unknown</span><br><span class="line">        Speed: Unknown</span><br><span class="line">        Speed: <span class="number">1600</span> MHz (<span class="number">0.6</span> ns)</span><br><span class="line">        Speed: Unknown</span><br><span class="line">        Speed: Unknown</span><br><span class="line">        Speed: <span class="number">1600</span> MHz (<span class="number">0.6</span> ns)</span><br></pre></td></tr></table></figure>
<blockquote>
<p>查看详细的主板信息</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">dmidecode | grep -A16 <span class="string">"System Information$"</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p>查看详细的内存信息</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">dmidecode | grep -A16 <span class="string">"Memory Device$"</span></span><br><span class="line">dmidecode -t memory</span><br></pre></td></tr></table></figure>
]]></content>
    <summary type="html">
    <![CDATA[更换内存前会用到的实用小技巧]]>
    
    </summary>
    
      <category term="学习 | Study" scheme="http://wsgzao.github.io/categories/%E5%AD%A6%E4%B9%A0-Study/"/>
    
  </entry>
  
  <entry>
    <title><![CDATA[基于AutoYaST自动化安装SuSE实践]]></title>
    <link href="http://wsgzao.github.io/post/autoyast/"/>
    <id>http://wsgzao.github.io/post/autoyast/</id>
    <published>2015-05-27T06:59:49.000Z</published>
    <updated>2015-05-29T08:06:12.000Z</updated>
    <content type="html"><![CDATA[<p><img src="http://i.v2ex.co/u2hch34d.png" alt=""></p>
<h2 id="前言">前言</h2><p>在金融行业中我所接触的操作系统主要是<code>AIX</code>和<code>SLES(SuSE Linux Enterprise Server)</code>，也许大家平时用得更多是<code>CentOS</code>，虽然有部分差异但原理都是相通的，<code>SMIT</code>和<code>YaST</code>也是灰常实用的功能，推荐大家有机会尝试体验下。因为网上关于SuSE自动化部署的参考文章较少，这套自动化部署方案已经被验证并在生产系统使用了1年半，配置相对成熟和稳定。遵循<code>Don&#39;t Repeat Yourself</code>原则，本文主要介绍基于AutoYaST实现半自动化SuSE定制光盘和PXE网络全自动化安装SuSE的实践过程，如需了解更加详细的参数说明可以参考扩展阅读中的SuSE官网。</p>
<blockquote>
<p>AutoYaST是自动化部署SuSE的黄金搭档</p>
</blockquote>
<hr>
<h2 id="更新历史">更新历史</h2><p>2015年05月28日 - 初稿</p>
<p>阅读原文 - <a href="http://wsgzao.github.io/post/autoyast/" target="_blank" rel="external">http://wsgzao.github.io/post/autoyast/</a></p>
<p>扩展阅读</p>
<ul>
<li>SuSE - <a href="https://www.suse.com/zh-cn/" target="_blank" rel="external">https://www.suse.com/zh-cn/</a></li>
<li>AutoYaST - <a href="http://doc.opensuse.org/projects/autoyast/" target="_blank" rel="external">http://doc.opensuse.org/projects/autoyast/</a></li>
<li>Autoinst索引 - <a href="http://wsgzao.github.io/index/#Autoinst" target="_blank" rel="external">http://wsgzao.github.io/index/#Autoinst</a></li>
<li>GitHub源码 - <a href="https://github.com/wsgzao/autoinstall/" target="_blank" rel="external">https://github.com/wsgzao/autoinstall/</a> </li>
</ul>
<hr>
<h2 id="SuSE自动安装光盘">SuSE自动安装光盘</h2><h3 id="定制版本">定制版本</h3><blockquote>
<p>SUSE Linux Enterprise Server 11 (x86_64)<br>VERSION = 11<br>PATCHLEVEL = 2</p>
</blockquote>
<p>下载地址 - <a href="https://www.suse.com/zh-cn/download-linux/" target="_blank" rel="external">https://www.suse.com/zh-cn/download-linux/</a></p>
<h3 id="AutoYast简介">AutoYast简介</h3><p>AutoYast是SuSE Linux的自动安装工具。通过AutoYast，在DHCP、TFTP、PXE服务的支持下，通过FTP、NFS等网络安装源可以实现SuSE Linux的完全无人值守自动安装。但是，这种方式必须建立独立的服务器且客户端支持PXE网络启动，在现场没有网络或者系统不支持客户端网卡的场景下不适合，通过AutoYast制作的SuSE Linux一键安装光盘可以满足上述场景。本文主要介绍SuSE Linux Enterprise Server 11（简称SLES11）一键安装光盘的制作， 其他SuSE Linux仅供参考。</p>
<h3 id="生成AutoYaST配置文件">生成AutoYaST配置文件</h3><p>AutoYast配置成功后，生成一个名为autoinst.xml的XML配置文件，SuSE Linux通过这个文件控制操作系统的安装。AutoYast生成配置文件有3种方式：</p>
<ol>
<li>系统安装时自动生成</li>
<li>系统安装后通过运行命令生成</li>
<li>直接编辑生成（<code>偷懒最佳姿势</code>）</li>
</ol>
<blockquote>
<p>系统安装时生成配置文件</p>
</blockquote>
<p>按照正常步骤安装SLES11，把必须的软件全部安装。运行到最后一步“安装已完成”，勾选“为AutoYast复制此系统”，系统开始克隆系统生成配置文件，并弹出提示窗口。生成配置文件用时约2分钟左右，生成的配置文件位于/root目录下。</p>
<p><img src="http://ww1.sinaimg.cn/large/7207510dgw1esjqdkqiuvj20m80goad3.jpg" alt=""></p>
<blockquote>
<p>运行命令生成或者修改配置文件</p>
</blockquote>
<p>如果在系统安装时没有生成配置文件，可以运行命令生成。在系统中打开终端，以root用户运行命令<code>yast2 autoyast</code>，打开AutoYast配置窗口，选择“工具”-&gt;“创建参考配置文件”，弹出“创建参考控制文件”窗口。勾选需要配置的项目，如软件包选择、语言、分区、键盘布局、防火墙、网络设置等，AutoYast根据选择的项目从系统获取相关配置信息。选择“文件”-&gt;“保存”，弹出“另存为”窗口，输入文件名“autoinst.xml”，选择“保存”，系统提示文件保存到指定目录下。</p>
<p><img src="http://ww3.sinaimg.cn/large/7207510dgw1esjqdlady7j20mc0hd413.jpg" alt=""></p>
<p>有时我们需要对模块做些调整，比如磁盘分区、软件包等。以调整磁盘分区为例介绍配置文件的修改。<br>以root用户运行<code>yast2 autoyast</code>，打开AutoYast窗口，选择“文件”-&gt;“打开”，选择autoinst.xml文件，等系统读取配置后，在AutoYast窗口显示配置配件名称，修改后保存即可。</p>
<h3 id="制作安装光盘">制作安装光盘</h3><blockquote>
<p>AutoYast配置文件生成后，可以开始制作一键安装光盘了。制作一键安装光盘需要用到SLES11的原安装光盘的数据。</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#首先复制SLES11原安装光盘的数据到指定目录</span></span><br><span class="line">mkdir /tmp/sles11</span><br><span class="line">cp -R /media/S*/* /tmp/sles11</span><br><span class="line"><span class="comment">#复制autoinst.xml</span></span><br><span class="line">cp /root/autoinst.xml /tmp/sles11</span><br><span class="line"><span class="comment">#编辑isolinux.cfg文件，找到# install所在位置</span></span><br><span class="line"><span class="built_in">cd</span> boot/x86_64/loader/</span><br><span class="line"></span><br><span class="line">vi isolinux.cfg</span><br><span class="line"></span><br><span class="line"><span class="comment"># install</span></span><br><span class="line">  append initrd=initrd autoyast=file:///autoinst.xml splash=silent showopts </span><br><span class="line">:x!</span><br><span class="line"></span><br><span class="line"><span class="comment">#运行mkisofs命令生成自动安装光盘</span></span><br><span class="line"><span class="built_in">cd</span> /tmp/sles11</span><br><span class="line"></span><br><span class="line">mkisofs  -R -o /tmp/SLES11-SP2-<span class="number">64</span>-AUTO.iso -b boot/x86_64/loader/isolinux.bin -c boot.cat -no-emul-boot -boot-load-size <span class="number">4</span> -boot-info-table .</span><br></pre></td></tr></table></figure>
<h3 id="我的配置文件">我的配置文件</h3><blockquote>
<p>预设分区</p>
</blockquote>
<table>
<thead>
<tr>
<th>名称</th>
<th>格式</th>
<th>大小</th>
</tr>
</thead>
<tbody>
<tr>
<td>swap</td>
<td>swap</td>
<td>16G</td>
</tr>
<tr>
<td>boot</td>
<td>ext3</td>
<td>120M</td>
</tr>
<tr>
<td></td>
<td>LVM</td>
<td></td>
</tr>
<tr>
<td>root</td>
<td>ext3</td>
<td>5G</td>
</tr>
<tr>
<td>usr</td>
<td>ext3</td>
<td>10G</td>
</tr>
<tr>
<td>var</td>
<td>ext3</td>
<td>5G</td>
</tr>
<tr>
<td>opt</td>
<td>ext3</td>
<td>10G</td>
</tr>
<tr>
<td>home</td>
<td>ext3</td>
<td>15G</td>
</tr>
<tr>
<td>tmp</td>
<td>ext3</td>
<td>10G</td>
</tr>
<tr>
<td>总计</td>
<td></td>
<td>71G</td>
</tr>
</tbody>
</table>
<blockquote>
<p>预装软件包</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">KDE Desktop Environment</span><br><span class="line">Oracle Server Base</span><br><span class="line">C/C++ Compiler and Tools</span><br><span class="line">nmap</span><br><span class="line">java-<span class="number">1</span>_6_0</span><br><span class="line">libstdc++<span class="number">43</span>-devel-<span class="number">32</span>bit</span><br></pre></td></tr></table></figure>
<blockquote>
<p>预设语言</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">主要：英语</span><br><span class="line">添加：中文</span><br></pre></td></tr></table></figure>
<blockquote>
<p>预设用户名/密码</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">root/如果你直接复用我的配置文件请私信我获取密码</span><br></pre></td></tr></table></figure>
<blockquote>
<p>预设网络配置</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">禁用服务：防火墙，IPv6</span><br></pre></td></tr></table></figure>
<blockquote>
<p>autoinst.xml</p>
</blockquote>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br><span class="line">336</span><br><span class="line">337</span><br><span class="line">338</span><br><span class="line">339</span><br><span class="line">340</span><br><span class="line">341</span><br><span class="line">342</span><br><span class="line">343</span><br><span class="line">344</span><br><span class="line">345</span><br><span class="line">346</span><br><span class="line">347</span><br><span class="line">348</span><br><span class="line">349</span><br><span class="line">350</span><br><span class="line">351</span><br><span class="line">352</span><br><span class="line">353</span><br><span class="line">354</span><br><span class="line">355</span><br><span class="line">356</span><br><span class="line">357</span><br><span class="line">358</span><br><span class="line">359</span><br><span class="line">360</span><br><span class="line">361</span><br><span class="line">362</span><br><span class="line">363</span><br><span class="line">364</span><br><span class="line">365</span><br><span class="line">366</span><br><span class="line">367</span><br><span class="line">368</span><br><span class="line">369</span><br><span class="line">370</span><br><span class="line">371</span><br><span class="line">372</span><br><span class="line">373</span><br><span class="line">374</span><br><span class="line">375</span><br><span class="line">376</span><br><span class="line">377</span><br><span class="line">378</span><br><span class="line">379</span><br><span class="line">380</span><br><span class="line">381</span><br><span class="line">382</span><br><span class="line">383</span><br><span class="line">384</span><br><span class="line">385</span><br><span class="line">386</span><br><span class="line">387</span><br><span class="line">388</span><br><span class="line">389</span><br><span class="line">390</span><br><span class="line">391</span><br><span class="line">392</span><br><span class="line">393</span><br><span class="line">394</span><br><span class="line">395</span><br><span class="line">396</span><br><span class="line">397</span><br><span class="line">398</span><br><span class="line">399</span><br><span class="line">400</span><br><span class="line">401</span><br><span class="line">402</span><br><span class="line">403</span><br><span class="line">404</span><br><span class="line">405</span><br><span class="line">406</span><br><span class="line">407</span><br><span class="line">408</span><br><span class="line">409</span><br><span class="line">410</span><br><span class="line">411</span><br><span class="line">412</span><br><span class="line">413</span><br><span class="line">414</span><br><span class="line">415</span><br><span class="line">416</span><br><span class="line">417</span><br><span class="line">418</span><br><span class="line">419</span><br><span class="line">420</span><br><span class="line">421</span><br><span class="line">422</span><br><span class="line">423</span><br><span class="line">424</span><br><span class="line">425</span><br><span class="line">426</span><br><span class="line">427</span><br><span class="line">428</span><br><span class="line">429</span><br><span class="line">430</span><br><span class="line">431</span><br><span class="line">432</span><br><span class="line">433</span><br><span class="line">434</span><br><span class="line">435</span><br><span class="line">436</span><br><span class="line">437</span><br><span class="line">438</span><br><span class="line">439</span><br><span class="line">440</span><br><span class="line">441</span><br><span class="line">442</span><br><span class="line">443</span><br><span class="line">444</span><br><span class="line">445</span><br><span class="line">446</span><br><span class="line">447</span><br><span class="line">448</span><br><span class="line">449</span><br><span class="line">450</span><br><span class="line">451</span><br><span class="line">452</span><br><span class="line">453</span><br><span class="line">454</span><br><span class="line">455</span><br><span class="line">456</span><br><span class="line">457</span><br><span class="line">458</span><br><span class="line">459</span><br><span class="line">460</span><br><span class="line">461</span><br><span class="line">462</span><br><span class="line">463</span><br><span class="line">464</span><br><span class="line">465</span><br><span class="line">466</span><br><span class="line">467</span><br><span class="line">468</span><br><span class="line">469</span><br><span class="line">470</span><br><span class="line">471</span><br><span class="line">472</span><br><span class="line">473</span><br><span class="line">474</span><br><span class="line">475</span><br><span class="line">476</span><br><span class="line">477</span><br><span class="line">478</span><br><span class="line">479</span><br><span class="line">480</span><br><span class="line">481</span><br><span class="line">482</span><br><span class="line">483</span><br><span class="line">484</span><br><span class="line">485</span><br><span class="line">486</span><br><span class="line">487</span><br><span class="line">488</span><br><span class="line">489</span><br><span class="line">490</span><br><span class="line">491</span><br><span class="line">492</span><br><span class="line">493</span><br><span class="line">494</span><br><span class="line">495</span><br><span class="line">496</span><br><span class="line">497</span><br><span class="line">498</span><br><span class="line">499</span><br><span class="line">500</span><br><span class="line">501</span><br><span class="line">502</span><br><span class="line">503</span><br><span class="line">504</span><br><span class="line">505</span><br><span class="line">506</span><br><span class="line">507</span><br><span class="line">508</span><br><span class="line">509</span><br><span class="line">510</span><br><span class="line">511</span><br><span class="line">512</span><br><span class="line">513</span><br><span class="line">514</span><br><span class="line">515</span><br><span class="line">516</span><br><span class="line">517</span><br><span class="line">518</span><br><span class="line">519</span><br><span class="line">520</span><br><span class="line">521</span><br><span class="line">522</span><br><span class="line">523</span><br><span class="line">524</span><br><span class="line">525</span><br><span class="line">526</span><br><span class="line">527</span><br><span class="line">528</span><br><span class="line">529</span><br><span class="line">530</span><br><span class="line">531</span><br><span class="line">532</span><br><span class="line">533</span><br><span class="line">534</span><br><span class="line">535</span><br><span class="line">536</span><br><span class="line">537</span><br><span class="line">538</span><br><span class="line">539</span><br><span class="line">540</span><br><span class="line">541</span><br><span class="line">542</span><br><span class="line">543</span><br><span class="line">544</span><br><span class="line">545</span><br><span class="line">546</span><br><span class="line">547</span><br><span class="line">548</span><br><span class="line">549</span><br><span class="line">550</span><br><span class="line">551</span><br><span class="line">552</span><br><span class="line">553</span><br><span class="line">554</span><br><span class="line">555</span><br><span class="line">556</span><br><span class="line">557</span><br><span class="line">558</span><br><span class="line">559</span><br><span class="line">560</span><br><span class="line">561</span><br><span class="line">562</span><br><span class="line">563</span><br><span class="line">564</span><br><span class="line">565</span><br><span class="line">566</span><br><span class="line">567</span><br><span class="line">568</span><br><span class="line">569</span><br><span class="line">570</span><br><span class="line">571</span><br><span class="line">572</span><br><span class="line">573</span><br><span class="line">574</span><br><span class="line">575</span><br><span class="line">576</span><br><span class="line">577</span><br><span class="line">578</span><br><span class="line">579</span><br><span class="line">580</span><br><span class="line">581</span><br><span class="line">582</span><br><span class="line">583</span><br><span class="line">584</span><br><span class="line">585</span><br><span class="line">586</span><br><span class="line">587</span><br><span class="line">588</span><br><span class="line">589</span><br><span class="line">590</span><br><span class="line">591</span><br><span class="line">592</span><br><span class="line">593</span><br><span class="line">594</span><br><span class="line">595</span><br><span class="line">596</span><br><span class="line">597</span><br><span class="line">598</span><br><span class="line">599</span><br><span class="line">600</span><br><span class="line">601</span><br><span class="line">602</span><br><span class="line">603</span><br><span class="line">604</span><br><span class="line">605</span><br><span class="line">606</span><br><span class="line">607</span><br><span class="line">608</span><br><span class="line">609</span><br><span class="line">610</span><br><span class="line">611</span><br><span class="line">612</span><br><span class="line">613</span><br><span class="line">614</span><br><span class="line">615</span><br><span class="line">616</span><br><span class="line">617</span><br><span class="line">618</span><br><span class="line">619</span><br><span class="line">620</span><br><span class="line">621</span><br><span class="line">622</span><br><span class="line">623</span><br><span class="line">624</span><br><span class="line">625</span><br><span class="line">626</span><br><span class="line">627</span><br><span class="line">628</span><br><span class="line">629</span><br><span class="line">630</span><br><span class="line">631</span><br><span class="line">632</span><br><span class="line">633</span><br><span class="line">634</span><br><span class="line">635</span><br><span class="line">636</span><br><span class="line">637</span><br><span class="line">638</span><br><span class="line">639</span><br><span class="line">640</span><br><span class="line">641</span><br><span class="line">642</span><br><span class="line">643</span><br><span class="line">644</span><br><span class="line">645</span><br><span class="line">646</span><br><span class="line">647</span><br><span class="line">648</span><br><span class="line">649</span><br><span class="line">650</span><br><span class="line">651</span><br><span class="line">652</span><br><span class="line">653</span><br><span class="line">654</span><br><span class="line">655</span><br><span class="line">656</span><br><span class="line">657</span><br><span class="line">658</span><br><span class="line">659</span><br><span class="line">660</span><br><span class="line">661</span><br><span class="line">662</span><br><span class="line">663</span><br><span class="line">664</span><br><span class="line">665</span><br><span class="line">666</span><br><span class="line">667</span><br><span class="line">668</span><br><span class="line">669</span><br><span class="line">670</span><br><span class="line">671</span><br><span class="line">672</span><br><span class="line">673</span><br><span class="line">674</span><br><span class="line">675</span><br><span class="line">676</span><br><span class="line">677</span><br><span class="line">678</span><br><span class="line">679</span><br><span class="line">680</span><br><span class="line">681</span><br><span class="line">682</span><br><span class="line">683</span><br><span class="line">684</span><br><span class="line">685</span><br><span class="line">686</span><br><span class="line">687</span><br><span class="line">688</span><br><span class="line">689</span><br><span class="line">690</span><br><span class="line">691</span><br><span class="line">692</span><br><span class="line">693</span><br><span class="line">694</span><br><span class="line">695</span><br><span class="line">696</span><br><span class="line">697</span><br><span class="line">698</span><br><span class="line">699</span><br><span class="line">700</span><br><span class="line">701</span><br><span class="line">702</span><br><span class="line">703</span><br><span class="line">704</span><br><span class="line">705</span><br><span class="line">706</span><br><span class="line">707</span><br><span class="line">708</span><br><span class="line">709</span><br><span class="line">710</span><br><span class="line">711</span><br><span class="line">712</span><br><span class="line">713</span><br><span class="line">714</span><br><span class="line">715</span><br><span class="line">716</span><br><span class="line">717</span><br><span class="line">718</span><br><span class="line">719</span><br><span class="line">720</span><br><span class="line">721</span><br><span class="line">722</span><br><span class="line">723</span><br><span class="line">724</span><br><span class="line">725</span><br><span class="line">726</span><br><span class="line">727</span><br><span class="line">728</span><br><span class="line">729</span><br><span class="line">730</span><br><span class="line">731</span><br><span class="line">732</span><br><span class="line">733</span><br><span class="line">734</span><br><span class="line">735</span><br><span class="line">736</span><br><span class="line">737</span><br><span class="line">738</span><br><span class="line">739</span><br><span class="line">740</span><br><span class="line">741</span><br><span class="line">742</span><br><span class="line">743</span><br><span class="line">744</span><br><span class="line">745</span><br><span class="line">746</span><br><span class="line">747</span><br><span class="line">748</span><br><span class="line">749</span><br><span class="line">750</span><br><span class="line">751</span><br><span class="line">752</span><br><span class="line">753</span><br><span class="line">754</span><br><span class="line">755</span><br><span class="line">756</span><br><span class="line">757</span><br><span class="line">758</span><br><span class="line">759</span><br><span class="line">760</span><br><span class="line">761</span><br><span class="line">762</span><br><span class="line">763</span><br><span class="line">764</span><br><span class="line">765</span><br><span class="line">766</span><br><span class="line">767</span><br><span class="line">768</span><br><span class="line">769</span><br><span class="line">770</span><br><span class="line">771</span><br><span class="line">772</span><br><span class="line">773</span><br><span class="line">774</span><br><span class="line">775</span><br><span class="line">776</span><br><span class="line">777</span><br><span class="line">778</span><br><span class="line">779</span><br><span class="line">780</span><br><span class="line">781</span><br><span class="line">782</span><br><span class="line">783</span><br><span class="line">784</span><br><span class="line">785</span><br><span class="line">786</span><br><span class="line">787</span><br><span class="line">788</span><br><span class="line">789</span><br><span class="line">790</span><br><span class="line">791</span><br><span class="line">792</span><br><span class="line">793</span><br><span class="line">794</span><br><span class="line">795</span><br><span class="line">796</span><br><span class="line">797</span><br><span class="line">798</span><br><span class="line">799</span><br><span class="line">800</span><br><span class="line">801</span><br><span class="line">802</span><br><span class="line">803</span><br><span class="line">804</span><br><span class="line">805</span><br><span class="line">806</span><br><span class="line">807</span><br><span class="line">808</span><br><span class="line">809</span><br><span class="line">810</span><br><span class="line">811</span><br><span class="line">812</span><br><span class="line">813</span><br><span class="line">814</span><br><span class="line">815</span><br><span class="line">816</span><br><span class="line">817</span><br><span class="line">818</span><br><span class="line">819</span><br><span class="line">820</span><br><span class="line">821</span><br><span class="line">822</span><br><span class="line">823</span><br><span class="line">824</span><br><span class="line">825</span><br><span class="line">826</span><br><span class="line">827</span><br><span class="line">828</span><br><span class="line">829</span><br><span class="line">830</span><br><span class="line">831</span><br><span class="line">832</span><br><span class="line">833</span><br><span class="line">834</span><br><span class="line">835</span><br><span class="line">836</span><br><span class="line">837</span><br><span class="line">838</span><br><span class="line">839</span><br><span class="line">840</span><br><span class="line">841</span><br><span class="line">842</span><br><span class="line">843</span><br><span class="line">844</span><br><span class="line">845</span><br><span class="line">846</span><br><span class="line">847</span><br><span class="line">848</span><br><span class="line">849</span><br><span class="line">850</span><br><span class="line">851</span><br><span class="line">852</span><br><span class="line">853</span><br><span class="line">854</span><br><span class="line">855</span><br><span class="line">856</span><br><span class="line">857</span><br><span class="line">858</span><br><span class="line">859</span><br><span class="line">860</span><br><span class="line">861</span><br><span class="line">862</span><br><span class="line">863</span><br><span class="line">864</span><br><span class="line">865</span><br><span class="line">866</span><br><span class="line">867</span><br><span class="line">868</span><br><span class="line">869</span><br><span class="line">870</span><br><span class="line">871</span><br><span class="line">872</span><br><span class="line">873</span><br><span class="line">874</span><br><span class="line">875</span><br><span class="line">876</span><br><span class="line">877</span><br><span class="line">878</span><br><span class="line">879</span><br><span class="line">880</span><br><span class="line">881</span><br><span class="line">882</span><br><span class="line">883</span><br><span class="line">884</span><br><span class="line">885</span><br><span class="line">886</span><br><span class="line">887</span><br><span class="line">888</span><br><span class="line">889</span><br><span class="line">890</span><br><span class="line">891</span><br><span class="line">892</span><br><span class="line">893</span><br><span class="line">894</span><br><span class="line">895</span><br><span class="line">896</span><br><span class="line">897</span><br><span class="line">898</span><br><span class="line">899</span><br><span class="line">900</span><br><span class="line">901</span><br><span class="line">902</span><br><span class="line">903</span><br><span class="line">904</span><br><span class="line">905</span><br><span class="line">906</span><br><span class="line">907</span><br><span class="line">908</span><br><span class="line">909</span><br><span class="line">910</span><br><span class="line">911</span><br><span class="line">912</span><br><span class="line">913</span><br><span class="line">914</span><br><span class="line">915</span><br><span class="line">916</span><br><span class="line">917</span><br><span class="line">918</span><br><span class="line">919</span><br><span class="line">920</span><br><span class="line">921</span><br><span class="line">922</span><br><span class="line">923</span><br><span class="line">924</span><br><span class="line">925</span><br><span class="line">926</span><br><span class="line">927</span><br><span class="line">928</span><br><span class="line">929</span><br><span class="line">930</span><br><span class="line">931</span><br><span class="line">932</span><br><span class="line">933</span><br><span class="line">934</span><br><span class="line">935</span><br><span class="line">936</span><br><span class="line">937</span><br><span class="line">938</span><br><span class="line">939</span><br><span class="line">940</span><br><span class="line">941</span><br><span class="line">942</span><br><span class="line">943</span><br><span class="line">944</span><br><span class="line">945</span><br><span class="line">946</span><br><span class="line">947</span><br><span class="line">948</span><br><span class="line">949</span><br><span class="line">950</span><br><span class="line">951</span><br><span class="line">952</span><br><span class="line">953</span><br><span class="line">954</span><br><span class="line">955</span><br><span class="line">956</span><br><span class="line">957</span><br><span class="line">958</span><br><span class="line">959</span><br><span class="line">960</span><br><span class="line">961</span><br><span class="line">962</span><br><span class="line">963</span><br><span class="line">964</span><br><span class="line">965</span><br><span class="line">966</span><br><span class="line">967</span><br><span class="line">968</span><br><span class="line">969</span><br><span class="line">970</span><br><span class="line">971</span><br><span class="line">972</span><br><span class="line">973</span><br><span class="line">974</span><br><span class="line">975</span><br><span class="line">976</span><br><span class="line">977</span><br><span class="line">978</span><br><span class="line">979</span><br><span class="line">980</span><br><span class="line">981</span><br><span class="line">982</span><br><span class="line">983</span><br><span class="line">984</span><br><span class="line">985</span><br><span class="line">986</span><br><span class="line">987</span><br><span class="line">988</span><br><span class="line">989</span><br><span class="line">990</span><br><span class="line">991</span><br><span class="line">992</span><br><span class="line">993</span><br><span class="line">994</span><br><span class="line">995</span><br><span class="line">996</span><br><span class="line">997</span><br><span class="line">998</span><br><span class="line">999</span><br><span class="line">1000</span><br><span class="line">1001</span><br><span class="line">1002</span><br><span class="line">1003</span><br><span class="line">1004</span><br><span class="line">1005</span><br><span class="line">1006</span><br><span class="line">1007</span><br><span class="line">1008</span><br><span class="line">1009</span><br><span class="line">1010</span><br><span class="line">1011</span><br><span class="line">1012</span><br><span class="line">1013</span><br><span class="line">1014</span><br><span class="line">1015</span><br><span class="line">1016</span><br><span class="line">1017</span><br><span class="line">1018</span><br><span class="line">1019</span><br><span class="line">1020</span><br><span class="line">1021</span><br><span class="line">1022</span><br><span class="line">1023</span><br><span class="line">1024</span><br><span class="line">1025</span><br><span class="line">1026</span><br><span class="line">1027</span><br><span class="line">1028</span><br><span class="line">1029</span><br><span class="line">1030</span><br><span class="line">1031</span><br><span class="line">1032</span><br><span class="line">1033</span><br><span class="line">1034</span><br><span class="line">1035</span><br><span class="line">1036</span><br><span class="line">1037</span><br><span class="line">1038</span><br><span class="line">1039</span><br><span class="line">1040</span><br><span class="line">1041</span><br><span class="line">1042</span><br><span class="line">1043</span><br><span class="line">1044</span><br><span class="line">1045</span><br><span class="line">1046</span><br><span class="line">1047</span><br><span class="line">1048</span><br><span class="line">1049</span><br><span class="line">1050</span><br><span class="line">1051</span><br><span class="line">1052</span><br><span class="line">1053</span><br><span class="line">1054</span><br><span class="line">1055</span><br><span class="line">1056</span><br><span class="line">1057</span><br><span class="line">1058</span><br><span class="line">1059</span><br><span class="line">1060</span><br><span class="line">1061</span><br><span class="line">1062</span><br><span class="line">1063</span><br><span class="line">1064</span><br><span class="line">1065</span><br><span class="line">1066</span><br><span class="line">1067</span><br><span class="line">1068</span><br><span class="line">1069</span><br><span class="line">1070</span><br><span class="line">1071</span><br><span class="line">1072</span><br><span class="line">1073</span><br><span class="line">1074</span><br><span class="line">1075</span><br><span class="line">1076</span><br><span class="line">1077</span><br><span class="line">1078</span><br><span class="line">1079</span><br><span class="line">1080</span><br><span class="line">1081</span><br><span class="line">1082</span><br><span class="line">1083</span><br><span class="line">1084</span><br><span class="line">1085</span><br><span class="line">1086</span><br><span class="line">1087</span><br><span class="line">1088</span><br><span class="line">1089</span><br><span class="line">1090</span><br><span class="line">1091</span><br><span class="line">1092</span><br><span class="line">1093</span><br><span class="line">1094</span><br><span class="line">1095</span><br><span class="line">1096</span><br><span class="line">1097</span><br><span class="line">1098</span><br><span class="line">1099</span><br><span class="line">1100</span><br><span class="line">1101</span><br><span class="line">1102</span><br><span class="line">1103</span><br><span class="line">1104</span><br><span class="line">1105</span><br><span class="line">1106</span><br><span class="line">1107</span><br><span class="line">1108</span><br><span class="line">1109</span><br><span class="line">1110</span><br><span class="line">1111</span><br><span class="line">1112</span><br><span class="line">1113</span><br><span class="line">1114</span><br><span class="line">1115</span><br><span class="line">1116</span><br><span class="line">1117</span><br><span class="line">1118</span><br><span class="line">1119</span><br><span class="line">1120</span><br><span class="line">1121</span><br><span class="line">1122</span><br><span class="line">1123</span><br><span class="line">1124</span><br><span class="line">1125</span><br><span class="line">1126</span><br><span class="line">1127</span><br><span class="line">1128</span><br><span class="line">1129</span><br><span class="line">1130</span><br><span class="line">1131</span><br><span class="line">1132</span><br><span class="line">1133</span><br><span class="line">1134</span><br><span class="line">1135</span><br><span class="line">1136</span><br><span class="line">1137</span><br><span class="line">1138</span><br><span class="line">1139</span><br><span class="line">1140</span><br><span class="line">1141</span><br><span class="line">1142</span><br><span class="line">1143</span><br><span class="line">1144</span><br><span class="line">1145</span><br><span class="line">1146</span><br><span class="line">1147</span><br><span class="line">1148</span><br><span class="line">1149</span><br><span class="line">1150</span><br><span class="line">1151</span><br><span class="line">1152</span><br><span class="line">1153</span><br><span class="line">1154</span><br><span class="line">1155</span><br><span class="line">1156</span><br><span class="line">1157</span><br><span class="line">1158</span><br><span class="line">1159</span><br><span class="line">1160</span><br><span class="line">1161</span><br><span class="line">1162</span><br><span class="line">1163</span><br><span class="line">1164</span><br><span class="line">1165</span><br><span class="line">1166</span><br><span class="line">1167</span><br><span class="line">1168</span><br><span class="line">1169</span><br><span class="line">1170</span><br><span class="line">1171</span><br><span class="line">1172</span><br><span class="line">1173</span><br><span class="line">1174</span><br><span class="line">1175</span><br><span class="line">1176</span><br><span class="line">1177</span><br><span class="line">1178</span><br><span class="line">1179</span><br><span class="line">1180</span><br><span class="line">1181</span><br><span class="line">1182</span><br><span class="line">1183</span><br><span class="line">1184</span><br><span class="line">1185</span><br><span class="line">1186</span><br><span class="line">1187</span><br><span class="line">1188</span><br><span class="line">1189</span><br><span class="line">1190</span><br><span class="line">1191</span><br><span class="line">1192</span><br><span class="line">1193</span><br><span class="line">1194</span><br><span class="line">1195</span><br><span class="line">1196</span><br><span class="line">1197</span><br><span class="line">1198</span><br><span class="line">1199</span><br><span class="line">1200</span><br><span class="line">1201</span><br><span class="line">1202</span><br><span class="line">1203</span><br><span class="line">1204</span><br><span class="line">1205</span><br><span class="line">1206</span><br><span class="line">1207</span><br><span class="line">1208</span><br><span class="line">1209</span><br><span class="line">1210</span><br><span class="line">1211</span><br><span class="line">1212</span><br><span class="line">1213</span><br><span class="line">1214</span><br><span class="line">1215</span><br><span class="line">1216</span><br><span class="line">1217</span><br><span class="line">1218</span><br><span class="line">1219</span><br><span class="line">1220</span><br><span class="line">1221</span><br><span class="line">1222</span><br><span class="line">1223</span><br><span class="line">1224</span><br><span class="line">1225</span><br><span class="line">1226</span><br><span class="line">1227</span><br><span class="line">1228</span><br><span class="line">1229</span><br><span class="line">1230</span><br><span class="line">1231</span><br><span class="line">1232</span><br><span class="line">1233</span><br><span class="line">1234</span><br><span class="line">1235</span><br><span class="line">1236</span><br><span class="line">1237</span><br><span class="line">1238</span><br><span class="line">1239</span><br><span class="line">1240</span><br><span class="line">1241</span><br><span class="line">1242</span><br><span class="line">1243</span><br><span class="line">1244</span><br><span class="line">1245</span><br><span class="line">1246</span><br><span class="line">1247</span><br><span class="line">1248</span><br><span class="line">1249</span><br><span class="line">1250</span><br><span class="line">1251</span><br><span class="line">1252</span><br><span class="line">1253</span><br><span class="line">1254</span><br><span class="line">1255</span><br><span class="line">1256</span><br><span class="line">1257</span><br><span class="line">1258</span><br><span class="line">1259</span><br><span class="line">1260</span><br><span class="line">1261</span><br><span class="line">1262</span><br><span class="line">1263</span><br><span class="line">1264</span><br><span class="line">1265</span><br><span class="line">1266</span><br><span class="line">1267</span><br><span class="line">1268</span><br><span class="line">1269</span><br><span class="line">1270</span><br><span class="line">1271</span><br><span class="line">1272</span><br><span class="line">1273</span><br><span class="line">1274</span><br><span class="line">1275</span><br><span class="line">1276</span><br><span class="line">1277</span><br><span class="line">1278</span><br><span class="line">1279</span><br><span class="line">1280</span><br><span class="line">1281</span><br><span class="line">1282</span><br><span class="line">1283</span><br><span class="line">1284</span><br><span class="line">1285</span><br><span class="line">1286</span><br><span class="line">1287</span><br><span class="line">1288</span><br><span class="line">1289</span><br><span class="line">1290</span><br><span class="line">1291</span><br><span class="line">1292</span><br><span class="line">1293</span><br><span class="line">1294</span><br><span class="line">1295</span><br><span class="line">1296</span><br><span class="line">1297</span><br><span class="line">1298</span><br><span class="line">1299</span><br><span class="line">1300</span><br><span class="line">1301</span><br><span class="line">1302</span><br><span class="line">1303</span><br><span class="line">1304</span><br><span class="line">1305</span><br><span class="line">1306</span><br><span class="line">1307</span><br><span class="line">1308</span><br><span class="line">1309</span><br><span class="line">1310</span><br><span class="line">1311</span><br><span class="line">1312</span><br><span class="line">1313</span><br><span class="line">1314</span><br><span class="line">1315</span><br><span class="line">1316</span><br><span class="line">1317</span><br><span class="line">1318</span><br><span class="line">1319</span><br><span class="line">1320</span><br><span class="line">1321</span><br><span class="line">1322</span><br><span class="line">1323</span><br><span class="line">1324</span><br><span class="line">1325</span><br><span class="line">1326</span><br><span class="line">1327</span><br><span class="line">1328</span><br><span class="line">1329</span><br><span class="line">1330</span><br><span class="line">1331</span><br><span class="line">1332</span><br><span class="line">1333</span><br><span class="line">1334</span><br><span class="line">1335</span><br><span class="line">1336</span><br><span class="line">1337</span><br><span class="line">1338</span><br><span class="line">1339</span><br><span class="line">1340</span><br><span class="line">1341</span><br><span class="line">1342</span><br><span class="line">1343</span><br><span class="line">1344</span><br><span class="line">1345</span><br><span class="line">1346</span><br><span class="line">1347</span><br><span class="line">1348</span><br><span class="line">1349</span><br><span class="line">1350</span><br><span class="line">1351</span><br><span class="line">1352</span><br><span class="line">1353</span><br><span class="line">1354</span><br><span class="line">1355</span><br><span class="line">1356</span><br><span class="line">1357</span><br><span class="line">1358</span><br><span class="line">1359</span><br><span class="line">1360</span><br><span class="line">1361</span><br><span class="line">1362</span><br><span class="line">1363</span><br><span class="line">1364</span><br><span class="line">1365</span><br><span class="line">1366</span><br><span class="line">1367</span><br><span class="line">1368</span><br><span class="line">1369</span><br><span class="line">1370</span><br><span class="line">1371</span><br><span class="line">1372</span><br><span class="line">1373</span><br><span class="line">1374</span><br><span class="line">1375</span><br><span class="line">1376</span><br><span class="line">1377</span><br><span class="line">1378</span><br><span class="line">1379</span><br><span class="line">1380</span><br><span class="line">1381</span><br><span class="line">1382</span><br><span class="line">1383</span><br><span class="line">1384</span><br><span class="line">1385</span><br><span class="line">1386</span><br><span class="line">1387</span><br><span class="line">1388</span><br><span class="line">1389</span><br><span class="line">1390</span><br><span class="line">1391</span><br><span class="line">1392</span><br><span class="line">1393</span><br><span class="line">1394</span><br><span class="line">1395</span><br><span class="line">1396</span><br><span class="line">1397</span><br><span class="line">1398</span><br><span class="line">1399</span><br><span class="line">1400</span><br><span class="line">1401</span><br><span class="line">1402</span><br><span class="line">1403</span><br><span class="line">1404</span><br><span class="line">1405</span><br><span class="line">1406</span><br><span class="line">1407</span><br><span class="line">1408</span><br><span class="line">1409</span><br><span class="line">1410</span><br><span class="line">1411</span><br><span class="line">1412</span><br><span class="line">1413</span><br><span class="line">1414</span><br><span class="line">1415</span><br><span class="line">1416</span><br><span class="line">1417</span><br><span class="line">1418</span><br><span class="line">1419</span><br><span class="line">1420</span><br><span class="line">1421</span><br><span class="line">1422</span><br><span class="line">1423</span><br><span class="line">1424</span><br><span class="line">1425</span><br><span class="line">1426</span><br><span class="line">1427</span><br><span class="line">1428</span><br><span class="line">1429</span><br><span class="line">1430</span><br><span class="line">1431</span><br><span class="line">1432</span><br><span class="line">1433</span><br><span class="line">1434</span><br><span class="line">1435</span><br><span class="line">1436</span><br><span class="line">1437</span><br><span class="line">1438</span><br><span class="line">1439</span><br><span class="line">1440</span><br><span class="line">1441</span><br><span class="line">1442</span><br><span class="line">1443</span><br><span class="line">1444</span><br><span class="line">1445</span><br><span class="line">1446</span><br><span class="line">1447</span><br><span class="line">1448</span><br><span class="line">1449</span><br><span class="line">1450</span><br><span class="line">1451</span><br><span class="line">1452</span><br><span class="line">1453</span><br><span class="line">1454</span><br><span class="line">1455</span><br><span class="line">1456</span><br><span class="line">1457</span><br><span class="line">1458</span><br><span class="line">1459</span><br><span class="line">1460</span><br><span class="line">1461</span><br><span class="line">1462</span><br><span class="line">1463</span><br><span class="line">1464</span><br><span class="line">1465</span><br><span class="line">1466</span><br><span class="line">1467</span><br><span class="line">1468</span><br><span class="line">1469</span><br><span class="line">1470</span><br><span class="line">1471</span><br><span class="line">1472</span><br><span class="line">1473</span><br><span class="line">1474</span><br><span class="line">1475</span><br><span class="line">1476</span><br><span class="line">1477</span><br><span class="line">1478</span><br><span class="line">1479</span><br><span class="line">1480</span><br><span class="line">1481</span><br><span class="line">1482</span><br><span class="line">1483</span><br><span class="line">1484</span><br><span class="line">1485</span><br><span class="line">1486</span><br><span class="line">1487</span><br><span class="line">1488</span><br><span class="line">1489</span><br><span class="line">1490</span><br><span class="line">1491</span><br><span class="line">1492</span><br><span class="line">1493</span><br><span class="line">1494</span><br><span class="line">1495</span><br><span class="line">1496</span><br><span class="line">1497</span><br><span class="line">1498</span><br><span class="line">1499</span><br><span class="line">1500</span><br><span class="line">1501</span><br><span class="line">1502</span><br><span class="line">1503</span><br><span class="line">1504</span><br><span class="line">1505</span><br><span class="line">1506</span><br><span class="line">1507</span><br><span class="line">1508</span><br><span class="line">1509</span><br><span class="line">1510</span><br><span class="line">1511</span><br><span class="line">1512</span><br><span class="line">1513</span><br><span class="line">1514</span><br><span class="line">1515</span><br><span class="line">1516</span><br><span class="line">1517</span><br><span class="line">1518</span><br><span class="line">1519</span><br><span class="line">1520</span><br><span class="line">1521</span><br><span class="line">1522</span><br><span class="line">1523</span><br><span class="line">1524</span><br><span class="line">1525</span><br><span class="line">1526</span><br><span class="line">1527</span><br><span class="line">1528</span><br><span class="line">1529</span><br><span class="line">1530</span><br><span class="line">1531</span><br><span class="line">1532</span><br><span class="line">1533</span><br><span class="line">1534</span><br><span class="line">1535</span><br><span class="line">1536</span><br><span class="line">1537</span><br><span class="line">1538</span><br><span class="line">1539</span><br><span class="line">1540</span><br><span class="line">1541</span><br><span class="line">1542</span><br><span class="line">1543</span><br><span class="line">1544</span><br><span class="line">1545</span><br><span class="line">1546</span><br><span class="line">1547</span><br><span class="line">1548</span><br><span class="line">1549</span><br><span class="line">1550</span><br><span class="line">1551</span><br><span class="line">1552</span><br><span class="line">1553</span><br><span class="line">1554</span><br><span class="line">1555</span><br><span class="line">1556</span><br><span class="line">1557</span><br><span class="line">1558</span><br><span class="line">1559</span><br><span class="line">1560</span><br><span class="line">1561</span><br><span class="line">1562</span><br><span class="line">1563</span><br><span class="line">1564</span><br><span class="line">1565</span><br><span class="line">1566</span><br><span class="line">1567</span><br><span class="line">1568</span><br><span class="line">1569</span><br><span class="line">1570</span><br><span class="line">1571</span><br><span class="line">1572</span><br><span class="line">1573</span><br><span class="line">1574</span><br><span class="line">1575</span><br><span class="line">1576</span><br><span class="line">1577</span><br><span class="line">1578</span><br><span class="line">1579</span><br><span class="line">1580</span><br><span class="line">1581</span><br><span class="line">1582</span><br><span class="line">1583</span><br><span class="line">1584</span><br><span class="line">1585</span><br><span class="line">1586</span><br><span class="line">1587</span><br><span class="line">1588</span><br><span class="line">1589</span><br><span class="line">1590</span><br><span class="line">1591</span><br><span class="line">1592</span><br><span class="line">1593</span><br><span class="line">1594</span><br><span class="line">1595</span><br><span class="line">1596</span><br><span class="line">1597</span><br><span class="line">1598</span><br><span class="line">1599</span><br><span class="line">1600</span><br><span class="line">1601</span><br><span class="line">1602</span><br><span class="line">1603</span><br><span class="line">1604</span><br><span class="line">1605</span><br><span class="line">1606</span><br><span class="line">1607</span><br><span class="line">1608</span><br><span class="line">1609</span><br><span class="line">1610</span><br><span class="line">1611</span><br><span class="line">1612</span><br><span class="line">1613</span><br><span class="line">1614</span><br><span class="line">1615</span><br><span class="line">1616</span><br><span class="line">1617</span><br><span class="line">1618</span><br><span class="line">1619</span><br><span class="line">1620</span><br><span class="line">1621</span><br><span class="line">1622</span><br><span class="line">1623</span><br><span class="line">1624</span><br><span class="line">1625</span><br><span class="line">1626</span><br><span class="line">1627</span><br><span class="line">1628</span><br><span class="line">1629</span><br><span class="line">1630</span><br><span class="line">1631</span><br><span class="line">1632</span><br><span class="line">1633</span><br><span class="line">1634</span><br><span class="line">1635</span><br><span class="line">1636</span><br><span class="line">1637</span><br><span class="line">1638</span><br><span class="line">1639</span><br><span class="line">1640</span><br><span class="line">1641</span><br><span class="line">1642</span><br><span class="line">1643</span><br><span class="line">1644</span><br><span class="line">1645</span><br><span class="line">1646</span><br><span class="line">1647</span><br><span class="line">1648</span><br><span class="line">1649</span><br><span class="line">1650</span><br><span class="line">1651</span><br><span class="line">1652</span><br><span class="line">1653</span><br><span class="line">1654</span><br><span class="line">1655</span><br><span class="line">1656</span><br><span class="line">1657</span><br><span class="line">1658</span><br><span class="line">1659</span><br><span class="line">1660</span><br><span class="line">1661</span><br><span class="line">1662</span><br><span class="line">1663</span><br><span class="line">1664</span><br><span class="line">1665</span><br><span class="line">1666</span><br><span class="line">1667</span><br><span class="line">1668</span><br><span class="line">1669</span><br><span class="line">1670</span><br><span class="line">1671</span><br><span class="line">1672</span><br><span class="line">1673</span><br><span class="line">1674</span><br><span class="line">1675</span><br><span class="line">1676</span><br><span class="line">1677</span><br><span class="line">1678</span><br><span class="line">1679</span><br><span class="line">1680</span><br><span class="line">1681</span><br><span class="line">1682</span><br><span class="line">1683</span><br><span class="line">1684</span><br><span class="line">1685</span><br><span class="line">1686</span><br><span class="line">1687</span><br><span class="line">1688</span><br><span class="line">1689</span><br><span class="line">1690</span><br><span class="line">1691</span><br><span class="line">1692</span><br><span class="line">1693</span><br><span class="line">1694</span><br><span class="line">1695</span><br><span class="line">1696</span><br><span class="line">1697</span><br><span class="line">1698</span><br><span class="line">1699</span><br><span class="line">1700</span><br><span class="line">1701</span><br><span class="line">1702</span><br><span class="line">1703</span><br><span class="line">1704</span><br><span class="line">1705</span><br><span class="line">1706</span><br><span class="line">1707</span><br><span class="line">1708</span><br><span class="line">1709</span><br><span class="line">1710</span><br><span class="line">1711</span><br><span class="line">1712</span><br><span class="line">1713</span><br><span class="line">1714</span><br><span class="line">1715</span><br><span class="line">1716</span><br><span class="line">1717</span><br><span class="line">1718</span><br><span class="line">1719</span><br><span class="line">1720</span><br><span class="line">1721</span><br><span class="line">1722</span><br><span class="line">1723</span><br><span class="line">1724</span><br><span class="line">1725</span><br><span class="line">1726</span><br><span class="line">1727</span><br><span class="line">1728</span><br><span class="line">1729</span><br><span class="line">1730</span><br><span class="line">1731</span><br><span class="line">1732</span><br><span class="line">1733</span><br><span class="line">1734</span><br><span class="line">1735</span><br><span class="line">1736</span><br><span class="line">1737</span><br><span class="line">1738</span><br><span class="line">1739</span><br><span class="line">1740</span><br><span class="line">1741</span><br><span class="line">1742</span><br><span class="line">1743</span><br><span class="line">1744</span><br><span class="line">1745</span><br><span class="line">1746</span><br><span class="line">1747</span><br><span class="line">1748</span><br><span class="line">1749</span><br><span class="line">1750</span><br><span class="line">1751</span><br><span class="line">1752</span><br><span class="line">1753</span><br><span class="line">1754</span><br><span class="line">1755</span><br><span class="line">1756</span><br><span class="line">1757</span><br><span class="line">1758</span><br><span class="line">1759</span><br><span class="line">1760</span><br><span class="line">1761</span><br><span class="line">1762</span><br><span class="line">1763</span><br><span class="line">1764</span><br><span class="line">1765</span><br><span class="line">1766</span><br><span class="line">1767</span><br><span class="line">1768</span><br><span class="line">1769</span><br><span class="line">1770</span><br><span class="line">1771</span><br><span class="line">1772</span><br><span class="line">1773</span><br><span class="line">1774</span><br><span class="line">1775</span><br><span class="line">1776</span><br><span class="line">1777</span><br><span class="line">1778</span><br><span class="line">1779</span><br><span class="line">1780</span><br><span class="line">1781</span><br><span class="line">1782</span><br><span class="line">1783</span><br><span class="line">1784</span><br><span class="line">1785</span><br><span class="line">1786</span><br></pre></td><td class="code"><pre><span class="line"><span class="pi">&lt;?xml version="1.0"?&gt;</span></span><br><span class="line"><span class="doctype">&lt;!DOCTYPE profile&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="title">profile</span> <span class="attribute">xmlns</span>=<span class="value">"http://www.suse.com/1.0/yast2ns"</span> <span class="attribute">xmlns:config</span>=<span class="value">"http://www.suse.com/1.0/configns"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="title">bootloader</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">device_map</span> <span class="attribute">config:type</span>=<span class="value">"list"</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">device_map_entry</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="title">firmware</span>&gt;</span>fd0<span class="tag">&lt;/<span class="title">firmware</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="title">linux</span>&gt;</span>/dev/fd0<span class="tag">&lt;/<span class="title">linux</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="title">device_map_entry</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">device_map_entry</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="title">firmware</span>&gt;</span>hd0<span class="tag">&lt;/<span class="title">firmware</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="title">linux</span>&gt;</span>/dev/sda<span class="tag">&lt;/<span class="title">linux</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="title">device_map_entry</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="title">device_map</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">global</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">activate</span>&gt;</span>true<span class="tag">&lt;/<span class="title">activate</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">boot_boot</span>&gt;</span>true<span class="tag">&lt;/<span class="title">boot_boot</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">default</span>&gt;</span>SUSE Linux Enterprise Server 11 SP2 - 3.0.13-0.27<span class="tag">&lt;/<span class="title">default</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">generic_mbr</span>&gt;</span>true<span class="tag">&lt;/<span class="title">generic_mbr</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">gfxmenu</span>&gt;</span>/boot/message<span class="tag">&lt;/<span class="title">gfxmenu</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">lines_cache_id</span>&gt;</span>3<span class="tag">&lt;/<span class="title">lines_cache_id</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">timeout</span> <span class="attribute">config:type</span>=<span class="value">"integer"</span>&gt;</span>8<span class="tag">&lt;/<span class="title">timeout</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="title">global</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">initrd_modules</span> <span class="attribute">config:type</span>=<span class="value">"list"</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">initrd_module</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="title">module</span>&gt;</span>mptspi<span class="tag">&lt;/<span class="title">module</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="title">initrd_module</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">initrd_module</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="title">module</span>&gt;</span>ata_piix<span class="tag">&lt;/<span class="title">module</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="title">initrd_module</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">initrd_module</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="title">module</span>&gt;</span>ata_generic<span class="tag">&lt;/<span class="title">module</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="title">initrd_module</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="title">initrd_modules</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">loader_type</span>&gt;</span>grub<span class="tag">&lt;/<span class="title">loader_type</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">sections</span> <span class="attribute">config:type</span>=<span class="value">"list"</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">section</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="title">append</span>&gt;</span>resume=/dev/sda1 splash=silent showopts<span class="tag">&lt;/<span class="title">append</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="title">image</span>&gt;</span>/boot/vmlinuz-3.0.13-0.27-default<span class="tag">&lt;/<span class="title">image</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="title">initial</span>&gt;</span>1<span class="tag">&lt;/<span class="title">initial</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="title">initrd</span>&gt;</span>/boot/initrd-3.0.13-0.27-default<span class="tag">&lt;/<span class="title">initrd</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="title">lines_cache_id</span>&gt;</span>0<span class="tag">&lt;/<span class="title">lines_cache_id</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="title">name</span>&gt;</span>SUSE Linux Enterprise Server 11 SP2 - 3.0.13-0.27<span class="tag">&lt;/<span class="title">name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="title">original_name</span>&gt;</span>linux<span class="tag">&lt;/<span class="title">original_name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="title">root</span>&gt;</span>/dev/system/root<span class="tag">&lt;/<span class="title">root</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="title">type</span>&gt;</span>image<span class="tag">&lt;/<span class="title">type</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="title">vgamode</span>&gt;</span>0x317<span class="tag">&lt;/<span class="title">vgamode</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="title">section</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">section</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="title">append</span>&gt;</span>showopts ide=nodma apm=off noresume edd=off powersaved=off nohz=off highres=off processor.max_cstate=1 nomodeset x11failsafe<span class="tag">&lt;/<span class="title">append</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="title">image</span>&gt;</span>/boot/vmlinuz-3.0.13-0.27-default<span class="tag">&lt;/<span class="title">image</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="title">initrd</span>&gt;</span>/boot/initrd-3.0.13-0.27-default<span class="tag">&lt;/<span class="title">initrd</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="title">lines_cache_id</span>&gt;</span>1<span class="tag">&lt;/<span class="title">lines_cache_id</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="title">name</span>&gt;</span>Failsafe -- SUSE Linux Enterprise Server 11 SP2 - 3.0.13-0.27<span class="tag">&lt;/<span class="title">name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="title">original_name</span>&gt;</span>failsafe<span class="tag">&lt;/<span class="title">original_name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="title">root</span>&gt;</span>/dev/system/root<span class="tag">&lt;/<span class="title">root</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="title">type</span>&gt;</span>image<span class="tag">&lt;/<span class="title">type</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="title">vgamode</span>&gt;</span>0x317<span class="tag">&lt;/<span class="title">vgamode</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="title">section</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">section</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="title">blockoffset</span>&gt;</span>1<span class="tag">&lt;/<span class="title">blockoffset</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="title">chainloader</span>&gt;</span>/dev/fd0<span class="tag">&lt;/<span class="title">chainloader</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="title">lines_cache_id</span>&gt;</span>2<span class="tag">&lt;/<span class="title">lines_cache_id</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="title">name</span>&gt;</span>Floppy<span class="tag">&lt;/<span class="title">name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="title">noverifyroot</span>&gt;</span>true<span class="tag">&lt;/<span class="title">noverifyroot</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="title">original_name</span>&gt;</span>floppy<span class="tag">&lt;/<span class="title">original_name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="title">type</span>&gt;</span>other<span class="tag">&lt;/<span class="title">type</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="title">section</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="title">sections</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="title">bootloader</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="title">ca_mgm</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">CAName</span>&gt;</span>YaST_Default_CA<span class="tag">&lt;/<span class="title">CAName</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">ca_commonName</span>&gt;</span>YaST Default CA (site)<span class="tag">&lt;/<span class="title">ca_commonName</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">country</span>&gt;</span>CN<span class="tag">&lt;/<span class="title">country</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">password</span>&gt;</span>ENTER PASSWORD HERE<span class="tag">&lt;/<span class="title">password</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">server_email</span>&gt;</span>postmaster@site<span class="tag">&lt;/<span class="title">server_email</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">takeLocalServerName</span> <span class="attribute">config:type</span>=<span class="value">"boolean"</span>&gt;</span>true<span class="tag">&lt;/<span class="title">takeLocalServerName</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="title">ca_mgm</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="title">deploy_image</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">image_installation</span> <span class="attribute">config:type</span>=<span class="value">"boolean"</span>&gt;</span>false<span class="tag">&lt;/<span class="title">image_installation</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="title">deploy_image</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="title">firewall</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">FW_ALLOW_FW_BROADCAST_DMZ</span>&gt;</span>no<span class="tag">&lt;/<span class="title">FW_ALLOW_FW_BROADCAST_DMZ</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">FW_ALLOW_FW_BROADCAST_EXT</span>&gt;</span>no<span class="tag">&lt;/<span class="title">FW_ALLOW_FW_BROADCAST_EXT</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">FW_ALLOW_FW_BROADCAST_INT</span>&gt;</span>no<span class="tag">&lt;/<span class="title">FW_ALLOW_FW_BROADCAST_INT</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">FW_CONFIGURATIONS_DMZ</span>&gt;</span><span class="tag">&lt;/<span class="title">FW_CONFIGURATIONS_DMZ</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">FW_CONFIGURATIONS_EXT</span>&gt;</span><span class="tag">&lt;/<span class="title">FW_CONFIGURATIONS_EXT</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">FW_CONFIGURATIONS_INT</span>&gt;</span><span class="tag">&lt;/<span class="title">FW_CONFIGURATIONS_INT</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">FW_DEV_DMZ</span>&gt;</span><span class="tag">&lt;/<span class="title">FW_DEV_DMZ</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">FW_DEV_EXT</span>&gt;</span>any eth0<span class="tag">&lt;/<span class="title">FW_DEV_EXT</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">FW_DEV_INT</span>&gt;</span><span class="tag">&lt;/<span class="title">FW_DEV_INT</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">FW_FORWARD_ALWAYS_INOUT_DEV</span>&gt;</span><span class="tag">&lt;/<span class="title">FW_FORWARD_ALWAYS_INOUT_DEV</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">FW_FORWARD_MASQ</span>&gt;</span><span class="tag">&lt;/<span class="title">FW_FORWARD_MASQ</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">FW_IGNORE_FW_BROADCAST_DMZ</span>&gt;</span>no<span class="tag">&lt;/<span class="title">FW_IGNORE_FW_BROADCAST_DMZ</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">FW_IGNORE_FW_BROADCAST_EXT</span>&gt;</span>yes<span class="tag">&lt;/<span class="title">FW_IGNORE_FW_BROADCAST_EXT</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">FW_IGNORE_FW_BROADCAST_INT</span>&gt;</span>no<span class="tag">&lt;/<span class="title">FW_IGNORE_FW_BROADCAST_INT</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">FW_IPSEC_TRUST</span>&gt;</span>no<span class="tag">&lt;/<span class="title">FW_IPSEC_TRUST</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">FW_LOAD_MODULES</span>&gt;</span>nf_conntrack_netbios_ns<span class="tag">&lt;/<span class="title">FW_LOAD_MODULES</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">FW_LOG_ACCEPT_ALL</span>&gt;</span>no<span class="tag">&lt;/<span class="title">FW_LOG_ACCEPT_ALL</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">FW_LOG_ACCEPT_CRIT</span>&gt;</span>yes<span class="tag">&lt;/<span class="title">FW_LOG_ACCEPT_CRIT</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">FW_LOG_DROP_ALL</span>&gt;</span>no<span class="tag">&lt;/<span class="title">FW_LOG_DROP_ALL</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">FW_LOG_DROP_CRIT</span>&gt;</span>yes<span class="tag">&lt;/<span class="title">FW_LOG_DROP_CRIT</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">FW_MASQUERADE</span>&gt;</span>no<span class="tag">&lt;/<span class="title">FW_MASQUERADE</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">FW_PROTECT_FROM_INT</span>&gt;</span>no<span class="tag">&lt;/<span class="title">FW_PROTECT_FROM_INT</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">FW_ROUTE</span>&gt;</span>no<span class="tag">&lt;/<span class="title">FW_ROUTE</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">FW_SERVICES_ACCEPT_DMZ</span>&gt;</span><span class="tag">&lt;/<span class="title">FW_SERVICES_ACCEPT_DMZ</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">FW_SERVICES_ACCEPT_EXT</span>&gt;</span><span class="tag">&lt;/<span class="title">FW_SERVICES_ACCEPT_EXT</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">FW_SERVICES_ACCEPT_INT</span>&gt;</span><span class="tag">&lt;/<span class="title">FW_SERVICES_ACCEPT_INT</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">FW_SERVICES_ACCEPT_RELATED_DMZ</span>&gt;</span><span class="tag">&lt;/<span class="title">FW_SERVICES_ACCEPT_RELATED_DMZ</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">FW_SERVICES_ACCEPT_RELATED_EXT</span>&gt;</span><span class="tag">&lt;/<span class="title">FW_SERVICES_ACCEPT_RELATED_EXT</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">FW_SERVICES_ACCEPT_RELATED_INT</span>&gt;</span><span class="tag">&lt;/<span class="title">FW_SERVICES_ACCEPT_RELATED_INT</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">FW_SERVICES_DMZ_IP</span>&gt;</span><span class="tag">&lt;/<span class="title">FW_SERVICES_DMZ_IP</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">FW_SERVICES_DMZ_RPC</span>&gt;</span><span class="tag">&lt;/<span class="title">FW_SERVICES_DMZ_RPC</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">FW_SERVICES_DMZ_TCP</span>&gt;</span><span class="tag">&lt;/<span class="title">FW_SERVICES_DMZ_TCP</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">FW_SERVICES_DMZ_UDP</span>&gt;</span><span class="tag">&lt;/<span class="title">FW_SERVICES_DMZ_UDP</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">FW_SERVICES_EXT_IP</span>&gt;</span><span class="tag">&lt;/<span class="title">FW_SERVICES_EXT_IP</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">FW_SERVICES_EXT_RPC</span>&gt;</span><span class="tag">&lt;/<span class="title">FW_SERVICES_EXT_RPC</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">FW_SERVICES_EXT_TCP</span>&gt;</span><span class="tag">&lt;/<span class="title">FW_SERVICES_EXT_TCP</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">FW_SERVICES_EXT_UDP</span>&gt;</span><span class="tag">&lt;/<span class="title">FW_SERVICES_EXT_UDP</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">FW_SERVICES_INT_IP</span>&gt;</span><span class="tag">&lt;/<span class="title">FW_SERVICES_INT_IP</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">FW_SERVICES_INT_RPC</span>&gt;</span><span class="tag">&lt;/<span class="title">FW_SERVICES_INT_RPC</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">FW_SERVICES_INT_TCP</span>&gt;</span><span class="tag">&lt;/<span class="title">FW_SERVICES_INT_TCP</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">FW_SERVICES_INT_UDP</span>&gt;</span><span class="tag">&lt;/<span class="title">FW_SERVICES_INT_UDP</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">enable_firewall</span> <span class="attribute">config:type</span>=<span class="value">"boolean"</span>&gt;</span>false<span class="tag">&lt;/<span class="title">enable_firewall</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">start_firewall</span> <span class="attribute">config:type</span>=<span class="value">"boolean"</span>&gt;</span>false<span class="tag">&lt;/<span class="title">start_firewall</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="title">firewall</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="title">general</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">ask-list</span> <span class="attribute">config:type</span>=<span class="value">"list"</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">mode</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">confirm</span> <span class="attribute">config:type</span>=<span class="value">"boolean"</span>&gt;</span>false<span class="tag">&lt;/<span class="title">confirm</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="title">mode</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">mouse</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">id</span>&gt;</span>none<span class="tag">&lt;/<span class="title">id</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="title">mouse</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">proposals</span> <span class="attribute">config:type</span>=<span class="value">"list"</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">signature-handling</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">accept_file_without_checksum</span> <span class="attribute">config:type</span>=<span class="value">"boolean"</span>&gt;</span>true<span class="tag">&lt;/<span class="title">accept_file_without_checksum</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">accept_non_trusted_gpg_key</span> <span class="attribute">config:type</span>=<span class="value">"boolean"</span>&gt;</span>true<span class="tag">&lt;/<span class="title">accept_non_trusted_gpg_key</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">accept_unknown_gpg_key</span> <span class="attribute">config:type</span>=<span class="value">"boolean"</span>&gt;</span>true<span class="tag">&lt;/<span class="title">accept_unknown_gpg_key</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">accept_unsigned_file</span> <span class="attribute">config:type</span>=<span class="value">"boolean"</span>&gt;</span>true<span class="tag">&lt;/<span class="title">accept_unsigned_file</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">accept_verification_failed</span> <span class="attribute">config:type</span>=<span class="value">"boolean"</span>&gt;</span>false<span class="tag">&lt;/<span class="title">accept_verification_failed</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">import_gpg_key</span> <span class="attribute">config:type</span>=<span class="value">"boolean"</span>&gt;</span>true<span class="tag">&lt;/<span class="title">import_gpg_key</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="title">signature-handling</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">storage</span>/&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="title">general</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="title">groups</span> <span class="attribute">config:type</span>=<span class="value">"list"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">group</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">encrypted</span> <span class="attribute">config:type</span>=<span class="value">"boolean"</span>&gt;</span>true<span class="tag">&lt;/<span class="title">encrypted</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">gid</span>&gt;</span>100<span class="tag">&lt;/<span class="title">gid</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">group_password</span>&gt;</span>x<span class="tag">&lt;/<span class="title">group_password</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">groupname</span>&gt;</span>users<span class="tag">&lt;/<span class="title">groupname</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">userlist</span>&gt;</span><span class="tag">&lt;/<span class="title">userlist</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="title">group</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">group</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">encrypted</span> <span class="attribute">config:type</span>=<span class="value">"boolean"</span>&gt;</span>true<span class="tag">&lt;/<span class="title">encrypted</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">gid</span>&gt;</span>19<span class="tag">&lt;/<span class="title">gid</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">group_password</span>&gt;</span>x<span class="tag">&lt;/<span class="title">group_password</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">groupname</span>&gt;</span>floppy<span class="tag">&lt;/<span class="title">groupname</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">userlist</span>&gt;</span><span class="tag">&lt;/<span class="title">userlist</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="title">group</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">group</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">encrypted</span> <span class="attribute">config:type</span>=<span class="value">"boolean"</span>&gt;</span>true<span class="tag">&lt;/<span class="title">encrypted</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">gid</span>&gt;</span>1<span class="tag">&lt;/<span class="title">gid</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">group_password</span>&gt;</span>x<span class="tag">&lt;/<span class="title">group_password</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">groupname</span>&gt;</span>bin<span class="tag">&lt;/<span class="title">groupname</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">userlist</span>&gt;</span>daemon<span class="tag">&lt;/<span class="title">userlist</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="title">group</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">group</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">encrypted</span> <span class="attribute">config:type</span>=<span class="value">"boolean"</span>&gt;</span>true<span class="tag">&lt;/<span class="title">encrypted</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">gid</span>&gt;</span>41<span class="tag">&lt;/<span class="title">gid</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">group_password</span>&gt;</span>x<span class="tag">&lt;/<span class="title">group_password</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">groupname</span>&gt;</span>xok<span class="tag">&lt;/<span class="title">groupname</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">userlist</span>&gt;</span><span class="tag">&lt;/<span class="title">userlist</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="title">group</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">group</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">encrypted</span> <span class="attribute">config:type</span>=<span class="value">"boolean"</span>&gt;</span>true<span class="tag">&lt;/<span class="title">encrypted</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">gid</span>&gt;</span>65533<span class="tag">&lt;/<span class="title">gid</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">group_password</span>&gt;</span>x<span class="tag">&lt;/<span class="title">group_password</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">groupname</span>&gt;</span>nobody<span class="tag">&lt;/<span class="title">groupname</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">userlist</span>&gt;</span><span class="tag">&lt;/<span class="title">userlist</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="title">group</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">group</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">encrypted</span> <span class="attribute">config:type</span>=<span class="value">"boolean"</span>&gt;</span>true<span class="tag">&lt;/<span class="title">encrypted</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">gid</span>&gt;</span>43<span class="tag">&lt;/<span class="title">gid</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">group_password</span>&gt;</span>x<span class="tag">&lt;/<span class="title">group_password</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">groupname</span>&gt;</span>modem<span class="tag">&lt;/<span class="title">groupname</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">userlist</span>&gt;</span><span class="tag">&lt;/<span class="title">userlist</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="title">group</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">group</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">encrypted</span> <span class="attribute">config:type</span>=<span class="value">"boolean"</span>&gt;</span>true<span class="tag">&lt;/<span class="title">encrypted</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">gid</span>&gt;</span>5<span class="tag">&lt;/<span class="title">gid</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">group_password</span>&gt;</span>x<span class="tag">&lt;/<span class="title">group_password</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">groupname</span>&gt;</span>tty<span class="tag">&lt;/<span class="title">groupname</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">userlist</span>&gt;</span><span class="tag">&lt;/<span class="title">userlist</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="title">group</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">group</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">encrypted</span> <span class="attribute">config:type</span>=<span class="value">"boolean"</span>&gt;</span>true<span class="tag">&lt;/<span class="title">encrypted</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">gid</span>&gt;</span>7<span class="tag">&lt;/<span class="title">gid</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">group_password</span>&gt;</span>x<span class="tag">&lt;/<span class="title">group_password</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">groupname</span>&gt;</span>lp<span class="tag">&lt;/<span class="title">groupname</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">userlist</span>&gt;</span><span class="tag">&lt;/<span class="title">userlist</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="title">group</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">group</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">encrypted</span> <span class="attribute">config:type</span>=<span class="value">"boolean"</span>&gt;</span>true<span class="tag">&lt;/<span class="title">encrypted</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">gid</span>&gt;</span>104<span class="tag">&lt;/<span class="title">gid</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">group_password</span>&gt;</span>!<span class="tag">&lt;/<span class="title">group_password</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">groupname</span>&gt;</span>uuidd<span class="tag">&lt;/<span class="title">groupname</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">userlist</span>&gt;</span><span class="tag">&lt;/<span class="title">userlist</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="title">group</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">group</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">encrypted</span> <span class="attribute">config:type</span>=<span class="value">"boolean"</span>&gt;</span>true<span class="tag">&lt;/<span class="title">encrypted</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">gid</span>&gt;</span>51<span class="tag">&lt;/<span class="title">gid</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">group_password</span>&gt;</span>!<span class="tag">&lt;/<span class="title">group_password</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">groupname</span>&gt;</span>postfix<span class="tag">&lt;/<span class="title">groupname</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">userlist</span>&gt;</span><span class="tag">&lt;/<span class="title">userlist</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="title">group</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">group</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">encrypted</span> <span class="attribute">config:type</span>=<span class="value">"boolean"</span>&gt;</span>true<span class="tag">&lt;/<span class="title">encrypted</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">gid</span>&gt;</span>115<span class="tag">&lt;/<span class="title">gid</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">group_password</span>&gt;</span>!<span class="tag">&lt;/<span class="title">group_password</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">groupname</span>&gt;</span>gdm<span class="tag">&lt;/<span class="title">groupname</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">userlist</span>&gt;</span><span class="tag">&lt;/<span class="title">userlist</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="title">group</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">group</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">encrypted</span> <span class="attribute">config:type</span>=<span class="value">"boolean"</span>&gt;</span>true<span class="tag">&lt;/<span class="title">encrypted</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">gid</span>&gt;</span>65534<span class="tag">&lt;/<span class="title">gid</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">group_password</span>&gt;</span>x<span class="tag">&lt;/<span class="title">group_password</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">groupname</span>&gt;</span>nogroup<span class="tag">&lt;/<span class="title">groupname</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">userlist</span>&gt;</span>nobody<span class="tag">&lt;/<span class="title">userlist</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="title">group</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">group</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">encrypted</span> <span class="attribute">config:type</span>=<span class="value">"boolean"</span>&gt;</span>true<span class="tag">&lt;/<span class="title">encrypted</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">gid</span>&gt;</span>107<span class="tag">&lt;/<span class="title">gid</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">group_password</span>&gt;</span>!<span class="tag">&lt;/<span class="title">group_password</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">groupname</span>&gt;</span>oinstall<span class="tag">&lt;/<span class="title">groupname</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">userlist</span>&gt;</span><span class="tag">&lt;/<span class="title">userlist</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="title">group</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">group</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">encrypted</span> <span class="attribute">config:type</span>=<span class="value">"boolean"</span>&gt;</span>true<span class="tag">&lt;/<span class="title">encrypted</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">gid</span>&gt;</span>101<span class="tag">&lt;/<span class="title">gid</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">group_password</span>&gt;</span>!<span class="tag">&lt;/<span class="title">group_password</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">groupname</span>&gt;</span>messagebus<span class="tag">&lt;/<span class="title">groupname</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">userlist</span>&gt;</span><span class="tag">&lt;/<span class="title">userlist</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="title">group</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">group</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">encrypted</span> <span class="attribute">config:type</span>=<span class="value">"boolean"</span>&gt;</span>true<span class="tag">&lt;/<span class="title">encrypted</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">gid</span>&gt;</span>59<span class="tag">&lt;/<span class="title">gid</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">group_password</span>&gt;</span>!<span class="tag">&lt;/<span class="title">group_password</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">groupname</span>&gt;</span>maildrop<span class="tag">&lt;/<span class="title">groupname</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">userlist</span>&gt;</span><span class="tag">&lt;/<span class="title">userlist</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="title">group</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">group</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">encrypted</span> <span class="attribute">config:type</span>=<span class="value">"boolean"</span>&gt;</span>true<span class="tag">&lt;/<span class="title">encrypted</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">gid</span>&gt;</span>33<span class="tag">&lt;/<span class="title">gid</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">group_password</span>&gt;</span>x<span class="tag">&lt;/<span class="title">group_password</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">groupname</span>&gt;</span>video<span class="tag">&lt;/<span class="title">groupname</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">userlist</span>&gt;</span><span class="tag">&lt;/<span class="title">userlist</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="title">group</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">group</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">encrypted</span> <span class="attribute">config:type</span>=<span class="value">"boolean"</span>&gt;</span>true<span class="tag">&lt;/<span class="title">encrypted</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">gid</span>&gt;</span>3<span class="tag">&lt;/<span class="title">gid</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">group_password</span>&gt;</span>x<span class="tag">&lt;/<span class="title">group_password</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">groupname</span>&gt;</span>sys<span class="tag">&lt;/<span class="title">groupname</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">userlist</span>&gt;</span><span class="tag">&lt;/<span class="title">userlist</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="title">group</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">group</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">encrypted</span> <span class="attribute">config:type</span>=<span class="value">"boolean"</span>&gt;</span>true<span class="tag">&lt;/<span class="title">encrypted</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">gid</span>&gt;</span>15<span class="tag">&lt;/<span class="title">gid</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">group_password</span>&gt;</span>x<span class="tag">&lt;/<span class="title">group_password</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">groupname</span>&gt;</span>shadow<span class="tag">&lt;/<span class="title">groupname</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">userlist</span>&gt;</span><span class="tag">&lt;/<span class="title">userlist</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="title">group</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">group</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">encrypted</span> <span class="attribute">config:type</span>=<span class="value">"boolean"</span>&gt;</span>true<span class="tag">&lt;/<span class="title">encrypted</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">gid</span>&gt;</span>20<span class="tag">&lt;/<span class="title">gid</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">group_password</span>&gt;</span>x<span class="tag">&lt;/<span class="title">group_password</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">groupname</span>&gt;</span>cdrom<span class="tag">&lt;/<span class="title">groupname</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">userlist</span>&gt;</span><span class="tag">&lt;/<span class="title">userlist</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="title">group</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">group</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">encrypted</span> <span class="attribute">config:type</span>=<span class="value">"boolean"</span>&gt;</span>true<span class="tag">&lt;/<span class="title">encrypted</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">gid</span>&gt;</span>21<span class="tag">&lt;/<span class="title">gid</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">group_password</span>&gt;</span>x<span class="tag">&lt;/<span class="title">group_password</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">groupname</span>&gt;</span>console<span class="tag">&lt;/<span class="title">groupname</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">userlist</span>&gt;</span><span class="tag">&lt;/<span class="title">userlist</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="title">group</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">group</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">encrypted</span> <span class="attribute">config:type</span>=<span class="value">"boolean"</span>&gt;</span>true<span class="tag">&lt;/<span class="title">encrypted</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">gid</span>&gt;</span>42<span class="tag">&lt;/<span class="title">gid</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">group_password</span>&gt;</span>x<span class="tag">&lt;/<span class="title">group_password</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">groupname</span>&gt;</span>trusted<span class="tag">&lt;/<span class="title">groupname</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">userlist</span>&gt;</span><span class="tag">&lt;/<span class="title">userlist</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="title">group</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">group</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">encrypted</span> <span class="attribute">config:type</span>=<span class="value">"boolean"</span>&gt;</span>true<span class="tag">&lt;/<span class="title">encrypted</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">gid</span>&gt;</span>102<span class="tag">&lt;/<span class="title">gid</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">group_password</span>&gt;</span>!<span class="tag">&lt;/<span class="title">group_password</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">groupname</span>&gt;</span>haldaemon<span class="tag">&lt;/<span class="title">groupname</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">userlist</span>&gt;</span><span class="tag">&lt;/<span class="title">userlist</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="title">group</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">group</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">encrypted</span> <span class="attribute">config:type</span>=<span class="value">"boolean"</span>&gt;</span>true<span class="tag">&lt;/<span class="title">encrypted</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">gid</span>&gt;</span>106<span class="tag">&lt;/<span class="title">gid</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">group_password</span>&gt;</span>!<span class="tag">&lt;/<span class="title">group_password</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">groupname</span>&gt;</span>puppet<span class="tag">&lt;/<span class="title">groupname</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">userlist</span>&gt;</span><span class="tag">&lt;/<span class="title">userlist</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="title">group</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">group</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">encrypted</span> <span class="attribute">config:type</span>=<span class="value">"boolean"</span>&gt;</span>true<span class="tag">&lt;/<span class="title">encrypted</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">gid</span>&gt;</span>16<span class="tag">&lt;/<span class="title">gid</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">group_password</span>&gt;</span>x<span class="tag">&lt;/<span class="title">group_password</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">groupname</span>&gt;</span>dialout<span class="tag">&lt;/<span class="title">groupname</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">userlist</span>&gt;</span><span class="tag">&lt;/<span class="title">userlist</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="title">group</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">group</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">encrypted</span> <span class="attribute">config:type</span>=<span class="value">"boolean"</span>&gt;</span>true<span class="tag">&lt;/<span class="title">encrypted</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">gid</span>&gt;</span>110<span class="tag">&lt;/<span class="title">gid</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">group_password</span>&gt;</span>!<span class="tag">&lt;/<span class="title">group_password</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">groupname</span>&gt;</span>polkituser<span class="tag">&lt;/<span class="title">groupname</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">userlist</span>&gt;</span><span class="tag">&lt;/<span class="title">userlist</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="title">group</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">group</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">encrypted</span> <span class="attribute">config:type</span>=<span class="value">"boolean"</span>&gt;</span>true<span class="tag">&lt;/<span class="title">encrypted</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">gid</span>&gt;</span>10<span class="tag">&lt;/<span class="title">gid</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">group_password</span>&gt;</span>x<span class="tag">&lt;/<span class="title">group_password</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">groupname</span>&gt;</span>wheel<span class="tag">&lt;/<span class="title">groupname</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">userlist</span>&gt;</span><span class="tag">&lt;/<span class="title">userlist</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="title">group</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">group</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">encrypted</span> <span class="attribute">config:type</span>=<span class="value">"boolean"</span>&gt;</span>true<span class="tag">&lt;/<span class="title">encrypted</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">gid</span>&gt;</span>112<span class="tag">&lt;/<span class="title">gid</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">group_password</span>&gt;</span>!<span class="tag">&lt;/<span class="title">group_password</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">groupname</span>&gt;</span>pulse<span class="tag">&lt;/<span class="title">groupname</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">userlist</span>&gt;</span><span class="tag">&lt;/<span class="title">userlist</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="title">group</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">group</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">encrypted</span> <span class="attribute">config:type</span>=<span class="value">"boolean"</span>&gt;</span>true<span class="tag">&lt;/<span class="title">encrypted</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">gid</span>&gt;</span>8<span class="tag">&lt;/<span class="title">gid</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">group_password</span>&gt;</span>x<span class="tag">&lt;/<span class="title">group_password</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">groupname</span>&gt;</span>www<span class="tag">&lt;/<span class="title">groupname</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">userlist</span>&gt;</span><span class="tag">&lt;/<span class="title">userlist</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="title">group</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">group</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">encrypted</span> <span class="attribute">config:type</span>=<span class="value">"boolean"</span>&gt;</span>true<span class="tag">&lt;/<span class="title">encrypted</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">gid</span>&gt;</span>40<span class="tag">&lt;/<span class="title">gid</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">group_password</span>&gt;</span>x<span class="tag">&lt;/<span class="title">group_password</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">groupname</span>&gt;</span>games<span class="tag">&lt;/<span class="title">groupname</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">userlist</span>&gt;</span><span class="tag">&lt;/<span class="title">userlist</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="title">group</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">group</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">encrypted</span> <span class="attribute">config:type</span>=<span class="value">"boolean"</span>&gt;</span>true<span class="tag">&lt;/<span class="title">encrypted</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">gid</span>&gt;</span>6<span class="tag">&lt;/<span class="title">gid</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">group_password</span>&gt;</span>x<span class="tag">&lt;/<span class="title">group_password</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">groupname</span>&gt;</span>disk<span class="tag">&lt;/<span class="title">groupname</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">userlist</span>&gt;</span><span class="tag">&lt;/<span class="title">userlist</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="title">group</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">group</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">encrypted</span> <span class="attribute">config:type</span>=<span class="value">"boolean"</span>&gt;</span>true<span class="tag">&lt;/<span class="title">encrypted</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">gid</span>&gt;</span>17<span class="tag">&lt;/<span class="title">gid</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">group_password</span>&gt;</span>x<span class="tag">&lt;/<span class="title">group_password</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">groupname</span>&gt;</span>audio<span class="tag">&lt;/<span class="title">groupname</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">userlist</span>&gt;</span>pulse<span class="tag">&lt;/<span class="title">userlist</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="title">group</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">group</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">encrypted</span> <span class="attribute">config:type</span>=<span class="value">"boolean"</span>&gt;</span>true<span class="tag">&lt;/<span class="title">encrypted</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">gid</span>&gt;</span>114<span class="tag">&lt;/<span class="title">gid</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">group_password</span>&gt;</span>!<span class="tag">&lt;/<span class="title">group_password</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">groupname</span>&gt;</span>suse-ncc<span class="tag">&lt;/<span class="title">groupname</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">userlist</span>&gt;</span><span class="tag">&lt;/<span class="title">userlist</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="title">group</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">group</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">encrypted</span> <span class="attribute">config:type</span>=<span class="value">"boolean"</span>&gt;</span>true<span class="tag">&lt;/<span class="title">encrypted</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">gid</span>&gt;</span>49<span class="tag">&lt;/<span class="title">gid</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">group_password</span>&gt;</span>x<span class="tag">&lt;/<span class="title">group_password</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">groupname</span>&gt;</span>ftp<span class="tag">&lt;/<span class="title">groupname</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">userlist</span>&gt;</span><span class="tag">&lt;/<span class="title">userlist</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="title">group</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">group</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">encrypted</span> <span class="attribute">config:type</span>=<span class="value">"boolean"</span>&gt;</span>true<span class="tag">&lt;/<span class="title">encrypted</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">gid</span>&gt;</span>103<span class="tag">&lt;/<span class="title">gid</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">group_password</span>&gt;</span>!<span class="tag">&lt;/<span class="title">group_password</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">groupname</span>&gt;</span>tape<span class="tag">&lt;/<span class="title">groupname</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">userlist</span>&gt;</span><span class="tag">&lt;/<span class="title">userlist</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="title">group</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">group</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">encrypted</span> <span class="attribute">config:type</span>=<span class="value">"boolean"</span>&gt;</span>true<span class="tag">&lt;/<span class="title">encrypted</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">gid</span>&gt;</span>25<span class="tag">&lt;/<span class="title">gid</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">group_password</span>&gt;</span>!<span class="tag">&lt;/<span class="title">group_password</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">groupname</span>&gt;</span>at<span class="tag">&lt;/<span class="title">groupname</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">userlist</span>&gt;</span><span class="tag">&lt;/<span class="title">userlist</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="title">group</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">group</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">encrypted</span> <span class="attribute">config:type</span>=<span class="value">"boolean"</span>&gt;</span>true<span class="tag">&lt;/<span class="title">encrypted</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">gid</span>&gt;</span>9<span class="tag">&lt;/<span class="title">gid</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">group_password</span>&gt;</span>x<span class="tag">&lt;/<span class="title">group_password</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">groupname</span>&gt;</span>kmem<span class="tag">&lt;/<span class="title">groupname</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">userlist</span>&gt;</span><span class="tag">&lt;/<span class="title">userlist</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="title">group</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">group</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">encrypted</span> <span class="attribute">config:type</span>=<span class="value">"boolean"</span>&gt;</span>true<span class="tag">&lt;/<span class="title">encrypted</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">gid</span>&gt;</span>32<span class="tag">&lt;/<span class="title">gid</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">group_password</span>&gt;</span>x<span class="tag">&lt;/<span class="title">group_password</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">groupname</span>&gt;</span>public<span class="tag">&lt;/<span class="title">groupname</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">userlist</span>&gt;</span><span class="tag">&lt;/<span class="title">userlist</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="title">group</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">group</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">encrypted</span> <span class="attribute">config:type</span>=<span class="value">"boolean"</span>&gt;</span>true<span class="tag">&lt;/<span class="title">encrypted</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">gid</span>&gt;</span>0<span class="tag">&lt;/<span class="title">gid</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">group_password</span>&gt;</span>x<span class="tag">&lt;/<span class="title">group_password</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">groupname</span>&gt;</span>root<span class="tag">&lt;/<span class="title">groupname</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">userlist</span>&gt;</span><span class="tag">&lt;/<span class="title">userlist</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="title">group</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">group</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">encrypted</span> <span class="attribute">config:type</span>=<span class="value">"boolean"</span>&gt;</span>true<span class="tag">&lt;/<span class="title">encrypted</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">gid</span>&gt;</span>12<span class="tag">&lt;/<span class="title">gid</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">group_password</span>&gt;</span>x<span class="tag">&lt;/<span class="title">group_password</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">groupname</span>&gt;</span>mail<span class="tag">&lt;/<span class="title">groupname</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">userlist</span>&gt;</span><span class="tag">&lt;/<span class="title">userlist</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="title">group</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">group</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">encrypted</span> <span class="attribute">config:type</span>=<span class="value">"boolean"</span>&gt;</span>true<span class="tag">&lt;/<span class="title">encrypted</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">gid</span>&gt;</span>2<span class="tag">&lt;/<span class="title">gid</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">group_password</span>&gt;</span>x<span class="tag">&lt;/<span class="title">group_password</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">groupname</span>&gt;</span>daemon<span class="tag">&lt;/<span class="title">groupname</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">userlist</span>&gt;</span><span class="tag">&lt;/<span class="title">userlist</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="title">group</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">group</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">encrypted</span> <span class="attribute">config:type</span>=<span class="value">"boolean"</span>&gt;</span>true<span class="tag">&lt;/<span class="title">encrypted</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">gid</span>&gt;</span>105<span class="tag">&lt;/<span class="title">gid</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">group_password</span>&gt;</span>!<span class="tag">&lt;/<span class="title">group_password</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">groupname</span>&gt;</span>sfcb<span class="tag">&lt;/<span class="title">groupname</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">userlist</span>&gt;</span>root<span class="tag">&lt;/<span class="title">userlist</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="title">group</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">group</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">encrypted</span> <span class="attribute">config:type</span>=<span class="value">"boolean"</span>&gt;</span>true<span class="tag">&lt;/<span class="title">encrypted</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">gid</span>&gt;</span>111<span class="tag">&lt;/<span class="title">gid</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">group_password</span>&gt;</span>!<span class="tag">&lt;/<span class="title">group_password</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">groupname</span>&gt;</span>ntp<span class="tag">&lt;/<span class="title">groupname</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">userlist</span>&gt;</span><span class="tag">&lt;/<span class="title">userlist</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="title">group</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">group</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">encrypted</span> <span class="attribute">config:type</span>=<span class="value">"boolean"</span>&gt;</span>true<span class="tag">&lt;/<span class="title">encrypted</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">gid</span>&gt;</span>14<span class="tag">&lt;/<span class="title">gid</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">group_password</span>&gt;</span>x<span class="tag">&lt;/<span class="title">group_password</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">groupname</span>&gt;</span>uucp<span class="tag">&lt;/<span class="title">groupname</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">userlist</span>&gt;</span><span class="tag">&lt;/<span class="title">userlist</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="title">group</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">group</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">encrypted</span> <span class="attribute">config:type</span>=<span class="value">"boolean"</span>&gt;</span>true<span class="tag">&lt;/<span class="title">encrypted</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">gid</span>&gt;</span>113<span class="tag">&lt;/<span class="title">gid</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">group_password</span>&gt;</span>!<span class="tag">&lt;/<span class="title">group_password</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">groupname</span>&gt;</span>pulse-access<span class="tag">&lt;/<span class="title">groupname</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">userlist</span>&gt;</span><span class="tag">&lt;/<span class="title">userlist</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="title">group</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">group</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">encrypted</span> <span class="attribute">config:type</span>=<span class="value">"boolean"</span>&gt;</span>true<span class="tag">&lt;/<span class="title">encrypted</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">gid</span>&gt;</span>108<span class="tag">&lt;/<span class="title">gid</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">group_password</span>&gt;</span>!<span class="tag">&lt;/<span class="title">group_password</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">groupname</span>&gt;</span>dba<span class="tag">&lt;/<span class="title">groupname</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">userlist</span>&gt;</span>oracle<span class="tag">&lt;/<span class="title">userlist</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="title">group</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">group</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">encrypted</span> <span class="attribute">config:type</span>=<span class="value">"boolean"</span>&gt;</span>true<span class="tag">&lt;/<span class="title">encrypted</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">gid</span>&gt;</span>71<span class="tag">&lt;/<span class="title">gid</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">group_password</span>&gt;</span>!<span class="tag">&lt;/<span class="title">group_password</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">groupname</span>&gt;</span>ntadmin<span class="tag">&lt;/<span class="title">groupname</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">userlist</span>&gt;</span><span class="tag">&lt;/<span class="title">userlist</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="title">group</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">group</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">encrypted</span> <span class="attribute">config:type</span>=<span class="value">"boolean"</span>&gt;</span>true<span class="tag">&lt;/<span class="title">encrypted</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">gid</span>&gt;</span>62<span class="tag">&lt;/<span class="title">gid</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">group_password</span>&gt;</span>x<span class="tag">&lt;/<span class="title">group_password</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">groupname</span>&gt;</span>man<span class="tag">&lt;/<span class="title">groupname</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">userlist</span>&gt;</span><span class="tag">&lt;/<span class="title">userlist</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="title">group</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">group</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">encrypted</span> <span class="attribute">config:type</span>=<span class="value">"boolean"</span>&gt;</span>true<span class="tag">&lt;/<span class="title">encrypted</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">gid</span>&gt;</span>109<span class="tag">&lt;/<span class="title">gid</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">group_password</span>&gt;</span>!<span class="tag">&lt;/<span class="title">group_password</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">groupname</span>&gt;</span>mysql<span class="tag">&lt;/<span class="title">groupname</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">userlist</span>&gt;</span><span class="tag">&lt;/<span class="title">userlist</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="title">group</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">group</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">encrypted</span> <span class="attribute">config:type</span>=<span class="value">"boolean"</span>&gt;</span>true<span class="tag">&lt;/<span class="title">encrypted</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">gid</span>&gt;</span>22<span class="tag">&lt;/<span class="title">gid</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">group_password</span>&gt;</span>x<span class="tag">&lt;/<span class="title">group_password</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">groupname</span>&gt;</span>utmp<span class="tag">&lt;/<span class="title">groupname</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">userlist</span>&gt;</span><span class="tag">&lt;/<span class="title">userlist</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="title">group</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">group</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">encrypted</span> <span class="attribute">config:type</span>=<span class="value">"boolean"</span>&gt;</span>true<span class="tag">&lt;/<span class="title">encrypted</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">gid</span>&gt;</span>13<span class="tag">&lt;/<span class="title">gid</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">group_password</span>&gt;</span>x<span class="tag">&lt;/<span class="title">group_password</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">groupname</span>&gt;</span>news<span class="tag">&lt;/<span class="title">groupname</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">userlist</span>&gt;</span><span class="tag">&lt;/<span class="title">userlist</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="title">group</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">group</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">encrypted</span> <span class="attribute">config:type</span>=<span class="value">"boolean"</span>&gt;</span>true<span class="tag">&lt;/<span class="title">encrypted</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">gid</span>&gt;</span>65<span class="tag">&lt;/<span class="title">gid</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">group_password</span>&gt;</span>!<span class="tag">&lt;/<span class="title">group_password</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">groupname</span>&gt;</span>sshd<span class="tag">&lt;/<span class="title">groupname</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">userlist</span>&gt;</span><span class="tag">&lt;/<span class="title">userlist</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="title">group</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="title">groups</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="title">host</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">hosts</span> <span class="attribute">config:type</span>=<span class="value">"list"</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">hosts_entry</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="title">host_address</span>&gt;</span>127.0.0.1<span class="tag">&lt;/<span class="title">host_address</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="title">names</span> <span class="attribute">config:type</span>=<span class="value">"list"</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="title">name</span>&gt;</span>localhost<span class="tag">&lt;/<span class="title">name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="title">names</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="title">hosts_entry</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">hosts_entry</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="title">host_address</span>&gt;</span>::1<span class="tag">&lt;/<span class="title">host_address</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="title">names</span> <span class="attribute">config:type</span>=<span class="value">"list"</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="title">name</span>&gt;</span>localhost ipv6-localhost ipv6-loopback<span class="tag">&lt;/<span class="title">name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="title">names</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="title">hosts_entry</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">hosts_entry</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="title">host_address</span>&gt;</span>addr:127.0.0.1<span class="tag">&lt;/<span class="title">host_address</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="title">names</span> <span class="attribute">config:type</span>=<span class="value">"list"</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="title">name</span>&gt;</span>n n<span class="tag">&lt;/<span class="title">name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="title">names</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="title">hosts_entry</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">hosts_entry</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="title">host_address</span>&gt;</span>fe00::0<span class="tag">&lt;/<span class="title">host_address</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="title">names</span> <span class="attribute">config:type</span>=<span class="value">"list"</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="title">name</span>&gt;</span>ipv6-localnet<span class="tag">&lt;/<span class="title">name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="title">names</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="title">hosts_entry</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">hosts_entry</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="title">host_address</span>&gt;</span>ff00::0<span class="tag">&lt;/<span class="title">host_address</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="title">names</span> <span class="attribute">config:type</span>=<span class="value">"list"</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="title">name</span>&gt;</span>ipv6-mcastprefix<span class="tag">&lt;/<span class="title">name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="title">names</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="title">hosts_entry</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">hosts_entry</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="title">host_address</span>&gt;</span>ff02::1<span class="tag">&lt;/<span class="title">host_address</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="title">names</span> <span class="attribute">config:type</span>=<span class="value">"list"</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="title">name</span>&gt;</span>ipv6-allnodes<span class="tag">&lt;/<span class="title">name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="title">names</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="title">hosts_entry</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">hosts_entry</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="title">host_address</span>&gt;</span>ff02::2<span class="tag">&lt;/<span class="title">host_address</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="title">names</span> <span class="attribute">config:type</span>=<span class="value">"list"</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="title">name</span>&gt;</span>ipv6-allrouters<span class="tag">&lt;/<span class="title">name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="title">names</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="title">hosts_entry</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">hosts_entry</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="title">host_address</span>&gt;</span>ff02::3<span class="tag">&lt;/<span class="title">host_address</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="title">names</span> <span class="attribute">config:type</span>=<span class="value">"list"</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="title">name</span>&gt;</span>ipv6-allhosts<span class="tag">&lt;/<span class="title">name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="title">names</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="title">hosts_entry</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="title">hosts</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="title">host</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="title">iscsi-client</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">version</span>&gt;</span>1.0<span class="tag">&lt;/<span class="title">version</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="title">iscsi-client</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="title">kdump</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">add_crash_kernel</span> <span class="attribute">config:type</span>=<span class="value">"boolean"</span>&gt;</span>false<span class="tag">&lt;/<span class="title">add_crash_kernel</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">crash_kernel</span>&gt;</span>128M-:64M<span class="tag">&lt;/<span class="title">crash_kernel</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">general</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">KDUMP_CONTINUE_ON_ERROR</span>&gt;</span>false<span class="tag">&lt;/<span class="title">KDUMP_CONTINUE_ON_ERROR</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">KDUMP_COPY_KERNEL</span>&gt;</span>yes<span class="tag">&lt;/<span class="title">KDUMP_COPY_KERNEL</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">KDUMP_DUMPFORMAT</span>&gt;</span>compressed<span class="tag">&lt;/<span class="title">KDUMP_DUMPFORMAT</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">KDUMP_DUMPLEVEL</span>&gt;</span>0<span class="tag">&lt;/<span class="title">KDUMP_DUMPLEVEL</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">KDUMP_FREE_DISK_SIZE</span>&gt;</span>64<span class="tag">&lt;/<span class="title">KDUMP_FREE_DISK_SIZE</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">KDUMP_IMMEDIATE_REBOOT</span>&gt;</span>yes<span class="tag">&lt;/<span class="title">KDUMP_IMMEDIATE_REBOOT</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">KDUMP_KEEP_OLD_DUMPS</span>&gt;</span>5<span class="tag">&lt;/<span class="title">KDUMP_KEEP_OLD_DUMPS</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">KDUMP_NETCONFIG</span>&gt;</span>auto<span class="tag">&lt;/<span class="title">KDUMP_NETCONFIG</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">KDUMP_SAVEDIR</span>&gt;</span>file:///var/crash<span class="tag">&lt;/<span class="title">KDUMP_SAVEDIR</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">KDUMP_VERBOSE</span>&gt;</span>3<span class="tag">&lt;/<span class="title">KDUMP_VERBOSE</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="title">general</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="title">kdump</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="title">keyboard</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">keymap</span>&gt;</span>english-us<span class="tag">&lt;/<span class="title">keymap</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="title">keyboard</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="title">language</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">language</span>&gt;</span>en_US<span class="tag">&lt;/<span class="title">language</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">languages</span>&gt;</span>zh_CN,en_US<span class="tag">&lt;/<span class="title">languages</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="title">language</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="title">ldap</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">base_config_dn</span>&gt;</span><span class="tag">&lt;/<span class="title">base_config_dn</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">bind_dn</span>&gt;</span><span class="tag">&lt;/<span class="title">bind_dn</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">create_ldap</span> <span class="attribute">config:type</span>=<span class="value">"boolean"</span>&gt;</span>false<span class="tag">&lt;/<span class="title">create_ldap</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">file_server</span> <span class="attribute">config:type</span>=<span class="value">"boolean"</span>&gt;</span>false<span class="tag">&lt;/<span class="title">file_server</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">ldap_domain</span>&gt;</span>dc=example,dc=com<span class="tag">&lt;/<span class="title">ldap_domain</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">ldap_server</span>&gt;</span>127.0.0.1<span class="tag">&lt;/<span class="title">ldap_server</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">ldap_tls</span> <span class="attribute">config:type</span>=<span class="value">"boolean"</span>&gt;</span>true<span class="tag">&lt;/<span class="title">ldap_tls</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">ldap_v2</span> <span class="attribute">config:type</span>=<span class="value">"boolean"</span>&gt;</span>false<span class="tag">&lt;/<span class="title">ldap_v2</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">login_enabled</span> <span class="attribute">config:type</span>=<span class="value">"boolean"</span>&gt;</span>true<span class="tag">&lt;/<span class="title">login_enabled</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">member_attribute</span>&gt;</span>member<span class="tag">&lt;/<span class="title">member_attribute</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">mkhomedir</span> <span class="attribute">config:type</span>=<span class="value">"boolean"</span>&gt;</span>false<span class="tag">&lt;/<span class="title">mkhomedir</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">nss_base_group</span>&gt;</span><span class="tag">&lt;/<span class="title">nss_base_group</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">nss_base_passwd</span>&gt;</span><span class="tag">&lt;/<span class="title">nss_base_passwd</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">nss_base_shadow</span>&gt;</span><span class="tag">&lt;/<span class="title">nss_base_shadow</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">pam_password</span>&gt;</span>exop<span class="tag">&lt;/<span class="title">pam_password</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">sssd</span> <span class="attribute">config:type</span>=<span class="value">"boolean"</span>&gt;</span>false<span class="tag">&lt;/<span class="title">sssd</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">start_autofs</span> <span class="attribute">config:type</span>=<span class="value">"boolean"</span>&gt;</span>false<span class="tag">&lt;/<span class="title">start_autofs</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">start_ldap</span> <span class="attribute">config:type</span>=<span class="value">"boolean"</span>&gt;</span>false<span class="tag">&lt;/<span class="title">start_ldap</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="title">ldap</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="title">login_settings</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="title">networking</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">dhcp_options</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">dhclient_client_id</span>&gt;</span><span class="tag">&lt;/<span class="title">dhclient_client_id</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">dhclient_hostname_option</span>&gt;</span>AUTO<span class="tag">&lt;/<span class="title">dhclient_hostname_option</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="title">dhcp_options</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">dns</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">dhcp_hostname</span> <span class="attribute">config:type</span>=<span class="value">"boolean"</span>&gt;</span>false<span class="tag">&lt;/<span class="title">dhcp_hostname</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">resolv_conf_policy</span>&gt;</span>auto<span class="tag">&lt;/<span class="title">resolv_conf_policy</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="title">dns</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">interfaces</span> <span class="attribute">config:type</span>=<span class="value">"list"</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">interface</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="title">bootproto</span>&gt;</span>dhcp<span class="tag">&lt;/<span class="title">bootproto</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="title">device</span>&gt;</span>eth0<span class="tag">&lt;/<span class="title">device</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="title">prefixlen</span>&gt;</span>16<span class="tag">&lt;/<span class="title">prefixlen</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="title">startmode</span>&gt;</span>onboot<span class="tag">&lt;/<span class="title">startmode</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="title">usercontrol</span>&gt;</span>no<span class="tag">&lt;/<span class="title">usercontrol</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="title">interface</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">interface</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="title">bootproto</span>&gt;</span>dhcp<span class="tag">&lt;/<span class="title">bootproto</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="title">device</span>&gt;</span>eth1<span class="tag">&lt;/<span class="title">device</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="title">prefixlen</span>&gt;</span>16<span class="tag">&lt;/<span class="title">prefixlen</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="title">startmode</span>&gt;</span>onboot<span class="tag">&lt;/<span class="title">startmode</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="title">usercontrol</span>&gt;</span>no<span class="tag">&lt;/<span class="title">usercontrol</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="title">interface</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="title">interfaces</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">managed</span> <span class="attribute">config:type</span>=<span class="value">"boolean"</span>&gt;</span>false<span class="tag">&lt;/<span class="title">managed</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">routing</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">ip_forward</span> <span class="attribute">config:type</span>=<span class="value">"boolean"</span>&gt;</span>false<span class="tag">&lt;/<span class="title">ip_forward</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="title">routing</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="title">networking</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="title">nis</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">netconfig_policy</span>&gt;</span>auto<span class="tag">&lt;/<span class="title">netconfig_policy</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">nis_broadcast</span> <span class="attribute">config:type</span>=<span class="value">"boolean"</span>&gt;</span>false<span class="tag">&lt;/<span class="title">nis_broadcast</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">nis_broken_server</span> <span class="attribute">config:type</span>=<span class="value">"boolean"</span>&gt;</span>false<span class="tag">&lt;/<span class="title">nis_broken_server</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">nis_local_only</span> <span class="attribute">config:type</span>=<span class="value">"boolean"</span>&gt;</span>false<span class="tag">&lt;/<span class="title">nis_local_only</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">start_autofs</span> <span class="attribute">config:type</span>=<span class="value">"boolean"</span>&gt;</span>false<span class="tag">&lt;/<span class="title">start_autofs</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">start_nis</span> <span class="attribute">config:type</span>=<span class="value">"boolean"</span>&gt;</span>false<span class="tag">&lt;/<span class="title">start_nis</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="title">nis</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="title">ntp-client</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">ntp_policy</span>&gt;</span>auto<span class="tag">&lt;/<span class="title">ntp_policy</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">peers</span> <span class="attribute">config:type</span>=<span class="value">"list"</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">peer</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="title">address</span>&gt;</span>127.127.1.0<span class="tag">&lt;/<span class="title">address</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="title">comment</span>&gt;</span>################################################################################</span><br><span class="line">## /etc/ntp.conf</span><br><span class="line">##</span><br><span class="line">## Sample NTP configuration file.</span><br><span class="line">## See package 'ntp-doc' for documentation, Mini-HOWTO and FAQ.</span><br><span class="line">## Copyright (c) 1998 S.u.S.E. GmbH Fuerth, Germany.</span><br><span class="line">##</span><br><span class="line">## Author: Michael Andres,  &amp;lt;ma@suse.de&amp;gt;</span><br><span class="line">##         Michael Skibbe,  &amp;lt;mskibbe@suse.de&amp;gt;</span><br><span class="line">##</span><br><span class="line">################################################################################</span><br><span class="line"></span><br><span class="line">##</span><br><span class="line">## Radio and modem clocks by convention have addresses in the </span><br><span class="line">## form 127.127.t.u, where t is the clock type and u is a unit </span><br><span class="line">## number in the range 0-3. </span><br><span class="line">##</span><br><span class="line">## Most of these clocks require support in the form of a </span><br><span class="line">## serial port or special bus peripheral. The particular  </span><br><span class="line">## device is normally specified by adding a soft link </span><br><span class="line">## /dev/device-u to the particular hardware device involved, </span><br><span class="line">## where u correspond to the unit number above. </span><br><span class="line">## </span><br><span class="line">## Generic DCF77 clock on serial port (Conrad DCF77)</span><br><span class="line">## Address:     127.127.8.u</span><br><span class="line">## Serial Port: /dev/refclock-u</span><br><span class="line">##  </span><br><span class="line">## (create soft link /dev/refclock-0 to the particular ttyS?)</span><br><span class="line">##</span><br><span class="line"># server 127.127.8.0 mode 5 prefer</span><br><span class="line"></span><br><span class="line">##</span><br><span class="line">## Undisciplined Local Clock. This is a fake driver intended for backup</span><br><span class="line">## and when no outside source of synchronized time is available.</span><br><span class="line">##</span><br><span class="line"><span class="tag">&lt;/<span class="title">comment</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="title">fudge_comment</span>&gt;</span># local clock (LCL)</span><br><span class="line"><span class="tag">&lt;/<span class="title">fudge_comment</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="title">fudge_options</span>&gt;</span> stratum 10<span class="tag">&lt;/<span class="title">fudge_options</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="title">type</span>&gt;</span>__clock<span class="tag">&lt;/<span class="title">type</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="title">peer</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">peer</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="title">address</span>&gt;</span>/var/lib/ntp/drift/ntp.drift <span class="tag">&lt;/<span class="title">address</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="title">comment</span>&gt;</span># LCL is unsynchronized</span><br><span class="line"></span><br><span class="line">##</span><br><span class="line">## Add external Servers using</span><br><span class="line">## # rcntp addserver &amp;lt;yourserver&amp;gt;</span><br><span class="line">## </span><br><span class="line"></span><br><span class="line">##</span><br><span class="line">## Miscellaneous stuff</span><br><span class="line">##</span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="title">comment</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="title">type</span>&gt;</span>driftfile<span class="tag">&lt;/<span class="title">type</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="title">peer</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">peer</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="title">address</span>&gt;</span>/var/log/ntp <span class="tag">&lt;/<span class="title">address</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="title">comment</span>&gt;</span># path for drift file</span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="title">comment</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="title">type</span>&gt;</span>logfile<span class="tag">&lt;/<span class="title">type</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="title">peer</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">peer</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="title">address</span>&gt;</span>/etc/ntp.keys <span class="tag">&lt;/<span class="title">address</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="title">comment</span>&gt;</span># alternate log file</span><br><span class="line"># logconfig =syncstatus + sysevents</span><br><span class="line"># logconfig =all</span><br><span class="line"></span><br><span class="line"># statsdir /tmp/ # directory for statistics files</span><br><span class="line"># filegen peerstats  file peerstats  type day enable</span><br><span class="line"># filegen loopstats  file loopstats  type day enable</span><br><span class="line"># filegen clockstats file clockstats type day enable</span><br><span class="line"></span><br><span class="line">#</span><br><span class="line"># Authentication stuff</span><br><span class="line">#</span><br><span class="line"><span class="tag">&lt;/<span class="title">comment</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="title">type</span>&gt;</span>keys<span class="tag">&lt;/<span class="title">type</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="title">peer</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">peer</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="title">address</span>&gt;</span>1 <span class="tag">&lt;/<span class="title">address</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="title">comment</span>&gt;</span># path for keys file</span><br><span class="line"><span class="tag">&lt;/<span class="title">comment</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="title">type</span>&gt;</span>trustedkey<span class="tag">&lt;/<span class="title">type</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="title">peer</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">peer</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="title">address</span>&gt;</span>1 <span class="tag">&lt;/<span class="title">address</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="title">comment</span>&gt;</span># define trusted keys</span><br><span class="line"><span class="tag">&lt;/<span class="title">comment</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="title">type</span>&gt;</span>requestkey<span class="tag">&lt;/<span class="title">type</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="title">peer</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="title">peers</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">start_at_boot</span> <span class="attribute">config:type</span>=<span class="value">"boolean"</span>&gt;</span>false<span class="tag">&lt;/<span class="title">start_at_boot</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">start_in_chroot</span> <span class="attribute">config:type</span>=<span class="value">"boolean"</span>&gt;</span>true<span class="tag">&lt;/<span class="title">start_in_chroot</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="title">ntp-client</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="title">partitioning</span> <span class="attribute">config:type</span>=<span class="value">"list"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">drive</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">device</span>&gt;</span>/dev/sda<span class="tag">&lt;/<span class="title">device</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">initialize</span> <span class="attribute">config:type</span>=<span class="value">"boolean"</span>&gt;</span>true<span class="tag">&lt;/<span class="title">initialize</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">partitions</span> <span class="attribute">config:type</span>=<span class="value">"list"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="title">partition</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="title">create</span> <span class="attribute">config:type</span>=<span class="value">"boolean"</span>&gt;</span>true<span class="tag">&lt;/<span class="title">create</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="title">crypt_fs</span> <span class="attribute">config:type</span>=<span class="value">"boolean"</span>&gt;</span>false<span class="tag">&lt;/<span class="title">crypt_fs</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="title">filesystem</span> <span class="attribute">config:type</span>=<span class="value">"symbol"</span>&gt;</span>swap<span class="tag">&lt;/<span class="title">filesystem</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="title">filesystem_id</span> <span class="attribute">config:type</span>=<span class="value">"integer"</span>&gt;</span>130<span class="tag">&lt;/<span class="title">filesystem_id</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="title">format</span> <span class="attribute">config:type</span>=<span class="value">"boolean"</span>&gt;</span>true<span class="tag">&lt;/<span class="title">format</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="title">fstopt</span>&gt;</span>defaults<span class="tag">&lt;/<span class="title">fstopt</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="title">loop_fs</span> <span class="attribute">config:type</span>=<span class="value">"boolean"</span>&gt;</span>false<span class="tag">&lt;/<span class="title">loop_fs</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="title">mount</span>&gt;</span>swap<span class="tag">&lt;/<span class="title">mount</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="title">mountby</span> <span class="attribute">config:type</span>=<span class="value">"symbol"</span>&gt;</span>device<span class="tag">&lt;/<span class="title">mountby</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="title">partition_id</span> <span class="attribute">config:type</span>=<span class="value">"integer"</span>&gt;</span>130<span class="tag">&lt;/<span class="title">partition_id</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="title">partition_nr</span> <span class="attribute">config:type</span>=<span class="value">"integer"</span>&gt;</span>1<span class="tag">&lt;/<span class="title">partition_nr</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="title">resize</span> <span class="attribute">config:type</span>=<span class="value">"boolean"</span>&gt;</span>false<span class="tag">&lt;/<span class="title">resize</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="title">size</span>&gt;</span>32G<span class="tag">&lt;/<span class="title">size</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="title">partition</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="title">partition</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="title">create</span> <span class="attribute">config:type</span>=<span class="value">"boolean"</span>&gt;</span>true<span class="tag">&lt;/<span class="title">create</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="title">crypt_fs</span> <span class="attribute">config:type</span>=<span class="value">"boolean"</span>&gt;</span>false<span class="tag">&lt;/<span class="title">crypt_fs</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="title">filesystem</span> <span class="attribute">config:type</span>=<span class="value">"symbol"</span>&gt;</span>ext3<span class="tag">&lt;/<span class="title">filesystem</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="title">filesystem_id</span> <span class="attribute">config:type</span>=<span class="value">"integer"</span>&gt;</span>131<span class="tag">&lt;/<span class="title">filesystem_id</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="title">format</span> <span class="attribute">config:type</span>=<span class="value">"boolean"</span>&gt;</span>true<span class="tag">&lt;/<span class="title">format</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="title">fstopt</span>&gt;</span>acl,user_xattr<span class="tag">&lt;/<span class="title">fstopt</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="title">loop_fs</span> <span class="attribute">config:type</span>=<span class="value">"boolean"</span>&gt;</span>false<span class="tag">&lt;/<span class="title">loop_fs</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="title">mount</span>&gt;</span>/boot<span class="tag">&lt;/<span class="title">mount</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="title">mountby</span> <span class="attribute">config:type</span>=<span class="value">"symbol"</span>&gt;</span>device<span class="tag">&lt;/<span class="title">mountby</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="title">partition_id</span> <span class="attribute">config:type</span>=<span class="value">"integer"</span>&gt;</span>131<span class="tag">&lt;/<span class="title">partition_id</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="title">partition_nr</span> <span class="attribute">config:type</span>=<span class="value">"integer"</span>&gt;</span>2<span class="tag">&lt;/<span class="title">partition_nr</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="title">resize</span> <span class="attribute">config:type</span>=<span class="value">"boolean"</span>&gt;</span>false<span class="tag">&lt;/<span class="title">resize</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="title">size</span>&gt;</span>120M<span class="tag">&lt;/<span class="title">size</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="title">partition</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="title">partition</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="title">create</span> <span class="attribute">config:type</span>=<span class="value">"boolean"</span>&gt;</span>true<span class="tag">&lt;/<span class="title">create</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="title">crypt_fs</span> <span class="attribute">config:type</span>=<span class="value">"boolean"</span>&gt;</span>false<span class="tag">&lt;/<span class="title">crypt_fs</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="title">filesystem</span> <span class="attribute">config:type</span>=<span class="value">"symbol"</span>&gt;</span>ext3<span class="tag">&lt;/<span class="title">filesystem</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="title">filesystem_id</span> <span class="attribute">config:type</span>=<span class="value">"integer"</span>&gt;</span>142<span class="tag">&lt;/<span class="title">filesystem_id</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="title">format</span> <span class="attribute">config:type</span>=<span class="value">"boolean"</span>&gt;</span>false<span class="tag">&lt;/<span class="title">format</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="title">loop_fs</span> <span class="attribute">config:type</span>=<span class="value">"boolean"</span>&gt;</span>false<span class="tag">&lt;/<span class="title">loop_fs</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="title">lvm_group</span>&gt;</span>system<span class="tag">&lt;/<span class="title">lvm_group</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="title">mountby</span> <span class="attribute">config:type</span>=<span class="value">"symbol"</span>&gt;</span>device<span class="tag">&lt;/<span class="title">mountby</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="title">partition_id</span> <span class="attribute">config:type</span>=<span class="value">"integer"</span>&gt;</span>142<span class="tag">&lt;/<span class="title">partition_id</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="title">partition_nr</span> <span class="attribute">config:type</span>=<span class="value">"integer"</span>&gt;</span>3<span class="tag">&lt;/<span class="title">partition_nr</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="title">resize</span> <span class="attribute">config:type</span>=<span class="value">"boolean"</span>&gt;</span>false<span class="tag">&lt;/<span class="title">resize</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="title">size</span>&gt;</span>max<span class="tag">&lt;/<span class="title">size</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="title">partition</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="title">partitions</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">type</span> <span class="attribute">config:type</span>=<span class="value">"symbol"</span>&gt;</span>CT_DISK<span class="tag">&lt;/<span class="title">type</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">use</span>&gt;</span>all<span class="tag">&lt;/<span class="title">use</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="title">drive</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">drive</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">device</span>&gt;</span>/dev/system<span class="tag">&lt;/<span class="title">device</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">initialize</span> <span class="attribute">config:type</span>=<span class="value">"boolean"</span>&gt;</span>true<span class="tag">&lt;/<span class="title">initialize</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">partitions</span> <span class="attribute">config:type</span>=<span class="value">"list"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="title">partition</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="title">create</span> <span class="attribute">config:type</span>=<span class="value">"boolean"</span>&gt;</span>true<span class="tag">&lt;/<span class="title">create</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="title">crypt_fs</span> <span class="attribute">config:type</span>=<span class="value">"boolean"</span>&gt;</span>false<span class="tag">&lt;/<span class="title">crypt_fs</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="title">filesystem</span> <span class="attribute">config:type</span>=<span class="value">"symbol"</span>&gt;</span>ext3<span class="tag">&lt;/<span class="title">filesystem</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="title">filesystem_id</span> <span class="attribute">config:type</span>=<span class="value">"integer"</span>&gt;</span>131<span class="tag">&lt;/<span class="title">filesystem_id</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="title">format</span> <span class="attribute">config:type</span>=<span class="value">"boolean"</span>&gt;</span>true<span class="tag">&lt;/<span class="title">format</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="title">fstopt</span>&gt;</span>acl,user_xattr<span class="tag">&lt;/<span class="title">fstopt</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="title">loop_fs</span> <span class="attribute">config:type</span>=<span class="value">"boolean"</span>&gt;</span>false<span class="tag">&lt;/<span class="title">loop_fs</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="title">lv_name</span>&gt;</span>home<span class="tag">&lt;/<span class="title">lv_name</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="title">mount</span>&gt;</span>/home<span class="tag">&lt;/<span class="title">mount</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="title">mountby</span> <span class="attribute">config:type</span>=<span class="value">"symbol"</span>&gt;</span>device<span class="tag">&lt;/<span class="title">mountby</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="title">partition_id</span> <span class="attribute">config:type</span>=<span class="value">"integer"</span>&gt;</span>131<span class="tag">&lt;/<span class="title">partition_id</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="title">resize</span> <span class="attribute">config:type</span>=<span class="value">"boolean"</span>&gt;</span>false<span class="tag">&lt;/<span class="title">resize</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="title">size</span>&gt;</span>15G<span class="tag">&lt;/<span class="title">size</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="title">partition</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="title">partition</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="title">create</span> <span class="attribute">config:type</span>=<span class="value">"boolean"</span>&gt;</span>true<span class="tag">&lt;/<span class="title">create</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="title">crypt_fs</span> <span class="attribute">config:type</span>=<span class="value">"boolean"</span>&gt;</span>false<span class="tag">&lt;/<span class="title">crypt_fs</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="title">filesystem</span> <span class="attribute">config:type</span>=<span class="value">"symbol"</span>&gt;</span>ext3<span class="tag">&lt;/<span class="title">filesystem</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="title">filesystem_id</span> <span class="attribute">config:type</span>=<span class="value">"integer"</span>&gt;</span>131<span class="tag">&lt;/<span class="title">filesystem_id</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="title">format</span> <span class="attribute">config:type</span>=<span class="value">"boolean"</span>&gt;</span>true<span class="tag">&lt;/<span class="title">format</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="title">fstopt</span>&gt;</span>acl,user_xattr<span class="tag">&lt;/<span class="title">fstopt</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="title">loop_fs</span> <span class="attribute">config:type</span>=<span class="value">"boolean"</span>&gt;</span>false<span class="tag">&lt;/<span class="title">loop_fs</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="title">lv_name</span>&gt;</span>opt<span class="tag">&lt;/<span class="title">lv_name</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="title">mount</span>&gt;</span>/opt<span class="tag">&lt;/<span class="title">mount</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="title">mountby</span> <span class="attribute">config:type</span>=<span class="value">"symbol"</span>&gt;</span>device<span class="tag">&lt;/<span class="title">mountby</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="title">partition_id</span> <span class="attribute">config:type</span>=<span class="value">"integer"</span>&gt;</span>131<span class="tag">&lt;/<span class="title">partition_id</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="title">resize</span> <span class="attribute">config:type</span>=<span class="value">"boolean"</span>&gt;</span>false<span class="tag">&lt;/<span class="title">resize</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="title">size</span>&gt;</span>10G<span class="tag">&lt;/<span class="title">size</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="title">partition</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="title">partition</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="title">create</span> <span class="attribute">config:type</span>=<span class="value">"boolean"</span>&gt;</span>true<span class="tag">&lt;/<span class="title">create</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="title">crypt_fs</span> <span class="attribute">config:type</span>=<span class="value">"boolean"</span>&gt;</span>false<span class="tag">&lt;/<span class="title">crypt_fs</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="title">filesystem</span> <span class="attribute">config:type</span>=<span class="value">"symbol"</span>&gt;</span>ext3<span class="tag">&lt;/<span class="title">filesystem</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="title">filesystem_id</span> <span class="attribute">config:type</span>=<span class="value">"integer"</span>&gt;</span>131<span class="tag">&lt;/<span class="title">filesystem_id</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="title">format</span> <span class="attribute">config:type</span>=<span class="value">"boolean"</span>&gt;</span>true<span class="tag">&lt;/<span class="title">format</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="title">fstopt</span>&gt;</span>acl,user_xattr<span class="tag">&lt;/<span class="title">fstopt</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="title">loop_fs</span> <span class="attribute">config:type</span>=<span class="value">"boolean"</span>&gt;</span>false<span class="tag">&lt;/<span class="title">loop_fs</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="title">lv_name</span>&gt;</span>root<span class="tag">&lt;/<span class="title">lv_name</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="title">mount</span>&gt;</span>/<span class="tag">&lt;/<span class="title">mount</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="title">mountby</span> <span class="attribute">config:type</span>=<span class="value">"symbol"</span>&gt;</span>device<span class="tag">&lt;/<span class="title">mountby</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="title">partition_id</span> <span class="attribute">config:type</span>=<span class="value">"integer"</span>&gt;</span>131<span class="tag">&lt;/<span class="title">partition_id</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="title">resize</span> <span class="attribute">config:type</span>=<span class="value">"boolean"</span>&gt;</span>false<span class="tag">&lt;/<span class="title">resize</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="title">size</span>&gt;</span>5G<span class="tag">&lt;/<span class="title">size</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="title">partition</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="title">partition</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="title">create</span> <span class="attribute">config:type</span>=<span class="value">"boolean"</span>&gt;</span>true<span class="tag">&lt;/<span class="title">create</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="title">crypt_fs</span> <span class="attribute">config:type</span>=<span class="value">"boolean"</span>&gt;</span>false<span class="tag">&lt;/<span class="title">crypt_fs</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="title">filesystem</span> <span class="attribute">config:type</span>=<span class="value">"symbol"</span>&gt;</span>ext3<span class="tag">&lt;/<span class="title">filesystem</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="title">filesystem_id</span> <span class="attribute">config:type</span>=<span class="value">"integer"</span>&gt;</span>131<span class="tag">&lt;/<span class="title">filesystem_id</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="title">format</span> <span class="attribute">config:type</span>=<span class="value">"boolean"</span>&gt;</span>true<span class="tag">&lt;/<span class="title">format</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="title">fstopt</span>&gt;</span>acl,user_xattr<span class="tag">&lt;/<span class="title">fstopt</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="title">loop_fs</span> <span class="attribute">config:type</span>=<span class="value">"boolean"</span>&gt;</span>false<span class="tag">&lt;/<span class="title">loop_fs</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="title">lv_name</span>&gt;</span>tmp<span class="tag">&lt;/<span class="title">lv_name</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="title">mount</span>&gt;</span>/tmp<span class="tag">&lt;/<span class="title">mount</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="title">mountby</span> <span class="attribute">config:type</span>=<span class="value">"symbol"</span>&gt;</span>device<span class="tag">&lt;/<span class="title">mountby</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="title">partition_id</span> <span class="attribute">config:type</span>=<span class="value">"integer"</span>&gt;</span>131<span class="tag">&lt;/<span class="title">partition_id</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="title">resize</span> <span class="attribute">config:type</span>=<span class="value">"boolean"</span>&gt;</span>false<span class="tag">&lt;/<span class="title">resize</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="title">size</span>&gt;</span>10G<span class="tag">&lt;/<span class="title">size</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="title">partition</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="title">partition</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="title">create</span> <span class="attribute">config:type</span>=<span class="value">"boolean"</span>&gt;</span>true<span class="tag">&lt;/<span class="title">create</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="title">crypt_fs</span> <span class="attribute">config:type</span>=<span class="value">"boolean"</span>&gt;</span>false<span class="tag">&lt;/<span class="title">crypt_fs</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="title">filesystem</span> <span class="attribute">config:type</span>=<span class="value">"symbol"</span>&gt;</span>ext3<span class="tag">&lt;/<span class="title">filesystem</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="title">filesystem_id</span> <span class="attribute">config:type</span>=<span class="value">"integer"</span>&gt;</span>131<span class="tag">&lt;/<span class="title">filesystem_id</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="title">format</span> <span class="attribute">config:type</span>=<span class="value">"boolean"</span>&gt;</span>true<span class="tag">&lt;/<span class="title">format</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="title">fstopt</span>&gt;</span>acl,user_xattr<span class="tag">&lt;/<span class="title">fstopt</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="title">loop_fs</span> <span class="attribute">config:type</span>=<span class="value">"boolean"</span>&gt;</span>false<span class="tag">&lt;/<span class="title">loop_fs</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="title">lv_name</span>&gt;</span>usr<span class="tag">&lt;/<span class="title">lv_name</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="title">mount</span>&gt;</span>/usr<span class="tag">&lt;/<span class="title">mount</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="title">mountby</span> <span class="attribute">config:type</span>=<span class="value">"symbol"</span>&gt;</span>device<span class="tag">&lt;/<span class="title">mountby</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="title">partition_id</span> <span class="attribute">config:type</span>=<span class="value">"integer"</span>&gt;</span>131<span class="tag">&lt;/<span class="title">partition_id</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="title">resize</span> <span class="attribute">config:type</span>=<span class="value">"boolean"</span>&gt;</span>false<span class="tag">&lt;/<span class="title">resize</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="title">size</span>&gt;</span>10G<span class="tag">&lt;/<span class="title">size</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="title">partition</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="title">partition</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="title">create</span> <span class="attribute">config:type</span>=<span class="value">"boolean"</span>&gt;</span>true<span class="tag">&lt;/<span class="title">create</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="title">crypt_fs</span> <span class="attribute">config:type</span>=<span class="value">"boolean"</span>&gt;</span>false<span class="tag">&lt;/<span class="title">crypt_fs</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="title">filesystem</span> <span class="attribute">config:type</span>=<span class="value">"symbol"</span>&gt;</span>ext3<span class="tag">&lt;/<span class="title">filesystem</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="title">filesystem_id</span> <span class="attribute">config:type</span>=<span class="value">"integer"</span>&gt;</span>131<span class="tag">&lt;/<span class="title">filesystem_id</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="title">format</span> <span class="attribute">config:type</span>=<span class="value">"boolean"</span>&gt;</span>true<span class="tag">&lt;/<span class="title">format</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="title">fstopt</span>&gt;</span>acl,user_xattr<span class="tag">&lt;/<span class="title">fstopt</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="title">loop_fs</span> <span class="attribute">config:type</span>=<span class="value">"boolean"</span>&gt;</span>false<span class="tag">&lt;/<span class="title">loop_fs</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="title">lv_name</span>&gt;</span>var<span class="tag">&lt;/<span class="title">lv_name</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="title">mount</span>&gt;</span>/var<span class="tag">&lt;/<span class="title">mount</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="title">mountby</span> <span class="attribute">config:type</span>=<span class="value">"symbol"</span>&gt;</span>device<span class="tag">&lt;/<span class="title">mountby</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="title">partition_id</span> <span class="attribute">config:type</span>=<span class="value">"integer"</span>&gt;</span>131<span class="tag">&lt;/<span class="title">partition_id</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="title">resize</span> <span class="attribute">config:type</span>=<span class="value">"boolean"</span>&gt;</span>false<span class="tag">&lt;/<span class="title">resize</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="title">size</span>&gt;</span>5G<span class="tag">&lt;/<span class="title">size</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="title">partition</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="title">partitions</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">pesize</span>&gt;</span>4M<span class="tag">&lt;/<span class="title">pesize</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">type</span> <span class="attribute">config:type</span>=<span class="value">"symbol"</span>&gt;</span>CT_LVM<span class="tag">&lt;/<span class="title">type</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">use</span>&gt;</span>all<span class="tag">&lt;/<span class="title">use</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="title">drive</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="title">partitioning</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="title">printer</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">server_settings</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">BrowseAllow</span> <span class="attribute">config:type</span>=<span class="value">"list"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="title">listentry</span>&gt;</span>all<span class="tag">&lt;/<span class="title">listentry</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="title">BrowseAllow</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">BrowseOrder</span> <span class="attribute">config:type</span>=<span class="value">"list"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="title">listentry</span>&gt;</span>allow,deny<span class="tag">&lt;/<span class="title">listentry</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="title">BrowseOrder</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">Browsing</span> <span class="attribute">config:type</span>=<span class="value">"list"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="title">listentry</span>&gt;</span>On<span class="tag">&lt;/<span class="title">listentry</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="title">Browsing</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">DefaultAuthType</span> <span class="attribute">config:type</span>=<span class="value">"list"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="title">listentry</span>&gt;</span>Basic<span class="tag">&lt;/<span class="title">listentry</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="title">DefaultAuthType</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">DefaultPolicy</span> <span class="attribute">config:type</span>=<span class="value">"list"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="title">listentry</span>&gt;</span>default<span class="tag">&lt;/<span class="title">listentry</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="title">DefaultPolicy</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">Listen</span> <span class="attribute">config:type</span>=<span class="value">"list"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="title">listentry</span>&gt;</span>localhost:631<span class="tag">&lt;/<span class="title">listentry</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="title">listentry</span>&gt;</span>/var/run/cups/cups.sock<span class="tag">&lt;/<span class="title">listentry</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="title">Listen</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">LogLevel</span> <span class="attribute">config:type</span>=<span class="value">"list"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="title">listentry</span>&gt;</span>info<span class="tag">&lt;/<span class="title">listentry</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="title">LogLevel</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">SystemGroup</span> <span class="attribute">config:type</span>=<span class="value">"list"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="title">listentry</span>&gt;</span>sys root<span class="tag">&lt;/<span class="title">listentry</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="title">SystemGroup</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">sections</span> <span class="attribute">config:type</span>=<span class="value">"list"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="title">section</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="title">Allow</span> <span class="attribute">config:type</span>=<span class="value">"list"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="title">listentry</span>&gt;</span>127.0.0.2<span class="tag">&lt;/<span class="title">listentry</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;/<span class="title">Allow</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="title">Key</span>&gt;</span>Location<span class="tag">&lt;/<span class="title">Key</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="title">Order</span> <span class="attribute">config:type</span>=<span class="value">"list"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="title">listentry</span>&gt;</span>allow,deny<span class="tag">&lt;/<span class="title">listentry</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;/<span class="title">Order</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="title">Value</span>&gt;</span>/<span class="tag">&lt;/<span class="title">Value</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="title">section</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="title">section</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="title">Encryption</span> <span class="attribute">config:type</span>=<span class="value">"list"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="title">listentry</span>&gt;</span>Required<span class="tag">&lt;/<span class="title">listentry</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;/<span class="title">Encryption</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="title">Key</span>&gt;</span>Location<span class="tag">&lt;/<span class="title">Key</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="title">Order</span> <span class="attribute">config:type</span>=<span class="value">"list"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="title">listentry</span>&gt;</span>allow,deny<span class="tag">&lt;/<span class="title">listentry</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;/<span class="title">Order</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="title">Value</span>&gt;</span>/admin<span class="tag">&lt;/<span class="title">Value</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="title">section</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="title">section</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="title">AuthType</span> <span class="attribute">config:type</span>=<span class="value">"list"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="title">listentry</span>&gt;</span>Default<span class="tag">&lt;/<span class="title">listentry</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;/<span class="title">AuthType</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="title">Key</span>&gt;</span>Location<span class="tag">&lt;/<span class="title">Key</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="title">Order</span> <span class="attribute">config:type</span>=<span class="value">"list"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="title">listentry</span>&gt;</span>allow,deny<span class="tag">&lt;/<span class="title">listentry</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;/<span class="title">Order</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="title">Require</span> <span class="attribute">config:type</span>=<span class="value">"list"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="title">listentry</span>&gt;</span>user @SYSTEM<span class="tag">&lt;/<span class="title">listentry</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;/<span class="title">Require</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="title">Value</span>&gt;</span>/admin/conf<span class="tag">&lt;/<span class="title">Value</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="title">section</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="title">section</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="title">Key</span>&gt;</span>Policy<span class="tag">&lt;/<span class="title">Key</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="title">Value</span>&gt;</span>default<span class="tag">&lt;/<span class="title">Value</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="title">sections</span> <span class="attribute">config:type</span>=<span class="value">"list"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="title">section</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;<span class="title">Key</span>&gt;</span>Limit<span class="tag">&lt;/<span class="title">Key</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;<span class="title">Order</span> <span class="attribute">config:type</span>=<span class="value">"list"</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="title">listentry</span>&gt;</span>deny,allow<span class="tag">&lt;/<span class="title">listentry</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;/<span class="title">Order</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;<span class="title">Require</span> <span class="attribute">config:type</span>=<span class="value">"list"</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="title">listentry</span>&gt;</span>user @OWNER @SYSTEM<span class="tag">&lt;/<span class="title">listentry</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;/<span class="title">Require</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;<span class="title">Value</span>&gt;</span>Send-Document Send-URI Hold-Job Release-Job Restart-Job Purge-Jobs Set-Job-Attributes Create-Job-Subscription Renew-Subscription Cancel-Subscription Get-Notifications Reprocess-Job Cancel-Current-Job Suspend-Current-Job Resume-Job CUPS-Move-Job<span class="tag">&lt;/<span class="title">Value</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="title">section</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="title">section</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;<span class="title">AuthType</span> <span class="attribute">config:type</span>=<span class="value">"list"</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="title">listentry</span>&gt;</span>Default<span class="tag">&lt;/<span class="title">listentry</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;/<span class="title">AuthType</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;<span class="title">Key</span>&gt;</span>Limit<span class="tag">&lt;/<span class="title">Key</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;<span class="title">Order</span> <span class="attribute">config:type</span>=<span class="value">"list"</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="title">listentry</span>&gt;</span>deny,allow<span class="tag">&lt;/<span class="title">listentry</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;/<span class="title">Order</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;<span class="title">Require</span> <span class="attribute">config:type</span>=<span class="value">"list"</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="title">listentry</span>&gt;</span>user @SYSTEM<span class="tag">&lt;/<span class="title">listentry</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;/<span class="title">Require</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;<span class="title">Value</span>&gt;</span>CUPS-Add-Modify-Printer CUPS-Delete-Printer CUPS-Add-Modify-Class CUPS-Delete-Class CUPS-Set-Default<span class="tag">&lt;/<span class="title">Value</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="title">section</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="title">section</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;<span class="title">AuthType</span> <span class="attribute">config:type</span>=<span class="value">"list"</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="title">listentry</span>&gt;</span>Default<span class="tag">&lt;/<span class="title">listentry</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;/<span class="title">AuthType</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;<span class="title">Key</span>&gt;</span>Limit<span class="tag">&lt;/<span class="title">Key</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;<span class="title">Order</span> <span class="attribute">config:type</span>=<span class="value">"list"</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="title">listentry</span>&gt;</span>deny,allow<span class="tag">&lt;/<span class="title">listentry</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;/<span class="title">Order</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;<span class="title">Require</span> <span class="attribute">config:type</span>=<span class="value">"list"</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="title">listentry</span>&gt;</span>user @SYSTEM<span class="tag">&lt;/<span class="title">listentry</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;/<span class="title">Require</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;<span class="title">Value</span>&gt;</span>Pause-Printer Resume-Printer Enable-Printer Disable-Printer Pause-Printer-After-Current-Job Hold-New-Jobs Release-Held-New-Jobs Deactivate-Printer Activate-Printer Restart-Printer Shutdown-Printer Startup-Printer Promote-Job Schedule-Job-After CUPS-Accept-Jobs CUPS-Reject-Jobs<span class="tag">&lt;/<span class="title">Value</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="title">section</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="title">section</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;<span class="title">Key</span>&gt;</span>Limit<span class="tag">&lt;/<span class="title">Key</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;<span class="title">Order</span> <span class="attribute">config:type</span>=<span class="value">"list"</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="title">listentry</span>&gt;</span>deny,allow<span class="tag">&lt;/<span class="title">listentry</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;/<span class="title">Order</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;<span class="title">Require</span> <span class="attribute">config:type</span>=<span class="value">"list"</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="title">listentry</span>&gt;</span>user @OWNER @SYSTEM<span class="tag">&lt;/<span class="title">listentry</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;/<span class="title">Require</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;<span class="title">Value</span>&gt;</span>Cancel-Job CUPS-Authenticate-Job<span class="tag">&lt;/<span class="title">Value</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="title">section</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="title">section</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;<span class="title">Key</span>&gt;</span>Limit<span class="tag">&lt;/<span class="title">Key</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;<span class="title">Order</span> <span class="attribute">config:type</span>=<span class="value">"list"</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="title">listentry</span>&gt;</span>deny,allow<span class="tag">&lt;/<span class="title">listentry</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;/<span class="title">Order</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;<span class="title">Value</span>&gt;</span>All<span class="tag">&lt;/<span class="title">Value</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="title">section</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;/<span class="title">sections</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="title">section</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="title">section</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="title">Key</span>&gt;</span>Policy<span class="tag">&lt;/<span class="title">Key</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="title">Value</span>&gt;</span>easy<span class="tag">&lt;/<span class="title">Value</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="title">sections</span> <span class="attribute">config:type</span>=<span class="value">"list"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="title">section</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;<span class="title">Key</span>&gt;</span>Limit<span class="tag">&lt;/<span class="title">Key</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;<span class="title">Order</span> <span class="attribute">config:type</span>=<span class="value">"list"</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="title">listentry</span>&gt;</span>allow,deny<span class="tag">&lt;/<span class="title">listentry</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;/<span class="title">Order</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;<span class="title">Satisfy</span> <span class="attribute">config:type</span>=<span class="value">"list"</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="title">listentry</span>&gt;</span>any<span class="tag">&lt;/<span class="title">listentry</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;/<span class="title">Satisfy</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;<span class="title">Value</span>&gt;</span>All<span class="tag">&lt;/<span class="title">Value</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="title">section</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;/<span class="title">sections</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="title">section</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="title">section</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="title">Key</span>&gt;</span>Policy<span class="tag">&lt;/<span class="title">Key</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="title">Value</span>&gt;</span>paranoid<span class="tag">&lt;/<span class="title">Value</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="title">sections</span> <span class="attribute">config:type</span>=<span class="value">"list"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="title">section</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;<span class="title">Allow</span> <span class="attribute">config:type</span>=<span class="value">"list"</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="title">listentry</span>&gt;</span>from 127.0.0.0/8<span class="tag">&lt;/<span class="title">listentry</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;/<span class="title">Allow</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;<span class="title">Key</span>&gt;</span>Limit<span class="tag">&lt;/<span class="title">Key</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;<span class="title">Order</span> <span class="attribute">config:type</span>=<span class="value">"list"</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="title">listentry</span>&gt;</span>deny,allow<span class="tag">&lt;/<span class="title">listentry</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;/<span class="title">Order</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;<span class="title">Require</span> <span class="attribute">config:type</span>=<span class="value">"list"</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="title">listentry</span>&gt;</span>user @OWNER<span class="tag">&lt;/<span class="title">listentry</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;/<span class="title">Require</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;<span class="title">Value</span>&gt;</span>Send-Document Send-URI Hold-Job Release-Job Restart-Job Purge-Jobs Set-Job-Attributes Create-Job-Subscription Renew-Subscription Cancel-Subscription Get-Notifications Reprocess-Job Cancel-Current-Job Suspend-Current-Job Resume-Job CUPS-Move-Job<span class="tag">&lt;/<span class="title">Value</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="title">section</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="title">section</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;<span class="title">Allow</span> <span class="attribute">config:type</span>=<span class="value">"list"</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="title">listentry</span>&gt;</span>from 127.0.0.0/8<span class="tag">&lt;/<span class="title">listentry</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;/<span class="title">Allow</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;<span class="title">AuthType</span> <span class="attribute">config:type</span>=<span class="value">"list"</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="title">listentry</span>&gt;</span>Default<span class="tag">&lt;/<span class="title">listentry</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;/<span class="title">AuthType</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;<span class="title">Key</span>&gt;</span>Limit<span class="tag">&lt;/<span class="title">Key</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;<span class="title">Order</span> <span class="attribute">config:type</span>=<span class="value">"list"</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="title">listentry</span>&gt;</span>deny,allow<span class="tag">&lt;/<span class="title">listentry</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;/<span class="title">Order</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;<span class="title">Require</span> <span class="attribute">config:type</span>=<span class="value">"list"</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="title">listentry</span>&gt;</span>user @SYSTEM<span class="tag">&lt;/<span class="title">listentry</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;/<span class="title">Require</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;<span class="title">Value</span>&gt;</span>CUPS-Add-Modify-Printer CUPS-Delete-Printer CUPS-Add-Modify-Class CUPS-Delete-Class CUPS-Set-Default<span class="tag">&lt;/<span class="title">Value</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="title">section</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="title">section</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;<span class="title">Allow</span> <span class="attribute">config:type</span>=<span class="value">"list"</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="title">listentry</span>&gt;</span>from 127.0.0.0/8<span class="tag">&lt;/<span class="title">listentry</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;/<span class="title">Allow</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;<span class="title">AuthType</span> <span class="attribute">config:type</span>=<span class="value">"list"</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="title">listentry</span>&gt;</span>Default<span class="tag">&lt;/<span class="title">listentry</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;/<span class="title">AuthType</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;<span class="title">Key</span>&gt;</span>Limit<span class="tag">&lt;/<span class="title">Key</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;<span class="title">Order</span> <span class="attribute">config:type</span>=<span class="value">"list"</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="title">listentry</span>&gt;</span>deny,allow<span class="tag">&lt;/<span class="title">listentry</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;/<span class="title">Order</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;<span class="title">Require</span> <span class="attribute">config:type</span>=<span class="value">"list"</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="title">listentry</span>&gt;</span>user @SYSTEM<span class="tag">&lt;/<span class="title">listentry</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;/<span class="title">Require</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;<span class="title">Value</span>&gt;</span>Pause-Printer Resume-Printer Enable-Printer Disable-Printer Pause-Printer-After-Current-Job Hold-New-Jobs Release-Held-New-Jobs Deactivate-Printer Activate-Printer Restart-Printer Shutdown-Printer Startup-Printer Promote-Job Schedule-Job-After CUPS-Accept-Jobs CUPS-Reject-Jobs<span class="tag">&lt;/<span class="title">Value</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="title">section</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="title">section</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;<span class="title">Allow</span> <span class="attribute">config:type</span>=<span class="value">"list"</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="title">listentry</span>&gt;</span>from 127.0.0.0/8<span class="tag">&lt;/<span class="title">listentry</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;/<span class="title">Allow</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;<span class="title">Key</span>&gt;</span>Limit<span class="tag">&lt;/<span class="title">Key</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;<span class="title">Order</span> <span class="attribute">config:type</span>=<span class="value">"list"</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="title">listentry</span>&gt;</span>deny,allow<span class="tag">&lt;/<span class="title">listentry</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;/<span class="title">Order</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;<span class="title">Require</span> <span class="attribute">config:type</span>=<span class="value">"list"</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="title">listentry</span>&gt;</span>user @OWNER<span class="tag">&lt;/<span class="title">listentry</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;/<span class="title">Require</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;<span class="title">Value</span>&gt;</span>Cancel-Job CUPS-Authenticate-Job<span class="tag">&lt;/<span class="title">Value</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="title">section</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="title">section</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;<span class="title">Allow</span> <span class="attribute">config:type</span>=<span class="value">"list"</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="title">listentry</span>&gt;</span>from 127.0.0.0/8<span class="tag">&lt;/<span class="title">listentry</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;/<span class="title">Allow</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;<span class="title">Key</span>&gt;</span>Limit<span class="tag">&lt;/<span class="title">Key</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;<span class="title">Order</span> <span class="attribute">config:type</span>=<span class="value">"list"</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="title">listentry</span>&gt;</span>deny,allow<span class="tag">&lt;/<span class="title">listentry</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;/<span class="title">Order</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;<span class="title">Require</span> <span class="attribute">config:type</span>=<span class="value">"list"</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="title">listentry</span>&gt;</span>user @OWNER @SYSTEM<span class="tag">&lt;/<span class="title">listentry</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;/<span class="title">Require</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;<span class="title">Value</span>&gt;</span>All<span class="tag">&lt;/<span class="title">Value</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="title">section</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;/<span class="title">sections</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="title">section</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="title">sections</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="title">server_settings</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="title">printer</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="title">proxy</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">enabled</span> <span class="attribute">config:type</span>=<span class="value">"boolean"</span>&gt;</span>false<span class="tag">&lt;/<span class="title">enabled</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">ftp_proxy</span>&gt;</span><span class="tag">&lt;/<span class="title">ftp_proxy</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">http_proxy</span>&gt;</span><span class="tag">&lt;/<span class="title">http_proxy</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">https_proxy</span>&gt;</span><span class="tag">&lt;/<span class="title">https_proxy</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">no_proxy</span>&gt;</span>localhost, 127.0.0.1<span class="tag">&lt;/<span class="title">no_proxy</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">proxy_password</span>&gt;</span><span class="tag">&lt;/<span class="title">proxy_password</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">proxy_user</span>&gt;</span><span class="tag">&lt;/<span class="title">proxy_user</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="title">proxy</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="title">report</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">errors</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">log</span> <span class="attribute">config:type</span>=<span class="value">"boolean"</span>&gt;</span>true<span class="tag">&lt;/<span class="title">log</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">show</span> <span class="attribute">config:type</span>=<span class="value">"boolean"</span>&gt;</span>true<span class="tag">&lt;/<span class="title">show</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">timeout</span> <span class="attribute">config:type</span>=<span class="value">"integer"</span>&gt;</span>0<span class="tag">&lt;/<span class="title">timeout</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="title">errors</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">messages</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">log</span> <span class="attribute">config:type</span>=<span class="value">"boolean"</span>&gt;</span>true<span class="tag">&lt;/<span class="title">log</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">show</span> <span class="attribute">config:type</span>=<span class="value">"boolean"</span>&gt;</span>true<span class="tag">&lt;/<span class="title">show</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">timeout</span> <span class="attribute">config:type</span>=<span class="value">"integer"</span>&gt;</span>0<span class="tag">&lt;/<span class="title">timeout</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="title">messages</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">warnings</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">log</span> <span class="attribute">config:type</span>=<span class="value">"boolean"</span>&gt;</span>true<span class="tag">&lt;/<span class="title">log</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">show</span> <span class="attribute">config:type</span>=<span class="value">"boolean"</span>&gt;</span>true<span class="tag">&lt;/<span class="title">show</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">timeout</span> <span class="attribute">config:type</span>=<span class="value">"integer"</span>&gt;</span>0<span class="tag">&lt;/<span class="title">timeout</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="title">warnings</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">yesno_messages</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">log</span> <span class="attribute">config:type</span>=<span class="value">"boolean"</span>&gt;</span>true<span class="tag">&lt;/<span class="title">log</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">show</span> <span class="attribute">config:type</span>=<span class="value">"boolean"</span>&gt;</span>true<span class="tag">&lt;/<span class="title">show</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">timeout</span> <span class="attribute">config:type</span>=<span class="value">"integer"</span>&gt;</span>0<span class="tag">&lt;/<span class="title">timeout</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="title">yesno_messages</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="title">report</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="title">runlevel</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">default</span>&gt;</span>5<span class="tag">&lt;/<span class="title">default</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="title">runlevel</span>&gt;</span>  </span><br><span class="line">   <span class="tag">&lt;<span class="title">software</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">packages</span> <span class="attribute">config:type</span>=<span class="value">"list"</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">package</span>&gt;</span>ConsoleKit-32bit<span class="tag">&lt;/<span class="title">package</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">package</span>&gt;</span>Mesa-32bit<span class="tag">&lt;/<span class="title">package</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">package</span>&gt;</span>PolicyKit-32bit<span class="tag">&lt;/<span class="title">package</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">package</span>&gt;</span>PolicyKit-gnome-libs-32bit<span class="tag">&lt;/<span class="title">package</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">package</span>&gt;</span>aspell-32bit<span class="tag">&lt;/<span class="title">package</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">package</span>&gt;</span>at-spi-32bit<span class="tag">&lt;/<span class="title">package</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">package</span>&gt;</span>audiofile-32bit<span class="tag">&lt;/<span class="title">package</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">package</span>&gt;</span>audit-libs-32bit<span class="tag">&lt;/<span class="title">package</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">package</span>&gt;</span>bind-libs-32bit<span class="tag">&lt;/<span class="title">package</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">package</span>&gt;</span>bison-32bit<span class="tag">&lt;/<span class="title">package</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">package</span>&gt;</span>cpufrequtils-32bit<span class="tag">&lt;/<span class="title">package</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">package</span>&gt;</span>cracklib-32bit<span class="tag">&lt;/<span class="title">package</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">package</span>&gt;</span>cryptconfig-32bit<span class="tag">&lt;/<span class="title">package</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">package</span>&gt;</span>cyrus-sasl-32bit<span class="tag">&lt;/<span class="title">package</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">package</span>&gt;</span>cyrus-sasl-gssapi-32bit<span class="tag">&lt;/<span class="title">package</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">package</span>&gt;</span>cyrus-sasl-plain-32bit<span class="tag">&lt;/<span class="title">package</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">package</span>&gt;</span>dbus-1-32bit<span class="tag">&lt;/<span class="title">package</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">package</span>&gt;</span>dbus-1-glib-32bit<span class="tag">&lt;/<span class="title">package</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">package</span>&gt;</span>device-mapper-32bit<span class="tag">&lt;/<span class="title">package</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">package</span>&gt;</span>evolution-data-server-32bit<span class="tag">&lt;/<span class="title">package</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">package</span>&gt;</span>fam-32bit<span class="tag">&lt;/<span class="title">package</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">package</span>&gt;</span>file-32bit<span class="tag">&lt;/<span class="title">package</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">package</span>&gt;</span>flex-32bit<span class="tag">&lt;/<span class="title">package</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">package</span>&gt;</span>freeglut-32bit<span class="tag">&lt;/<span class="title">package</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">package</span>&gt;</span>freetype-32bit<span class="tag">&lt;/<span class="title">package</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">package</span>&gt;</span>fribidi-32bit<span class="tag">&lt;/<span class="title">package</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">package</span>&gt;</span>gcc-32bit<span class="tag">&lt;/<span class="title">package</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">package</span>&gt;</span>gcc43-32bit<span class="tag">&lt;/<span class="title">package</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">package</span>&gt;</span>gconf2-32bit<span class="tag">&lt;/<span class="title">package</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">package</span>&gt;</span>gdbm-devel-32bit<span class="tag">&lt;/<span class="title">package</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">package</span>&gt;</span>gettext-runtime-32bit<span class="tag">&lt;/<span class="title">package</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">package</span>&gt;</span>giflib-32bit<span class="tag">&lt;/<span class="title">package</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">package</span>&gt;</span>glibc-devel-32bit<span class="tag">&lt;/<span class="title">package</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">package</span>&gt;</span>glibc-locale-32bit<span class="tag">&lt;/<span class="title">package</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">package</span>&gt;</span>gnome-keyring-32bit<span class="tag">&lt;/<span class="title">package</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">package</span>&gt;</span>gnome-panel-32bit<span class="tag">&lt;/<span class="title">package</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">package</span>&gt;</span>gnome-vfs2-32bit<span class="tag">&lt;/<span class="title">package</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">package</span>&gt;</span>gpm-32bit<span class="tag">&lt;/<span class="title">package</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">package</span>&gt;</span>hal-32bit<span class="tag">&lt;/<span class="title">package</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">package</span>&gt;</span>hunspell-32bit<span class="tag">&lt;/<span class="title">package</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">package</span>&gt;</span>java-1_6_0-ibm<span class="tag">&lt;/<span class="title">package</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">package</span>&gt;</span>java-1_6_0-ibm-fonts<span class="tag">&lt;/<span class="title">package</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">package</span>&gt;</span>jpackage-utils<span class="tag">&lt;/<span class="title">package</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">package</span>&gt;</span>libFLAC8-32bit<span class="tag">&lt;/<span class="title">package</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">package</span>&gt;</span>libHX13-32bit<span class="tag">&lt;/<span class="title">package</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">package</span>&gt;</span>libacl-32bit<span class="tag">&lt;/<span class="title">package</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">package</span>&gt;</span>libaio-32bit<span class="tag">&lt;/<span class="title">package</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">package</span>&gt;</span>libaio-devel-32bit<span class="tag">&lt;/<span class="title">package</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">package</span>&gt;</span>libart_lgpl-32bit<span class="tag">&lt;/<span class="title">package</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">package</span>&gt;</span>libattr-32bit<span class="tag">&lt;/<span class="title">package</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">package</span>&gt;</span>libavahi-client3-32bit<span class="tag">&lt;/<span class="title">package</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">package</span>&gt;</span>libavahi-common3-32bit<span class="tag">&lt;/<span class="title">package</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">package</span>&gt;</span>libavahi-glib1-32bit<span class="tag">&lt;/<span class="title">package</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">package</span>&gt;</span>libblkid1-32bit<span class="tag">&lt;/<span class="title">package</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">package</span>&gt;</span>libbonobo-32bit<span class="tag">&lt;/<span class="title">package</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">package</span>&gt;</span>libbonoboui-32bit<span class="tag">&lt;/<span class="title">package</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">package</span>&gt;</span>libbz2-1-32bit<span class="tag">&lt;/<span class="title">package</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">package</span>&gt;</span>libcanberra-gtk-32bit<span class="tag">&lt;/<span class="title">package</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">package</span>&gt;</span>libcanberra-gtk0-32bit<span class="tag">&lt;/<span class="title">package</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">package</span>&gt;</span>libcanberra0-32bit<span class="tag">&lt;/<span class="title">package</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">package</span>&gt;</span>libcap2-32bit<span class="tag">&lt;/<span class="title">package</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">package</span>&gt;</span>libcroco-0_6-3-32bit<span class="tag">&lt;/<span class="title">package</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">package</span>&gt;</span>libcurl4-32bit<span class="tag">&lt;/<span class="title">package</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">package</span>&gt;</span>libdnet1<span class="tag">&lt;/<span class="title">package</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">package</span>&gt;</span>libdrm-32bit<span class="tag">&lt;/<span class="title">package</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">package</span>&gt;</span>libesd0-32bit<span class="tag">&lt;/<span class="title">package</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">package</span>&gt;</span>libfreebl3-32bit<span class="tag">&lt;/<span class="title">package</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">package</span>&gt;</span>libgcrypt11-32bit<span class="tag">&lt;/<span class="title">package</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">package</span>&gt;</span>libglade2-32bit<span class="tag">&lt;/<span class="title">package</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">package</span>&gt;</span>libgnome-32bit<span class="tag">&lt;/<span class="title">package</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">package</span>&gt;</span>libgnome-desktop-2-11-32bit<span class="tag">&lt;/<span class="title">package</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">package</span>&gt;</span>libgnomecanvas-32bit<span class="tag">&lt;/<span class="title">package</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">package</span>&gt;</span>libgnutls26-32bit<span class="tag">&lt;/<span class="title">package</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">package</span>&gt;</span>libgomp46-32bit<span class="tag">&lt;/<span class="title">package</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">package</span>&gt;</span>libgpg-error0-32bit<span class="tag">&lt;/<span class="title">package</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">package</span>&gt;</span>libgsf-1-114-32bit<span class="tag">&lt;/<span class="title">package</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">package</span>&gt;</span>libgstreamer-0_10-0-32bit<span class="tag">&lt;/<span class="title">package</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">package</span>&gt;</span>libgthread-2_0-0-32bit<span class="tag">&lt;/<span class="title">package</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">package</span>&gt;</span>libgweather1-32bit<span class="tag">&lt;/<span class="title">package</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">package</span>&gt;</span>libical0-32bit<span class="tag">&lt;/<span class="title">package</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">package</span>&gt;</span>libidl-32bit<span class="tag">&lt;/<span class="title">package</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">package</span>&gt;</span>libidn-32bit<span class="tag">&lt;/<span class="title">package</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">package</span>&gt;</span>liblcms1-32bit<span class="tag">&lt;/<span class="title">package</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">package</span>&gt;</span>libldap-2_4-2-32bit<span class="tag">&lt;/<span class="title">package</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">package</span>&gt;</span>libltdl7-32bit<span class="tag">&lt;/<span class="title">package</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">package</span>&gt;</span>liblua5_1<span class="tag">&lt;/<span class="title">package</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">package</span>&gt;</span>liblzma5-32bit<span class="tag">&lt;/<span class="title">package</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">package</span>&gt;</span>libmng-32bit<span class="tag">&lt;/<span class="title">package</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">package</span>&gt;</span>libncurses6-32bit<span class="tag">&lt;/<span class="title">package</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">package</span>&gt;</span>libnetpbm10-32bit<span class="tag">&lt;/<span class="title">package</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">package</span>&gt;</span>libnscd-32bit<span class="tag">&lt;/<span class="title">package</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">package</span>&gt;</span>libnsssharedhelper0-32bit<span class="tag">&lt;/<span class="title">package</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">package</span>&gt;</span>libogg0-32bit<span class="tag">&lt;/<span class="title">package</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">package</span>&gt;</span>libopenct1-32bit<span class="tag">&lt;/<span class="title">package</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">package</span>&gt;</span>libopensc2-32bit<span class="tag">&lt;/<span class="title">package</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">package</span>&gt;</span>libpciaccess0-32bit<span class="tag">&lt;/<span class="title">package</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">package</span>&gt;</span>libproxy0-32bit<span class="tag">&lt;/<span class="title">package</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">package</span>&gt;</span>libproxy0-config-gnome<span class="tag">&lt;/<span class="title">package</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">package</span>&gt;</span>libproxy0-config-kde4<span class="tag">&lt;/<span class="title">package</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">package</span>&gt;</span>libpulse0-32bit<span class="tag">&lt;/<span class="title">package</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">package</span>&gt;</span>libpython2_6-1_0-32bit<span class="tag">&lt;/<span class="title">package</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">package</span>&gt;</span>libqt4-32bit<span class="tag">&lt;/<span class="title">package</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">package</span>&gt;</span>libqt4-qt3support-32bit<span class="tag">&lt;/<span class="title">package</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">package</span>&gt;</span>libqt4-sql-32bit<span class="tag">&lt;/<span class="title">package</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">package</span>&gt;</span>libqt4-x11-32bit<span class="tag">&lt;/<span class="title">package</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">package</span>&gt;</span>libreiserfs-32bit<span class="tag">&lt;/<span class="title">package</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">package</span>&gt;</span>librsvg-32bit<span class="tag">&lt;/<span class="title">package</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">package</span>&gt;</span>libsepol1-32bit<span class="tag">&lt;/<span class="title">package</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">package</span>&gt;</span>libsmbclient0-32bit<span class="tag">&lt;/<span class="title">package</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">package</span>&gt;</span>libsmbios2-32bit<span class="tag">&lt;/<span class="title">package</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">package</span>&gt;</span>libsndfile-32bit<span class="tag">&lt;/<span class="title">package</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">package</span>&gt;</span>libsoup-2_4-1-32bit<span class="tag">&lt;/<span class="title">package</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">package</span>&gt;</span>libsqlite3-0-32bit<span class="tag">&lt;/<span class="title">package</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">package</span>&gt;</span>libstdc++33-32bit<span class="tag">&lt;/<span class="title">package</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">package</span>&gt;</span>libstdc++43-devel-32bit<span class="tag">&lt;/<span class="title">package</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">package</span>&gt;</span>libtalloc2-32bit<span class="tag">&lt;/<span class="title">package</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">package</span>&gt;</span>libtasn1-3-32bit<span class="tag">&lt;/<span class="title">package</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">package</span>&gt;</span>libtdb1-32bit<span class="tag">&lt;/<span class="title">package</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">package</span>&gt;</span>libtool-32bit<span class="tag">&lt;/<span class="title">package</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">package</span>&gt;</span>libudev0-32bit<span class="tag">&lt;/<span class="title">package</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">package</span>&gt;</span>libvorbis-32bit<span class="tag">&lt;/<span class="title">package</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">package</span>&gt;</span>libwbclient0-32bit<span class="tag">&lt;/<span class="title">package</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">package</span>&gt;</span>libwnck-1-22-32bit<span class="tag">&lt;/<span class="title">package</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">package</span>&gt;</span>libxcrypt-32bit<span class="tag">&lt;/<span class="title">package</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">package</span>&gt;</span>libxml2-32bit<span class="tag">&lt;/<span class="title">package</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">package</span>&gt;</span>libxslt-32bit<span class="tag">&lt;/<span class="title">package</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">package</span>&gt;</span>mozilla-kde4-integration<span class="tag">&lt;/<span class="title">package</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">package</span>&gt;</span>mozilla-nspr-32bit<span class="tag">&lt;/<span class="title">package</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">package</span>&gt;</span>mozilla-nss-32bit<span class="tag">&lt;/<span class="title">package</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">package</span>&gt;</span>mozilla-xulrunner192-32bit<span class="tag">&lt;/<span class="title">package</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">package</span>&gt;</span>nautilus-32bit<span class="tag">&lt;/<span class="title">package</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">package</span>&gt;</span>nautilus-cd-burner-32bit<span class="tag">&lt;/<span class="title">package</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">package</span>&gt;</span>ncurses-devel-32bit<span class="tag">&lt;/<span class="title">package</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">package</span>&gt;</span>nmap<span class="tag">&lt;/<span class="title">package</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">package</span>&gt;</span>opensc-32bit<span class="tag">&lt;/<span class="title">package</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">package</span>&gt;</span>openslp-32bit<span class="tag">&lt;/<span class="title">package</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">package</span>&gt;</span>opie-32bit<span class="tag">&lt;/<span class="title">package</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">package</span>&gt;</span>orbit2-32bit<span class="tag">&lt;/<span class="title">package</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">package</span>&gt;</span>pam-32bit<span class="tag">&lt;/<span class="title">package</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">package</span>&gt;</span>pam-modules-32bit<span class="tag">&lt;/<span class="title">package</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">package</span>&gt;</span>pam_mount-32bit<span class="tag">&lt;/<span class="title">package</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">package</span>&gt;</span>parted-32bit<span class="tag">&lt;/<span class="title">package</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">package</span>&gt;</span>pciutils-32bit<span class="tag">&lt;/<span class="title">package</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">package</span>&gt;</span>pcsc-lite-32bit<span class="tag">&lt;/<span class="title">package</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">package</span>&gt;</span>popt-32bit<span class="tag">&lt;/<span class="title">package</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">package</span>&gt;</span>qt3-32bit<span class="tag">&lt;/<span class="title">package</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">package</span>&gt;</span>qtcurve-gtk2-32bit<span class="tag">&lt;/<span class="title">package</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">package</span>&gt;</span>rpm-32bit<span class="tag">&lt;/<span class="title">package</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">package</span>&gt;</span>samba-32bit<span class="tag">&lt;/<span class="title">package</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">package</span>&gt;</span>samba-client-32bit<span class="tag">&lt;/<span class="title">package</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">package</span>&gt;</span>startup-notification-32bit<span class="tag">&lt;/<span class="title">package</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">package</span>&gt;</span>strace-32bit<span class="tag">&lt;/<span class="title">package</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">package</span>&gt;</span>sysfsutils-32bit<span class="tag">&lt;/<span class="title">package</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">package</span>&gt;</span>tcl-32bit<span class="tag">&lt;/<span class="title">package</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">package</span>&gt;</span>tcpd-32bit<span class="tag">&lt;/<span class="title">package</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">package</span>&gt;</span>tk-32bit<span class="tag">&lt;/<span class="title">package</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">package</span>&gt;</span>utempter-32bit<span class="tag">&lt;/<span class="title">package</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">package</span>&gt;</span>xaw3d-32bit<span class="tag">&lt;/<span class="title">package</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">package</span>&gt;</span>xorg-x11-driver-video-radeonhd<span class="tag">&lt;/<span class="title">package</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">package</span>&gt;</span>yast2-trans-en_US<span class="tag">&lt;/<span class="title">package</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">package</span>&gt;</span>autoyast2-installation<span class="tag">&lt;/<span class="title">package</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">package</span>&gt;</span>autoyast2-installation<span class="tag">&lt;/<span class="title">package</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="title">packages</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">patterns</span> <span class="attribute">config:type</span>=<span class="value">"list"</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">pattern</span>&gt;</span>Basis-Devel<span class="tag">&lt;/<span class="title">pattern</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">pattern</span>&gt;</span>Minimal<span class="tag">&lt;/<span class="title">pattern</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">pattern</span>&gt;</span>WBEM<span class="tag">&lt;/<span class="title">pattern</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">pattern</span>&gt;</span>apparmor<span class="tag">&lt;/<span class="title">pattern</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">pattern</span>&gt;</span>base<span class="tag">&lt;/<span class="title">pattern</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">pattern</span>&gt;</span>documentation<span class="tag">&lt;/<span class="title">pattern</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">pattern</span>&gt;</span>gnome<span class="tag">&lt;/<span class="title">pattern</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">pattern</span>&gt;</span>kde<span class="tag">&lt;/<span class="title">pattern</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">pattern</span>&gt;</span>oracle_server<span class="tag">&lt;/<span class="title">pattern</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">pattern</span>&gt;</span>print_server<span class="tag">&lt;/<span class="title">pattern</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">pattern</span>&gt;</span>x11<span class="tag">&lt;/<span class="title">pattern</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="title">patterns</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">remove-packages</span> <span class="attribute">config:type</span>=<span class="value">"list"</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">package</span>&gt;</span>apache2<span class="tag">&lt;/<span class="title">package</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">package</span>&gt;</span>apache2-prefork<span class="tag">&lt;/<span class="title">package</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">package</span>&gt;</span>apache2-utils<span class="tag">&lt;/<span class="title">package</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">package</span>&gt;</span>apache2-worker<span class="tag">&lt;/<span class="title">package</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">package</span>&gt;</span>emacs-nox<span class="tag">&lt;/<span class="title">package</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">package</span>&gt;</span>libapr-util1<span class="tag">&lt;/<span class="title">package</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">package</span>&gt;</span>libapr1<span class="tag">&lt;/<span class="title">package</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">package</span>&gt;</span>libqt4-sql-sqlite<span class="tag">&lt;/<span class="title">package</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">package</span>&gt;</span>lprng<span class="tag">&lt;/<span class="title">package</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">package</span>&gt;</span>pcmciautils<span class="tag">&lt;/<span class="title">package</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">package</span>&gt;</span>portmap<span class="tag">&lt;/<span class="title">package</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">package</span>&gt;</span>rsyslog<span class="tag">&lt;/<span class="title">package</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">package</span>&gt;</span>sendmail<span class="tag">&lt;/<span class="title">package</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">package</span>&gt;</span>susehelp_de<span class="tag">&lt;/<span class="title">package</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">package</span>&gt;</span>open-iscsi<span class="tag">&lt;/<span class="title">package</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="title">remove-packages</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="title">software</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="title">timezone</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">hwclock</span>&gt;</span>localtime<span class="tag">&lt;/<span class="title">hwclock</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">timezone</span>&gt;</span>Asia/Shanghai<span class="tag">&lt;/<span class="title">timezone</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="title">timezone</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="title">user_defaults</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">group</span>&gt;</span>100<span class="tag">&lt;/<span class="title">group</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">groups</span>&gt;</span>video,dialout<span class="tag">&lt;/<span class="title">groups</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">home</span>&gt;</span>/home<span class="tag">&lt;/<span class="title">home</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">inactive</span>&gt;</span>-1<span class="tag">&lt;/<span class="title">inactive</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">shell</span>&gt;</span>/bin/bash<span class="tag">&lt;/<span class="title">shell</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">skel</span>&gt;</span>/etc/skel<span class="tag">&lt;/<span class="title">skel</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">umask</span>&gt;</span>022<span class="tag">&lt;/<span class="title">umask</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="title">user_defaults</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="title">users</span> <span class="attribute">config:type</span>=<span class="value">"list"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">user</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">encrypted</span> <span class="attribute">config:type</span>=<span class="value">"boolean"</span>&gt;</span>true<span class="tag">&lt;/<span class="title">encrypted</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">fullname</span>&gt;</span>Games account<span class="tag">&lt;/<span class="title">fullname</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">gid</span>&gt;</span>100<span class="tag">&lt;/<span class="title">gid</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">home</span>&gt;</span>/var/games<span class="tag">&lt;/<span class="title">home</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">password_settings</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="title">flag</span>&gt;</span><span class="tag">&lt;/<span class="title">flag</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="title">inact</span>&gt;</span>-1<span class="tag">&lt;/<span class="title">inact</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="title">max</span>&gt;</span>99999<span class="tag">&lt;/<span class="title">max</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="title">min</span>&gt;</span>0<span class="tag">&lt;/<span class="title">min</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="title">warn</span>&gt;</span>7<span class="tag">&lt;/<span class="title">warn</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="title">password_settings</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">shell</span>&gt;</span>/bin/bash<span class="tag">&lt;/<span class="title">shell</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">uid</span>&gt;</span>12<span class="tag">&lt;/<span class="title">uid</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">user_password</span>&gt;</span>*<span class="tag">&lt;/<span class="title">user_password</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">username</span>&gt;</span>games<span class="tag">&lt;/<span class="title">username</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="title">user</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">user</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">encrypted</span> <span class="attribute">config:type</span>=<span class="value">"boolean"</span>&gt;</span>true<span class="tag">&lt;/<span class="title">encrypted</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">fullname</span>&gt;</span>bin<span class="tag">&lt;/<span class="title">fullname</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">gid</span>&gt;</span>1<span class="tag">&lt;/<span class="title">gid</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">home</span>&gt;</span>/bin<span class="tag">&lt;/<span class="title">home</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">password_settings</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="title">flag</span>&gt;</span><span class="tag">&lt;/<span class="title">flag</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="title">inact</span>&gt;</span>-1<span class="tag">&lt;/<span class="title">inact</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="title">max</span>&gt;</span>99999<span class="tag">&lt;/<span class="title">max</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="title">min</span>&gt;</span>0<span class="tag">&lt;/<span class="title">min</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="title">warn</span>&gt;</span>7<span class="tag">&lt;/<span class="title">warn</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="title">password_settings</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">shell</span>&gt;</span>/bin/bash<span class="tag">&lt;/<span class="title">shell</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">uid</span>&gt;</span>1<span class="tag">&lt;/<span class="title">uid</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">user_password</span>&gt;</span>*<span class="tag">&lt;/<span class="title">user_password</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">username</span>&gt;</span>bin<span class="tag">&lt;/<span class="title">username</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="title">user</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">user</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">encrypted</span> <span class="attribute">config:type</span>=<span class="value">"boolean"</span>&gt;</span>true<span class="tag">&lt;/<span class="title">encrypted</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">fullname</span>&gt;</span>nobody<span class="tag">&lt;/<span class="title">fullname</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">gid</span>&gt;</span>65533<span class="tag">&lt;/<span class="title">gid</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">home</span>&gt;</span>/var/lib/nobody<span class="tag">&lt;/<span class="title">home</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">password_settings</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="title">flag</span>&gt;</span><span class="tag">&lt;/<span class="title">flag</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="title">inact</span>&gt;</span>-1<span class="tag">&lt;/<span class="title">inact</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="title">max</span>&gt;</span>99999<span class="tag">&lt;/<span class="title">max</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="title">min</span>&gt;</span>0<span class="tag">&lt;/<span class="title">min</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="title">warn</span>&gt;</span>7<span class="tag">&lt;/<span class="title">warn</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="title">password_settings</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">shell</span>&gt;</span>/bin/bash<span class="tag">&lt;/<span class="title">shell</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">uid</span>&gt;</span>65534<span class="tag">&lt;/<span class="title">uid</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">user_password</span>&gt;</span>*<span class="tag">&lt;/<span class="title">user_password</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">username</span>&gt;</span>nobody<span class="tag">&lt;/<span class="title">username</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="title">user</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">user</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">encrypted</span> <span class="attribute">config:type</span>=<span class="value">"boolean"</span>&gt;</span>true<span class="tag">&lt;/<span class="title">encrypted</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">fullname</span>&gt;</span>Printing daemon<span class="tag">&lt;/<span class="title">fullname</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">gid</span>&gt;</span>7<span class="tag">&lt;/<span class="title">gid</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">home</span>&gt;</span>/var/spool/lpd<span class="tag">&lt;/<span class="title">home</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">password_settings</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="title">flag</span>&gt;</span><span class="tag">&lt;/<span class="title">flag</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="title">inact</span>&gt;</span>-1<span class="tag">&lt;/<span class="title">inact</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="title">max</span>&gt;</span>99999<span class="tag">&lt;/<span class="title">max</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="title">min</span>&gt;</span>0<span class="tag">&lt;/<span class="title">min</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="title">warn</span>&gt;</span>7<span class="tag">&lt;/<span class="title">warn</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="title">password_settings</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">shell</span>&gt;</span>/bin/bash<span class="tag">&lt;/<span class="title">shell</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">uid</span>&gt;</span>4<span class="tag">&lt;/<span class="title">uid</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">user_password</span>&gt;</span>*<span class="tag">&lt;/<span class="title">user_password</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">username</span>&gt;</span>lp<span class="tag">&lt;/<span class="title">username</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="title">user</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">user</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">encrypted</span> <span class="attribute">config:type</span>=<span class="value">"boolean"</span>&gt;</span>true<span class="tag">&lt;/<span class="title">encrypted</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">fullname</span>&gt;</span>User for uuidd<span class="tag">&lt;/<span class="title">fullname</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">gid</span>&gt;</span>104<span class="tag">&lt;/<span class="title">gid</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">home</span>&gt;</span>/var/run/uuidd<span class="tag">&lt;/<span class="title">home</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">password_settings</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="title">max</span>&gt;</span>99999<span class="tag">&lt;/<span class="title">max</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="title">min</span>&gt;</span>0<span class="tag">&lt;/<span class="title">min</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="title">warn</span>&gt;</span>7<span class="tag">&lt;/<span class="title">warn</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="title">password_settings</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">shell</span>&gt;</span>/bin/false<span class="tag">&lt;/<span class="title">shell</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">uid</span>&gt;</span>102<span class="tag">&lt;/<span class="title">uid</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">user_password</span>&gt;</span>*<span class="tag">&lt;/<span class="title">user_password</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">username</span>&gt;</span>uuidd<span class="tag">&lt;/<span class="title">username</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="title">user</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">user</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">encrypted</span> <span class="attribute">config:type</span>=<span class="value">"boolean"</span>&gt;</span>true<span class="tag">&lt;/<span class="title">encrypted</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">fullname</span>&gt;</span>Postfix Daemon<span class="tag">&lt;/<span class="title">fullname</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">gid</span>&gt;</span>51<span class="tag">&lt;/<span class="title">gid</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">home</span>&gt;</span>/var/spool/postfix<span class="tag">&lt;/<span class="title">home</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">password_settings</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="title">max</span>&gt;</span>99999<span class="tag">&lt;/<span class="title">max</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="title">min</span>&gt;</span>0<span class="tag">&lt;/<span class="title">min</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="title">warn</span>&gt;</span>7<span class="tag">&lt;/<span class="title">warn</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="title">password_settings</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">shell</span>&gt;</span>/bin/false<span class="tag">&lt;/<span class="title">shell</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">uid</span>&gt;</span>51<span class="tag">&lt;/<span class="title">uid</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">user_password</span>&gt;</span>*<span class="tag">&lt;/<span class="title">user_password</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">username</span>&gt;</span>postfix<span class="tag">&lt;/<span class="title">username</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="title">user</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">user</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">encrypted</span> <span class="attribute">config:type</span>=<span class="value">"boolean"</span>&gt;</span>true<span class="tag">&lt;/<span class="title">encrypted</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">fullname</span>&gt;</span>Novell Customer Center User<span class="tag">&lt;/<span class="title">fullname</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">gid</span>&gt;</span>114<span class="tag">&lt;/<span class="title">gid</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">home</span>&gt;</span>/var/lib/YaST2/suse-ncc-fakehome<span class="tag">&lt;/<span class="title">home</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">password_settings</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="title">max</span>&gt;</span>99999<span class="tag">&lt;/<span class="title">max</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="title">min</span>&gt;</span>0<span class="tag">&lt;/<span class="title">min</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="title">warn</span>&gt;</span>7<span class="tag">&lt;/<span class="title">warn</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="title">password_settings</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">shell</span>&gt;</span>/bin/bash<span class="tag">&lt;/<span class="title">shell</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">uid</span>&gt;</span>107<span class="tag">&lt;/<span class="title">uid</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">user_password</span>&gt;</span>*<span class="tag">&lt;/<span class="title">user_password</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">username</span>&gt;</span>suse-ncc<span class="tag">&lt;/<span class="title">username</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="title">user</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">user</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">encrypted</span> <span class="attribute">config:type</span>=<span class="value">"boolean"</span>&gt;</span>true<span class="tag">&lt;/<span class="title">encrypted</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">fullname</span>&gt;</span>FTP account<span class="tag">&lt;/<span class="title">fullname</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">gid</span>&gt;</span>49<span class="tag">&lt;/<span class="title">gid</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">home</span>&gt;</span>/srv/ftp<span class="tag">&lt;/<span class="title">home</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">password_settings</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="title">flag</span>&gt;</span><span class="tag">&lt;/<span class="title">flag</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="title">inact</span>&gt;</span>-1<span class="tag">&lt;/<span class="title">inact</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="title">max</span>&gt;</span>99999<span class="tag">&lt;/<span class="title">max</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="title">min</span>&gt;</span>0<span class="tag">&lt;/<span class="title">min</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="title">warn</span>&gt;</span>7<span class="tag">&lt;/<span class="title">warn</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="title">password_settings</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">shell</span>&gt;</span>/bin/bash<span class="tag">&lt;/<span class="title">shell</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">uid</span>&gt;</span>40<span class="tag">&lt;/<span class="title">uid</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">user_password</span>&gt;</span>*<span class="tag">&lt;/<span class="title">user_password</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">username</span>&gt;</span>ftp<span class="tag">&lt;/<span class="title">username</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="title">user</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">user</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">encrypted</span> <span class="attribute">config:type</span>=<span class="value">"boolean"</span>&gt;</span>true<span class="tag">&lt;/<span class="title">encrypted</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">fullname</span>&gt;</span>Gnome Display Manager daemon<span class="tag">&lt;/<span class="title">fullname</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">gid</span>&gt;</span>115<span class="tag">&lt;/<span class="title">gid</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">home</span>&gt;</span>/var/lib/gdm<span class="tag">&lt;/<span class="title">home</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">password_settings</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="title">max</span>&gt;</span>99999<span class="tag">&lt;/<span class="title">max</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="title">min</span>&gt;</span>0<span class="tag">&lt;/<span class="title">min</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="title">warn</span>&gt;</span>7<span class="tag">&lt;/<span class="title">warn</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="title">password_settings</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">shell</span>&gt;</span>/bin/false<span class="tag">&lt;/<span class="title">shell</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">uid</span>&gt;</span>108<span class="tag">&lt;/<span class="title">uid</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">user_password</span>&gt;</span>*<span class="tag">&lt;/<span class="title">user_password</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">username</span>&gt;</span>gdm<span class="tag">&lt;/<span class="title">username</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="title">user</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">user</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">encrypted</span> <span class="attribute">config:type</span>=<span class="value">"boolean"</span>&gt;</span>true<span class="tag">&lt;/<span class="title">encrypted</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">fullname</span>&gt;</span>Batch jobs daemon<span class="tag">&lt;/<span class="title">fullname</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">gid</span>&gt;</span>25<span class="tag">&lt;/<span class="title">gid</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">home</span>&gt;</span>/var/spool/atjobs<span class="tag">&lt;/<span class="title">home</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">password_settings</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="title">max</span>&gt;</span>99999<span class="tag">&lt;/<span class="title">max</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="title">min</span>&gt;</span>0<span class="tag">&lt;/<span class="title">min</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="title">warn</span>&gt;</span>7<span class="tag">&lt;/<span class="title">warn</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="title">password_settings</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">shell</span>&gt;</span>/bin/bash<span class="tag">&lt;/<span class="title">shell</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">uid</span>&gt;</span>25<span class="tag">&lt;/<span class="title">uid</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">user_password</span>&gt;</span>*<span class="tag">&lt;/<span class="title">user_password</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">username</span>&gt;</span>at<span class="tag">&lt;/<span class="title">username</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="title">user</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">user</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">encrypted</span> <span class="attribute">config:type</span>=<span class="value">"boolean"</span>&gt;</span>true<span class="tag">&lt;/<span class="title">encrypted</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">fullname</span>&gt;</span>root<span class="tag">&lt;/<span class="title">fullname</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">gid</span>&gt;</span>0<span class="tag">&lt;/<span class="title">gid</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">home</span>&gt;</span>/root<span class="tag">&lt;/<span class="title">home</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">password_settings</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="title">flag</span>&gt;</span><span class="tag">&lt;/<span class="title">flag</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="title">inact</span>&gt;</span>-1<span class="tag">&lt;/<span class="title">inact</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="title">max</span>&gt;</span>99999<span class="tag">&lt;/<span class="title">max</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="title">min</span>&gt;</span>0<span class="tag">&lt;/<span class="title">min</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="title">warn</span>&gt;</span>7<span class="tag">&lt;/<span class="title">warn</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="title">password_settings</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">shell</span>&gt;</span>/bin/bash<span class="tag">&lt;/<span class="title">shell</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">uid</span>&gt;</span>0<span class="tag">&lt;/<span class="title">uid</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">user_password</span>&gt;</span>$2y$05$PgHRKTw9p..KhpR4r3bhF.8yFRP30eBTO6bQSfDspTz8J5/8yw.qW<span class="tag">&lt;/<span class="title">user_password</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">username</span>&gt;</span>root<span class="tag">&lt;/<span class="title">username</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="title">user</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">user</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">encrypted</span> <span class="attribute">config:type</span>=<span class="value">"boolean"</span>&gt;</span>true<span class="tag">&lt;/<span class="title">encrypted</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">fullname</span>&gt;</span>Mailer daemon<span class="tag">&lt;/<span class="title">fullname</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">gid</span>&gt;</span>12<span class="tag">&lt;/<span class="title">gid</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">home</span>&gt;</span>/var/spool/clientmqueue<span class="tag">&lt;/<span class="title">home</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">password_settings</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="title">flag</span>&gt;</span><span class="tag">&lt;/<span class="title">flag</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="title">inact</span>&gt;</span>-1<span class="tag">&lt;/<span class="title">inact</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="title">max</span>&gt;</span>99999<span class="tag">&lt;/<span class="title">max</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="title">min</span>&gt;</span>0<span class="tag">&lt;/<span class="title">min</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="title">warn</span>&gt;</span>7<span class="tag">&lt;/<span class="title">warn</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="title">password_settings</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">shell</span>&gt;</span>/bin/false<span class="tag">&lt;/<span class="title">shell</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">uid</span>&gt;</span>8<span class="tag">&lt;/<span class="title">uid</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">user_password</span>&gt;</span>*<span class="tag">&lt;/<span class="title">user_password</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">username</span>&gt;</span>mail<span class="tag">&lt;/<span class="title">username</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="title">user</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">user</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">encrypted</span> <span class="attribute">config:type</span>=<span class="value">"boolean"</span>&gt;</span>true<span class="tag">&lt;/<span class="title">encrypted</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">fullname</span>&gt;</span>Daemon<span class="tag">&lt;/<span class="title">fullname</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">gid</span>&gt;</span>2<span class="tag">&lt;/<span class="title">gid</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">home</span>&gt;</span>/sbin<span class="tag">&lt;/<span class="title">home</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">password_settings</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="title">flag</span>&gt;</span><span class="tag">&lt;/<span class="title">flag</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="title">inact</span>&gt;</span>-1<span class="tag">&lt;/<span class="title">inact</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="title">max</span>&gt;</span>99999<span class="tag">&lt;/<span class="title">max</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="title">min</span>&gt;</span>0<span class="tag">&lt;/<span class="title">min</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="title">warn</span>&gt;</span>7<span class="tag">&lt;/<span class="title">warn</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="title">password_settings</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">shell</span>&gt;</span>/bin/bash<span class="tag">&lt;/<span class="title">shell</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">uid</span>&gt;</span>2<span class="tag">&lt;/<span class="title">uid</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">user_password</span>&gt;</span>*<span class="tag">&lt;/<span class="title">user_password</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">username</span>&gt;</span>daemon<span class="tag">&lt;/<span class="title">username</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="title">user</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">user</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">encrypted</span> <span class="attribute">config:type</span>=<span class="value">"boolean"</span>&gt;</span>true<span class="tag">&lt;/<span class="title">encrypted</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">fullname</span>&gt;</span>NTP daemon<span class="tag">&lt;/<span class="title">fullname</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">gid</span>&gt;</span>111<span class="tag">&lt;/<span class="title">gid</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">home</span>&gt;</span>/var/lib/ntp<span class="tag">&lt;/<span class="title">home</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">password_settings</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="title">max</span>&gt;</span>99999<span class="tag">&lt;/<span class="title">max</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="title">min</span>&gt;</span>0<span class="tag">&lt;/<span class="title">min</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="title">warn</span>&gt;</span>7<span class="tag">&lt;/<span class="title">warn</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="title">password_settings</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">shell</span>&gt;</span>/bin/false<span class="tag">&lt;/<span class="title">shell</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">uid</span>&gt;</span>74<span class="tag">&lt;/<span class="title">uid</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">user_password</span>&gt;</span>*<span class="tag">&lt;/<span class="title">user_password</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">username</span>&gt;</span>ntp<span class="tag">&lt;/<span class="title">username</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="title">user</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">user</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">encrypted</span> <span class="attribute">config:type</span>=<span class="value">"boolean"</span>&gt;</span>true<span class="tag">&lt;/<span class="title">encrypted</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">fullname</span>&gt;</span>Unix-to-Unix CoPy system<span class="tag">&lt;/<span class="title">fullname</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">gid</span>&gt;</span>14<span class="tag">&lt;/<span class="title">gid</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">home</span>&gt;</span>/etc/uucp<span class="tag">&lt;/<span class="title">home</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">password_settings</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="title">flag</span>&gt;</span><span class="tag">&lt;/<span class="title">flag</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="title">inact</span>&gt;</span>-1<span class="tag">&lt;/<span class="title">inact</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="title">max</span>&gt;</span>99999<span class="tag">&lt;/<span class="title">max</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="title">min</span>&gt;</span>0<span class="tag">&lt;/<span class="title">min</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="title">warn</span>&gt;</span>7<span class="tag">&lt;/<span class="title">warn</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="title">password_settings</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">shell</span>&gt;</span>/bin/bash<span class="tag">&lt;/<span class="title">shell</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">uid</span>&gt;</span>10<span class="tag">&lt;/<span class="title">uid</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">user_password</span>&gt;</span>*<span class="tag">&lt;/<span class="title">user_password</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">username</span>&gt;</span>uucp<span class="tag">&lt;/<span class="title">username</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="title">user</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">user</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">encrypted</span> <span class="attribute">config:type</span>=<span class="value">"boolean"</span>&gt;</span>true<span class="tag">&lt;/<span class="title">encrypted</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">fullname</span>&gt;</span>User for D-Bus<span class="tag">&lt;/<span class="title">fullname</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">gid</span>&gt;</span>101<span class="tag">&lt;/<span class="title">gid</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">home</span>&gt;</span>/var/run/dbus<span class="tag">&lt;/<span class="title">home</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">password_settings</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="title">min</span>&gt;</span>0<span class="tag">&lt;/<span class="title">min</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="title">warn</span>&gt;</span>7<span class="tag">&lt;/<span class="title">warn</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="title">password_settings</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">shell</span>&gt;</span>/bin/false<span class="tag">&lt;/<span class="title">shell</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">uid</span>&gt;</span>100<span class="tag">&lt;/<span class="title">uid</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">user_password</span>&gt;</span>*<span class="tag">&lt;/<span class="title">user_password</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">username</span>&gt;</span>messagebus<span class="tag">&lt;/<span class="title">username</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="title">user</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">user</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">encrypted</span> <span class="attribute">config:type</span>=<span class="value">"boolean"</span>&gt;</span>true<span class="tag">&lt;/<span class="title">encrypted</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">fullname</span>&gt;</span>User for haldaemon<span class="tag">&lt;/<span class="title">fullname</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">gid</span>&gt;</span>102<span class="tag">&lt;/<span class="title">gid</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">home</span>&gt;</span>/var/run/hald<span class="tag">&lt;/<span class="title">home</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">password_settings</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="title">min</span>&gt;</span>0<span class="tag">&lt;/<span class="title">min</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="title">warn</span>&gt;</span>7<span class="tag">&lt;/<span class="title">warn</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="title">password_settings</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">shell</span>&gt;</span>/bin/false<span class="tag">&lt;/<span class="title">shell</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">uid</span>&gt;</span>101<span class="tag">&lt;/<span class="title">uid</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">user_password</span>&gt;</span>*<span class="tag">&lt;/<span class="title">user_password</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">username</span>&gt;</span>haldaemon<span class="tag">&lt;/<span class="title">username</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="title">user</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">user</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">encrypted</span> <span class="attribute">config:type</span>=<span class="value">"boolean"</span>&gt;</span>true<span class="tag">&lt;/<span class="title">encrypted</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">fullname</span>&gt;</span>Oracle user<span class="tag">&lt;/<span class="title">fullname</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">gid</span>&gt;</span>107<span class="tag">&lt;/<span class="title">gid</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">home</span>&gt;</span>/opt/oracle<span class="tag">&lt;/<span class="title">home</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">password_settings</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="title">max</span>&gt;</span>99999<span class="tag">&lt;/<span class="title">max</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="title">min</span>&gt;</span>0<span class="tag">&lt;/<span class="title">min</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="title">warn</span>&gt;</span>7<span class="tag">&lt;/<span class="title">warn</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="title">password_settings</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">shell</span>&gt;</span>/bin/false<span class="tag">&lt;/<span class="title">shell</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">uid</span>&gt;</span>104<span class="tag">&lt;/<span class="title">uid</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">user_password</span>&gt;</span>*<span class="tag">&lt;/<span class="title">user_password</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">username</span>&gt;</span>oracle<span class="tag">&lt;/<span class="title">username</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="title">user</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">user</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">encrypted</span> <span class="attribute">config:type</span>=<span class="value">"boolean"</span>&gt;</span>true<span class="tag">&lt;/<span class="title">encrypted</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">fullname</span>&gt;</span>WWW daemon apache<span class="tag">&lt;/<span class="title">fullname</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">gid</span>&gt;</span>8<span class="tag">&lt;/<span class="title">gid</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">home</span>&gt;</span>/var/lib/wwwrun<span class="tag">&lt;/<span class="title">home</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">password_settings</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="title">flag</span>&gt;</span><span class="tag">&lt;/<span class="title">flag</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="title">inact</span>&gt;</span>-1<span class="tag">&lt;/<span class="title">inact</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="title">max</span>&gt;</span>99999<span class="tag">&lt;/<span class="title">max</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="title">min</span>&gt;</span>0<span class="tag">&lt;/<span class="title">min</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="title">warn</span>&gt;</span>7<span class="tag">&lt;/<span class="title">warn</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="title">password_settings</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">shell</span>&gt;</span>/bin/false<span class="tag">&lt;/<span class="title">shell</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">uid</span>&gt;</span>30<span class="tag">&lt;/<span class="title">uid</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">user_password</span>&gt;</span>*<span class="tag">&lt;/<span class="title">user_password</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">username</span>&gt;</span>wwwrun<span class="tag">&lt;/<span class="title">username</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="title">user</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">user</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">encrypted</span> <span class="attribute">config:type</span>=<span class="value">"boolean"</span>&gt;</span>true<span class="tag">&lt;/<span class="title">encrypted</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">fullname</span>&gt;</span>Puppet daemon<span class="tag">&lt;/<span class="title">fullname</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">gid</span>&gt;</span>106<span class="tag">&lt;/<span class="title">gid</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">home</span>&gt;</span>/var/lib/puppet<span class="tag">&lt;/<span class="title">home</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">password_settings</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="title">max</span>&gt;</span>99999<span class="tag">&lt;/<span class="title">max</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="title">min</span>&gt;</span>0<span class="tag">&lt;/<span class="title">min</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="title">warn</span>&gt;</span>7<span class="tag">&lt;/<span class="title">warn</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="title">password_settings</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">shell</span>&gt;</span>/bin/false<span class="tag">&lt;/<span class="title">shell</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">uid</span>&gt;</span>103<span class="tag">&lt;/<span class="title">uid</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">user_password</span>&gt;</span>*<span class="tag">&lt;/<span class="title">user_password</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">username</span>&gt;</span>puppet<span class="tag">&lt;/<span class="title">username</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="title">user</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">user</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">encrypted</span> <span class="attribute">config:type</span>=<span class="value">"boolean"</span>&gt;</span>true<span class="tag">&lt;/<span class="title">encrypted</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">fullname</span>&gt;</span>Manual pages viewer<span class="tag">&lt;/<span class="title">fullname</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">gid</span>&gt;</span>62<span class="tag">&lt;/<span class="title">gid</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">home</span>&gt;</span>/var/cache/man<span class="tag">&lt;/<span class="title">home</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">password_settings</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="title">flag</span>&gt;</span><span class="tag">&lt;/<span class="title">flag</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="title">inact</span>&gt;</span>-1<span class="tag">&lt;/<span class="title">inact</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="title">max</span>&gt;</span>99999<span class="tag">&lt;/<span class="title">max</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="title">min</span>&gt;</span>0<span class="tag">&lt;/<span class="title">min</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="title">warn</span>&gt;</span>7<span class="tag">&lt;/<span class="title">warn</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="title">password_settings</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">shell</span>&gt;</span>/bin/bash<span class="tag">&lt;/<span class="title">shell</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">uid</span>&gt;</span>13<span class="tag">&lt;/<span class="title">uid</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">user_password</span>&gt;</span>*<span class="tag">&lt;/<span class="title">user_password</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">username</span>&gt;</span>man<span class="tag">&lt;/<span class="title">username</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="title">user</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">user</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">encrypted</span> <span class="attribute">config:type</span>=<span class="value">"boolean"</span>&gt;</span>true<span class="tag">&lt;/<span class="title">encrypted</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">fullname</span>&gt;</span>MySQL database admin<span class="tag">&lt;/<span class="title">fullname</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">gid</span>&gt;</span>109<span class="tag">&lt;/<span class="title">gid</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">home</span>&gt;</span>/var/lib/mysql<span class="tag">&lt;/<span class="title">home</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">password_settings</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="title">max</span>&gt;</span>99999<span class="tag">&lt;/<span class="title">max</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="title">min</span>&gt;</span>0<span class="tag">&lt;/<span class="title">min</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="title">warn</span>&gt;</span>7<span class="tag">&lt;/<span class="title">warn</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="title">password_settings</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">shell</span>&gt;</span>/bin/false<span class="tag">&lt;/<span class="title">shell</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">uid</span>&gt;</span>60<span class="tag">&lt;/<span class="title">uid</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">user_password</span>&gt;</span>*<span class="tag">&lt;/<span class="title">user_password</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">username</span>&gt;</span>mysql<span class="tag">&lt;/<span class="title">username</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="title">user</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">user</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">encrypted</span> <span class="attribute">config:type</span>=<span class="value">"boolean"</span>&gt;</span>true<span class="tag">&lt;/<span class="title">encrypted</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">fullname</span>&gt;</span>PolicyKit<span class="tag">&lt;/<span class="title">fullname</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">gid</span>&gt;</span>110<span class="tag">&lt;/<span class="title">gid</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">home</span>&gt;</span>/var/run/PolicyKit<span class="tag">&lt;/<span class="title">home</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">password_settings</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="title">max</span>&gt;</span>99999<span class="tag">&lt;/<span class="title">max</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="title">min</span>&gt;</span>0<span class="tag">&lt;/<span class="title">min</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="title">warn</span>&gt;</span>7<span class="tag">&lt;/<span class="title">warn</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="title">password_settings</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">shell</span>&gt;</span>/bin/false<span class="tag">&lt;/<span class="title">shell</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">uid</span>&gt;</span>105<span class="tag">&lt;/<span class="title">uid</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">user_password</span>&gt;</span>*<span class="tag">&lt;/<span class="title">user_password</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">username</span>&gt;</span>polkituser<span class="tag">&lt;/<span class="title">username</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="title">user</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">user</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">encrypted</span> <span class="attribute">config:type</span>=<span class="value">"boolean"</span>&gt;</span>true<span class="tag">&lt;/<span class="title">encrypted</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">fullname</span>&gt;</span>News system<span class="tag">&lt;/<span class="title">fullname</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">gid</span>&gt;</span>13<span class="tag">&lt;/<span class="title">gid</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">home</span>&gt;</span>/etc/news<span class="tag">&lt;/<span class="title">home</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">password_settings</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="title">flag</span>&gt;</span><span class="tag">&lt;/<span class="title">flag</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="title">inact</span>&gt;</span>-1<span class="tag">&lt;/<span class="title">inact</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="title">max</span>&gt;</span>99999<span class="tag">&lt;/<span class="title">max</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="title">min</span>&gt;</span>0<span class="tag">&lt;/<span class="title">min</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="title">warn</span>&gt;</span>7<span class="tag">&lt;/<span class="title">warn</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="title">password_settings</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">shell</span>&gt;</span>/bin/bash<span class="tag">&lt;/<span class="title">shell</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">uid</span>&gt;</span>9<span class="tag">&lt;/<span class="title">uid</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">user_password</span>&gt;</span>*<span class="tag">&lt;/<span class="title">user_password</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">username</span>&gt;</span>news<span class="tag">&lt;/<span class="title">username</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="title">user</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">user</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">fullname</span>&gt;</span>SSH daemon<span class="tag">&lt;/<span class="title">fullname</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">gid</span>&gt;</span>65<span class="tag">&lt;/<span class="title">gid</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">home</span>&gt;</span>/var/lib/sshd<span class="tag">&lt;/<span class="title">home</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">password_settings</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="title">inact</span>&gt;</span>-1<span class="tag">&lt;/<span class="title">inact</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="title">max</span>&gt;</span>99999<span class="tag">&lt;/<span class="title">max</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="title">min</span>&gt;</span>0<span class="tag">&lt;/<span class="title">min</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="title">warn</span>&gt;</span>7<span class="tag">&lt;/<span class="title">warn</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="title">password_settings</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">shell</span>&gt;</span>/bin/false<span class="tag">&lt;/<span class="title">shell</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">uid</span>&gt;</span>71<span class="tag">&lt;/<span class="title">uid</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">username</span>&gt;</span>sshd<span class="tag">&lt;/<span class="title">username</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="title">user</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">user</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">encrypted</span> <span class="attribute">config:type</span>=<span class="value">"boolean"</span>&gt;</span>true<span class="tag">&lt;/<span class="title">encrypted</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">fullname</span>&gt;</span>PulseAudio daemon<span class="tag">&lt;/<span class="title">fullname</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">gid</span>&gt;</span>112<span class="tag">&lt;/<span class="title">gid</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">home</span>&gt;</span>/var/lib/pulseaudio<span class="tag">&lt;/<span class="title">home</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">password_settings</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="title">max</span>&gt;</span>99999<span class="tag">&lt;/<span class="title">max</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="title">min</span>&gt;</span>0<span class="tag">&lt;/<span class="title">min</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="title">warn</span>&gt;</span>7<span class="tag">&lt;/<span class="title">warn</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="title">password_settings</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">shell</span>&gt;</span>/bin/false<span class="tag">&lt;/<span class="title">shell</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">uid</span>&gt;</span>106<span class="tag">&lt;/<span class="title">uid</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">user_password</span>&gt;</span>*<span class="tag">&lt;/<span class="title">user_password</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">username</span>&gt;</span>pulse<span class="tag">&lt;/<span class="title">username</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="title">user</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="title">users</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="title">x11</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">color_depth</span> <span class="attribute">config:type</span>=<span class="value">"integer"</span>&gt;</span>24<span class="tag">&lt;/<span class="title">color_depth</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">display_manager</span>&gt;</span>gdm<span class="tag">&lt;/<span class="title">display_manager</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">enable_3d</span> <span class="attribute">config:type</span>=<span class="value">"boolean"</span>&gt;</span>true<span class="tag">&lt;/<span class="title">enable_3d</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">monitor</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">display</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="title">max_hsync</span> <span class="attribute">config:type</span>=<span class="value">"integer"</span>&gt;</span>48<span class="tag">&lt;/<span class="title">max_hsync</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="title">max_vsync</span> <span class="attribute">config:type</span>=<span class="value">"integer"</span>&gt;</span>60<span class="tag">&lt;/<span class="title">max_vsync</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="title">min_hsync</span> <span class="attribute">config:type</span>=<span class="value">"integer"</span>&gt;</span>31<span class="tag">&lt;/<span class="title">min_hsync</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="title">min_vsync</span> <span class="attribute">config:type</span>=<span class="value">"integer"</span>&gt;</span>50<span class="tag">&lt;/<span class="title">min_vsync</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="title">display</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">monitor_device</span>&gt;</span>1024X768@60HZ<span class="tag">&lt;/<span class="title">monitor_device</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">monitor_vendor</span>&gt;</span>--&amp;gt; VESA<span class="tag">&lt;/<span class="title">monitor_vendor</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="title">monitor</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">resolution</span>&gt;</span>1024x768 (XGA)<span class="tag">&lt;/<span class="title">resolution</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">window_manager</span>&gt;</span>gnome<span class="tag">&lt;/<span class="title">window_manager</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="title">x11</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="title">profile</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h2 id="SuSE自动化PXE网络安装">SuSE自动化PXE网络安装</h2><h3 id="PXE基本原理">PXE基本原理</h3><blockquote>
<p>什么是PXE</p>
</blockquote>
<p>PXE(Pre-boot Execution Environment)是由Intel设计的协议，它可以使计算机通过网络启动。协议分为client和server两端，PXE client在网卡的ROM中，当计算机引导时，BIOS把PXE client调入内存执行，并显示出命令菜单，经用户选择后，PXE client将放置在远端的操作系统通过网络下载到本地运行。<br>PXE协议的成功运行需要解决以下两个问题：</p>
<ol>
<li>既然是通过网络传输，那么计算机在启动时，它的IP地址由谁来配置；</li>
<li>通过什么协议下载Linux内核和根文件系统。</li>
</ol>
<p>对于第一个问题，可以通过DHCP Server解决，由DHCP server来给PXE client分配一个IP地址，DHCP Server是用来给DHCP Client动态分配IP地址的协议，不过由于这里是给PXE Client分配IP地址，所以在配置DHCP Server时，需要增加相应的PXE特有配置。<br>至于第二个问题，在PXE client所在的ROM中，已经存在了TFTP Client。PXE Client使用TFTP Client，通过TFTP协议到TFTP Server上下载所需的文件。<br>这样，PXE协议运行的条件就具备了，下面我们就来看看PXE协议的工作过程。</p>
<blockquote>
<p>工作过程</p>
</blockquote>
<p>在下图中，PXE client是需要安装Linux的计算机，TFTP Server和DHCP Server运行在另外一台Linux Server上。Bootstrap文件、配置文件、Linux内核以及Linux根文件系统都放置在Linux Server上TFTP服务器的根目录下。<br>PXE client在工作过程中，需要三个二进制文件：bootstrap、Linux 内核和Linux根文件系统。Bootstrap文件是可执行程序，它向用户提供简单的控制界面，并根据用户的选择，下载合适的Linux内核以及Linux根文件系统。</p>
<p><img src="http://ww4.sinaimg.cn/large/7207510dgw1esjqdlpssej20j50luq4o.jpg" alt=""></p>
<blockquote>
<p>方案介绍</p>
</blockquote>
<p>这种方案需要首先设置一个启动服务器和一个安装服务器（可以配置在同一台物理机上），然后通过网络启动存放在启动服务器上的安装程序。安装程序会自动访问存放在安装服务器上的安装配置文件和安装介质来完成安装。</p>
<p><code>涉及到的技术</code><br>该方案主要应用了三种技术：</p>
<ol>
<li>在PC上从网络启动SLES安装程序的PXE协议</li>
<li>SLES安装程序提供的网络安装功能（即指通过网络访问安装介质）</li>
<li>SLES安装程序提供的无人值守安装功能（SuSE称为AutoYast）</li>
</ol>
<p><code>软硬件需求</code><br>要按本文介绍的方法完成自动化安装，你需要如下软硬件资源：</p>
<ul>
<li>一台PC机器作为启动和安装服务器（其它架构机器也可以）</li>
<li>一台待安装的PC机器，它的网卡必须带有PXE支持</li>
<li>一个建好的局域网，上述两台机器已经连接入同一子网</li>
<li>待安装的SLES安装介质</li>
</ul>
<h3 id="配置tftpd">配置tftpd</h3><blockquote>
<p>为了简化步骤，我们在XP虚拟机下搭建DHCP和TFTP服务端，用tftpd工具来整合实现PXE网络引导，注意服务端与客户端要在同一局域网内。在Linux下配置服务的原理类似，具体方法可参考互联网。</p>
</blockquote>
<p>(1)下载tftpd<br><a href="http://tftpd32.jounin.net/" target="_blank" rel="external">http://tftpd32.jounin.net/</a></p>
<p>(2)启动tftpd32程序，选择【Settings】</p>
<p><img src="http://ww3.sinaimg.cn/large/7207510dgw1esjqdmb0dcj20b809imz6.jpg" alt=""></p>
<p>(3)按需勾选，这里我们仅选择【TFTP】和【DHCP】</p>
<p><img src="http://ww2.sinaimg.cn/large/7207510dgw1esjqdmsu8tj20a90eyab7.jpg" alt=""></p>
<p>(4)TFTP设置如下<br>Base Directory：对应存放Linux的引导文件<br>PXE Compatibility：增强对不同型号网卡的网络启动支持<br>Show Progress bar：在网络引导过程中显示进度<br>Translate Unix file names：转化Unix文件名<br>Allow “\” As virtual root：允许虚拟路径<br>其它高级选项：设置包括兼容性以及一些细节</p>
<p><img src="http://ww1.sinaimg.cn/large/7207510dgw1esjqdnb9j3j20aa0eytax.jpg" alt=""></p>
<p>(5)DHCP配置<br>重点注意Boot File引导文件的设置和DHCP绑定地址</p>
<p><img src="http://ww3.sinaimg.cn/large/7207510dgw1esjqdntup0j20ac0ev762.jpg" alt=""></p>
<p>(6)tftpboot目录结构</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">file://D:\tftpboot  (<span class="number">2</span> folders, <span class="number">3</span> files, <span class="number">35.86</span> MB, <span class="number">36.46</span> MB <span class="keyword">in</span> total.)</span><br><span class="line">│   INITRD    <span class="number">32.20</span> MB</span><br><span class="line">│   LINUX <span class="number">3.64</span> MB</span><br><span class="line">│   pxelinux.<span class="number">0</span>    <span class="number">16.04</span> KB</span><br><span class="line">├─pxelinux.cfg  (<span class="number">0</span> folders, <span class="number">1</span> files, <span class="number">193</span> bytes, <span class="number">193</span> bytes <span class="keyword">in</span> total.)</span><br><span class="line">│         default <span class="number">193</span> bytes</span><br><span class="line">└─tftpd32   (<span class="number">0</span> folders, <span class="number">4</span> files, <span class="number">620.33</span> KB, <span class="number">620.33</span> KB <span class="keyword">in</span> total.)</span><br><span class="line">            EUPL-EN.pdf <span class="number">33.51</span> KB</span><br><span class="line">            tftpd32.chm <span class="number">346.96</span> KB</span><br><span class="line">            tftpd32.exe <span class="number">200.50</span> KB</span><br><span class="line">            tftpd32.ini <span class="number">39.36</span> KB</span><br></pre></td></tr></table></figure>
<p>INITRD和LINUX提取自Linux启动引导镜像<br>pxelinux.0是pxe启动引导镜像<br>pxelinux.cfg文件夹下的default文件为启动菜单配置项<br>编辑<code>tftpboot\pxelinux.cfg</code>，可以自定义autoinst.xml文件的访问方式和路径</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">default linux</span><br><span class="line"> </span><br><span class="line"><span class="comment"># Install Linux</span></span><br><span class="line">label linux</span><br><span class="line">  kernel linux</span><br><span class="line">  append initrd=initrd autoyast=ftp://<span class="number">198.15</span>.<span class="number">0.106</span>/suse/autoinst.xml install=ftp://<span class="number">198.15</span>.<span class="number">0.106</span>/suse splash=silent showopts</span><br></pre></td></tr></table></figure>
<h3 id="配置FTP">配置FTP</h3><p>(1)下载Filezilla Server<br><a href="http://filezilla-project.org/" target="_blank" rel="external">http://filezilla-project.org/</a></p>
<p>(2)设置ftp<br>允许匿名访问帐户即可，配置好ftp路径<br>提取SLES镜像内的安装目录至ftp目录下</p>
<h3 id="配置AutoYaST">配置AutoYaST</h3><blockquote>
<p>使用SuSE中的AutoYaST工具生成autoinst.xml，复制到ftp任意目录下，注意文件路径与default配置相吻合</p>
</blockquote>
<p><code>网络启动机器</code></p>
<p>前面的配置工作完成后，下面我们就在待安装机器上通过网络以无人值守的方式来安装</p>
<p>(1)启动待安装机器，选择从网卡启动。具体方法因BIOS版本不同而异。下图是从VMWare虚拟机上得到的选择网络启动的屏幕截图。</p>
<p><img src="http://ww2.sinaimg.cn/large/7207510dgw1esjqdo92xij209b05oaaa.jpg" alt=""></p>
<p>(2)网卡中的PXE代码会联系DHCP服务器来获取IP地址以及启动镜像，然后启动镜像被载入并运行。</p>
<p><img src="http://ww1.sinaimg.cn/large/7207510dgw1esjrhjsgthj20k20b7wgw.jpg" alt=""></p>
<p>(3)开始全自动安装</p>
<p><img src="http://ww3.sinaimg.cn/large/7207510dgw1esjrhlmbe2j20sg0lcdnj.jpg" alt=""></p>
<h3 id="安装后添加自定义模块">安装后添加自定义模块</h3><blockquote>
<p>我这里以添加Kernel内核补丁为例</p>
</blockquote>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="title">scripts</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="title">init-scripts</span> <span class="attribute">config:type</span>=<span class="value">"list"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="title">script</span>&gt;</span><span class="javascript"></span><br><span class="line">&lt;filename&gt;instkernel.sh&lt;<span class="regexp">/filename&gt;</span><br><span class="line">&lt;debug config:type="boolean"&gt;true&lt;/</span>debug&gt;</span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="title">location</span>&gt;</span><span class="tag">&lt;/<span class="title">location</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="title">interpreter</span>&gt;</span>shell<span class="tag">&lt;/<span class="title">interpreter</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="title">source</span>&gt;</span><span class="cdata">&lt;![CDATA[</span><br><span class="line">#!/bin/bash</span><br><span class="line">#</span><br><span class="line"># After installation, the logfile from this script can be found in</span><br><span class="line"># /var/adm/autoinstall/logs</span><br><span class="line">#</span><br><span class="line">echo "========================================="</span><br><span class="line">echo "... Starting AutoYAST included script ..."</span><br><span class="line">echo "========================================="</span><br><span class="line">rpm -ivh --root=/  ftp://144.131.254.206/update/3.0.74-0.6.8/kernel-default-base-3.0.74-0.6.8.1.x86_64.rpm </span><br><span class="line">rpm -ivh --root=/  ftp://144.131.254.206/update/3.0.74-0.6.8/kernel-default-3.0.74-0.6.8.1.x86_64.rpm </span><br><span class="line">rpm -ivh --root=/  ftp://144.131.254.206/update/3.0.74-0.6.8/kernel-source-3.0.74-0.6.8.1.x86_64.rpm </span><br><span class="line">rpm -ivh --root=/  ftp://144.131.254.206/update/3.0.74-0.6.8/kernel-default-devel-3.0.74-0.6.8.1.x86_64.rpm</span><br><span class="line">]]&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="title">source</span>&gt;</span></span><br><span class="line"></span></span><span class="tag">&lt;/<span class="title">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="title">init-scripts</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="title">scripts</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h2 id="小结">小结</h2><p><img src="http://ww2.sinaimg.cn/large/7207510dgw1esjrhkbs4ej20dd081mxf.jpg" alt=""></p>
<p>统一是自动化运维的基础核心，而统一部署又是自动化运维的第一步，其实在研究自动化部署的过程中我们会遇到各种坑，只有踩过的人才能够体会其中的不容易，如果大家在测试和使用SuSE自动化安装时遇到任何问题，欢迎直接在原文下方留言，我们一起学习和成长^_^。</p>
]]></content>
    <summary type="html">
    <![CDATA[基于AutoYaST简化SuSE自动化部署流程]]>
    
    </summary>
    
      <category term="学习 | Study" scheme="http://wsgzao.github.io/categories/%E5%AD%A6%E4%B9%A0-Study/"/>
    
  </entry>
  
  <entry>
    <title><![CDATA[基于Kickstart自动化安装CentOS实践]]></title>
    <link href="http://wsgzao.github.io/post/kickstart/"/>
    <id>http://wsgzao.github.io/post/kickstart/</id>
    <published>2015-05-20T07:06:46.000Z</published>
    <updated>2015-06-19T06:42:15.000Z</updated>
    <content type="html"><![CDATA[<p><img src="http://i.v2ex.co/9a5au33Z.png" alt=""></p>
<h2 id="前言">前言</h2><p>因为需要在浪潮的x86服务器中集中部署CentOS搭建基于Hadoop的大数据平台，平时接触SLES(SuSE Linux Enterprise Server)较多并且已经实现基于Autoyast方式使用光盘或者PXE网络自动化安装(后续会分享具体实现方法)。这次主要通过学习Kisckstart实现最简单的光盘方式自动化安装CentOS，而网上的大多数教程并不完全适用于自身的环境，本文将不再赘述Kickstart相关概念，细节可参考扩展阅读。</p>
<blockquote>
<p>Kickstart是最为通用的Linux自动化安装方法之一</p>
</blockquote>
<hr>
<h2 id="更新历史">更新历史</h2><p>2015年05月20日 - 初稿</p>
<p>阅读原文 - <a href="http://wsgzao.github.io/post/kickstart/" target="_blank" rel="external">http://wsgzao.github.io/post/kickstart/</a></p>
<p>扩展阅读</p>
<ul>
<li>CentOS - <a href="http://wiki.centos.org/zh/TipsAndTricks/KickStart" target="_blank" rel="external">http://wiki.centos.org/zh/TipsAndTricks/KickStart</a></li>
<li>Fedora - <a href="https://fedoraproject.org/wiki/Anaconda/Kickstart/zh-cn" target="_blank" rel="external">https://fedoraproject.org/wiki/Anaconda/Kickstart/zh-cn</a></li>
<li>Autoinst索引 - <a href="http://wsgzao.github.io/index/#Autoinst" target="_blank" rel="external">http://wsgzao.github.io/index/#Autoinst</a> </li>
<li>GitHub源码 - <a href="https://github.com/wsgzao/autoinstall/" target="_blank" rel="external">https://github.com/wsgzao/autoinstall/</a></li>
</ul>
<hr>
<h2 id="环境准备">环境准备</h2><h3 id="定制系统">定制系统</h3><blockquote>
<p>CentOS-6.4-x86_64</p>
</blockquote>
<p>官方下载地址 - <a href="http://wiki.centos.org/Download" target="_blank" rel="external">http://wiki.centos.org/Download</a></p>
<h3 id="安装软件包">安装软件包</h3><blockquote>
<p>代理上网小技巧，export http_proxy=ip:port</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum -y install createrepo mkisofs</span><br></pre></td></tr></table></figure>
<h2 id="制作流程">制作流程</h2><h3 id="目录结构">目录结构</h3><blockquote>
<p>拷贝CentOS原始镜像内容，不做任何精简</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">mkdir /mnt/centos</span><br><span class="line">mount /dev/sr0 /mnt/centos</span><br><span class="line">mkdir /tmp/iso</span><br><span class="line">cp -r /mnt/centos/* /tmp/iso</span><br></pre></td></tr></table></figure>
<h3 id="增加Kickstart配置文件">增加Kickstart配置文件</h3><blockquote>
<p>文件路径和安装方式可自由定义</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> /tmp/iso/isolinux</span><br><span class="line"><span class="comment">#修改引导，注意ks=部分</span></span><br><span class="line">vi isolinux.cfg</span><br><span class="line"></span><br><span class="line">label linux</span><br><span class="line">  menu label ^Install or upgrade an existing system</span><br><span class="line">  menu default</span><br><span class="line">  kernel vmlinuz</span><br><span class="line">  append initrd=initrd.img ks=cdrom:/isolinux/ks.cfg</span><br><span class="line"></span><br><span class="line"><span class="comment">#手动增加Kickstart配置文件</span></span><br><span class="line">vi ks.cfg</span><br></pre></td></tr></table></figure>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#基于Kickstart自动化安装CentOS实践 - http://wsgzao.github.io/post/kickstart/</span></span><br><span class="line"><span class="comment">#Kickstart file automatically generated by anaconda.</span></span><br><span class="line"><span class="comment">#version=DEVEL</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#Install OS instead of upgrade</span></span><br><span class="line"><span class="comment">#表示是安装，而不是升级</span></span><br><span class="line">install</span><br><span class="line"></span><br><span class="line"><span class="comment">#Use text mode install</span></span><br><span class="line"><span class="comment">#文本方式安装 </span></span><br><span class="line">text</span><br><span class="line"></span><br><span class="line"><span class="comment">#Use network installation</span></span><br><span class="line"><span class="comment">#使用网络安装</span></span><br><span class="line"><span class="comment">#url --url=ftp://ip/centos</span></span><br><span class="line"><span class="comment">#Local installation Use CDROM installation media</span></span><br><span class="line"><span class="comment">#使用光盘安装 </span></span><br><span class="line">cdrom</span><br><span class="line"></span><br><span class="line"><span class="comment">#Installation Number configuration</span></span><br><span class="line"><span class="comment">#如果是RedHat的系统，会要求输入key，这里配置为跳过，如果不配置安装时会停在那里要求用户输入key</span></span><br><span class="line"><span class="comment">#key –skip</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#System language</span></span><br><span class="line"><span class="comment">#语言环境</span></span><br><span class="line"><span class="comment">#lang en_US.UTF-8</span></span><br><span class="line">lang zh_CN.UTF-<span class="number">8</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#System keyboard</span></span><br><span class="line"><span class="comment">#键盘类型</span></span><br><span class="line">keyboard us</span><br><span class="line"></span><br><span class="line"><span class="comment">#Network information</span></span><br><span class="line"><span class="comment">#网络配置</span></span><br><span class="line"><span class="comment">#network --device eth0 --bootproto dhcp --onboot yes</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#Root password </span></span><br><span class="line"><span class="comment">#root密码</span></span><br><span class="line">rootpw chinaums</span><br><span class="line"></span><br><span class="line"><span class="comment">#Firewall configuration</span></span><br><span class="line"><span class="comment">#禁用防火墙</span></span><br><span class="line">firewall --disabled</span><br><span class="line"></span><br><span class="line"><span class="comment">#SELinux configuration </span></span><br><span class="line"><span class="comment">#禁用selinux</span></span><br><span class="line">selinux --disabled</span><br><span class="line"></span><br><span class="line"><span class="comment">#Run the Setup Agent on first boot</span></span><br><span class="line"><span class="comment">#禁用第一次启动时设置系统的向导</span></span><br><span class="line">firstboot --disable</span><br><span class="line"></span><br><span class="line"><span class="comment">#System authorization information</span></span><br><span class="line"><span class="comment">#用户认证配置，useshadow表示使用本地认证，--passalgo表示密码加密算法</span></span><br><span class="line">authconfig --enableshadow --passalgo=sha512</span><br><span class="line"></span><br><span class="line"><span class="comment">#System timezone </span></span><br><span class="line"><span class="comment">#设置时区为上海</span></span><br><span class="line">timezone --isUtc Asia/Shanghai</span><br><span class="line"></span><br><span class="line"><span class="comment">#System bootloader configuration</span></span><br><span class="line"><span class="comment">#指明bootloader的安装位置，指明驱动器的排序，指明操作系统安装完成之后，向内核传递的参数</span></span><br><span class="line">bootloader --location=mbr --driveorder=sda --append=<span class="string">"crashkernel=auto rhgb quiet"</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#Clear the Master Boot Record</span></span><br><span class="line"><span class="comment">#清除MBR引导记录</span></span><br><span class="line">zerombr yes</span><br><span class="line"></span><br><span class="line"><span class="comment">#Partition clearing information</span></span><br><span class="line"><span class="comment">#清除硬盘上的所有数据</span></span><br><span class="line">clearpart --all --initlabel</span><br><span class="line"></span><br><span class="line"><span class="comment">#Disk partitioning information </span></span><br><span class="line"><span class="comment">#自定义分区</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#创建一个200M大小的分区挂载/boot类型为ext4</span></span><br><span class="line">part /boot --fstype=ext4  --size=<span class="number">200</span> --ondisk=sda</span><br><span class="line"></span><br><span class="line"><span class="comment">#创建一个20000M大小的SWAP分区</span></span><br><span class="line">part swap --size=<span class="number">20000</span> --ondisk=sda</span><br><span class="line"></span><br><span class="line"><span class="comment">#创建/目录</span></span><br><span class="line">part / --fstype=ext4 --grow --size=<span class="number">1</span> --ondisk=sda</span><br><span class="line"></span><br><span class="line"><span class="comment">#Reboot after installation</span></span><br><span class="line"><span class="comment">#设置完成之后重启</span></span><br><span class="line">reboot --eject</span><br><span class="line"></span><br><span class="line"><span class="comment">#This packages is for CentOS 6.4</span></span><br><span class="line"><span class="comment">#为CentOS 6.4定制的软件包</span></span><br><span class="line">%packages</span><br><span class="line">@base</span><br><span class="line">@core</span><br><span class="line">@chinese-support</span><br><span class="line">@server-policy</span><br><span class="line">telnet</span><br><span class="line"></span><br><span class="line"><span class="comment">#增加安装后运行脚本  </span></span><br><span class="line">%post</span><br><span class="line"><span class="comment">#config service  </span></span><br><span class="line"><span class="comment">#自定义服务</span></span><br><span class="line">service NetworkManager stop</span><br><span class="line">chkconfig NetworkManager off</span><br><span class="line">service network restart</span><br><span class="line"></span><br><span class="line"><span class="comment">#eject cdrom</span></span><br><span class="line"><span class="comment">#安装完成弹出光碟  </span></span><br><span class="line"><span class="comment">#eject</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#reboot</span></span><br><span class="line"><span class="comment">#执行完毕后重启  </span></span><br><span class="line"><span class="comment">#reboot -f  </span></span><br><span class="line"></span><br><span class="line"><span class="comment">#结束自动化部署</span></span><br><span class="line">%end</span><br></pre></td></tr></table></figure>
<h3 id="生成依赖关系和ISO文件">生成依赖关系和ISO文件</h3><blockquote>
<p>注意路径和命令的准确性</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> /tmp/iso</span><br><span class="line">createrepo -g repodata/*comps.xml . </span><br><span class="line">mkisofs -o /tmp/CentOS-<span class="number">6.4</span>_64_auto.iso -b isolinux/isolinux.bin -c isolinux/boot.cat -no-emul-boot -boot-load-size <span class="number">4</span> -boot-info-table  -joliet-long  -R -J -v -T /tmp/iso/</span><br></pre></td></tr></table></figure>
<h3 id="测试和建议">测试和建议</h3><blockquote>
<p>推荐两篇参考文献，建议先在虚拟机上反复测试验证再到物理机部署</p>
</blockquote>
<p>Linux Kickstart 自动安装 - <a href="http://liaoph.com/linux-kickstart/" target="_blank" rel="external">http://liaoph.com/linux-kickstart/</a><br>Centos6.4定制自动化安装盘 - <a href="http://www.wpython.com/444.html" target="_blank" rel="external">http://www.wpython.com/444.html</a></p>
]]></content>
    <summary type="html">
    <![CDATA[基于Kickstart简化Linux自动化部署流程]]>
    
    </summary>
    
      <category term="学习 | Study" scheme="http://wsgzao.github.io/categories/%E5%AD%A6%E4%B9%A0-Study/"/>
    
  </entry>
  
  <entry>
    <title><![CDATA[Windows 8.1/10 升级补丁导致Windows资源管理器停止响应的解决方法]]></title>
    <link href="http://wsgzao.github.io/post/3033889/"/>
    <id>http://wsgzao.github.io/post/3033889/</id>
    <published>2015-05-12T08:28:27.000Z</published>
    <updated>2015-05-12T08:54:38.000Z</updated>
    <content type="html"><![CDATA[<h2 id="前言">前言</h2><p>我自己的操作系统是Windows 8.1（现在为Windows 10），微软在2015年03月11日推送了新的更新补丁，重新启动计算机后发现Windows资源管理器频繁卡顿假死导致不停重启，资源管理器CPU会异常升高，使得Windows资源管理器停止响应。这个问题困扰了我大半个月时间，差点就直接怒降Windows 7或者提前入坑Windows 10预览版（也有各种地雷Bug在等你来踩），现在终于找到了解决方法，分享给大家以供参考。</p>
<blockquote>
<p>微软这次的升级补丁测试得可真到位</p>
</blockquote>
<hr>
<h2 id="更新历史">更新历史</h2><p>2015年05月12日 - 增加Windows 10资源管理器停止响应的解决方法<br>2015年04月02日 - 初稿</p>
<p>阅读原文 - <a href="http://wsgzao.github.io/post/3033889/" target="_blank" rel="external">http://wsgzao.github.io/post/3033889/</a></p>
<p>扩展阅读</p>
<ul>
<li>微软 - <a href="http://support.microsoft.com/zh-cn/kb/3048778" target="_blank" rel="external">http://support.microsoft.com/zh-cn/kb/3048778</a></li>
</ul>
<hr>
<h2 id="问题描述">问题描述</h2><ol>
<li>2015年03月11日后更新了微软推送的升级补丁</li>
<li>资源管理器频繁卡顿假死</li>
<li>资源管理器CPU使用率异常升高</li>
<li>计算机运行卡慢无法正常工作</li>
<li>我和同事的Windows 8.1和Windows 10预览版均受影响</li>
<li>Windows 10的各位未知Bug</li>
</ol>
<h2 id="Windows_8-1">Windows 8.1</h2><h3 id="方法一：移除KB3033889">方法一：移除KB3033889</h3><blockquote>
<p>控制面板 - 程序和功能 - 查看已安装的更新 - 搜索3033889 - 卸载补丁 - 重启</p>
</blockquote>
<h3 id="方法二：使用微软修复补丁">方法二：使用微软修复补丁</h3><blockquote>
<p>可以不用移除KB3033889</p>
</blockquote>
<p><a href="http://pan.baidu.com/s/1o6613XC" target="_blank" rel="external">http://pan.baidu.com/s/1o6613XC</a></p>
<h2 id="Windows_10">Windows 10</h2><h3 id="关闭透明菜单">关闭透明菜单</h3><blockquote>
<p>右键个性化-&gt;颜色-&gt;使透明的【开始】菜单-&gt;关闭</p>
</blockquote>
<p><img src="http://i.v2ex.co/5UZMwv3g.png" alt=""></p>
<h3 id="更换输入法(可选)">更换输入法(可选)</h3><blockquote>
<p>我一直在坚持QQ拼音纯净版，可惜腾讯和搜狗都忘记了研发输入法的初心，百度成功上位</p>
</blockquote>
<p><a href="http://shurufa.baidu.com/" target="_blank" rel="external">http://shurufa.baidu.com/</a></p>
]]></content>
    <summary type="html">
    <![CDATA[微软这次的升级补丁测试得可真到位]]>
    
    </summary>
    
      <category term="学习 | Study" scheme="http://wsgzao.github.io/categories/%E5%AD%A6%E4%B9%A0-Study/"/>
    
  </entry>
  
</feed>